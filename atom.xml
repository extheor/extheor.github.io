<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>码小余の博客</title>
  <icon>https://www.gravatar.com/avatar/7ff8334eb3ce169d5ef407706436ee76</icon>
  <subtitle>每天进步一点点！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://extheor.club/"/>
  <updated>2020-10-07T14:29:14.530Z</updated>
  <id>http://extheor.club/</id>
  
  <author>
    <name>Continue.Run</name>
    <email>2044580857@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>拗音</title>
    <link href="http://extheor.club/posts/95fc9e6e/index.html"/>
    <id>http://extheor.club/posts/95fc9e6e/index.html</id>
    <published>2020-10-07T14:27:41.000Z</published>
    <updated>2020-10-07T14:29:14.530Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="拗音"><a class="markdownIt-Anchor" href="#拗音"></a> 拗音</h1><p>拗音是模仿<strong>中国古代汉语的发音</strong>而产生的。</p><p><strong>い段（「い · ぢ」除外）＋や · ゆ · よ（小一号）</strong></p><p>い段假名 --&gt; き · し · ち · に · ひ · み · り</p><p>​  ぎ · じ · び · ぴ</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/拗音.png"><h2 id="拗音例词"><a class="markdownIt-Anchor" href="#拗音例词"></a> 拗音例词</h2><ul><li>おちゃ（お茶）⓪【茶】</li><li>ジャズ①【爵士乐】</li><li>しゅくしゃ（宿舎）②【宿舍】</li><li>しょくぶつ（植物）②【植物】</li></ul><h2 id="合拗音"><a class="markdownIt-Anchor" href="#合拗音"></a> 合拗音</h2><p>合拗音是明治维新以后为了模仿西方外来语的发音而产生的。专门用于表记<strong>外来语</strong>。只有片假名，无平假名。</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/合拗音.png"><h2 id="合拗音例词"><a class="markdownIt-Anchor" href="#合拗音例词"></a> 合拗音例词</h2><ul><li>フィルム（film）①【胶卷】</li><li>ピロジェクト（project）②③【企画，项目】</li><li>チェス（chess）①【国际象棋】</li><li>サファイア（sapphire）②【蓝宝石】</li><li>おじゃまします（お邪魔します）【打扰了】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图</title>
    <link href="http://extheor.club/posts/af43816b/index.html"/>
    <id>http://extheor.club/posts/af43816b/index.html</id>
    <published>2020-10-07T12:01:35.000Z</published>
    <updated>2020-10-07T14:29:14.517Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图"><a class="markdownIt-Anchor" href="#五十音图"></a> 五十音图</h1><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/五十音图.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>浊音半浊音</title>
    <link href="http://extheor.club/posts/3914bfed/index.html"/>
    <id>http://extheor.club/posts/3914bfed/index.html</id>
    <published>2020-10-06T15:07:25.000Z</published>
    <updated>2020-10-06T15:08:39.473Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="浊音半浊音"><a class="markdownIt-Anchor" href="#浊音半浊音"></a> 浊音半浊音</h1><h2 id="か行和が行"><a class="markdownIt-Anchor" href="#か行和が行"></a> か行和が行</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/か行和が行.png"><h2 id="が行例词"><a class="markdownIt-Anchor" href="#が行例词"></a> が行例词</h2><ul><li>かぎ（鍵）②【钥匙】</li><li>かいがい（海外）①【海外】</li><li>およぐ（泳ぐ）②【游泳】</li><li>かげ（影）①【影子】</li><li>いちご（苺）⓪【草莓】</li><li>かいぎ（会議）①③【会议】</li></ul><h2 id="か行清浊音对比练习"><a class="markdownIt-Anchor" href="#か行清浊音对比练习"></a> か行清浊音对比练习</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/か行清浊音对比练习.png"><h2 id="浊音和鼻浊音"><a class="markdownIt-Anchor" href="#浊音和鼻浊音"></a> 浊音和鼻浊音</h2><p>「が」行根据位置的不同发音有两种。</p><ul><li>词头 --&gt; 浊音<ul><li>ぐあい（具合）⓪【情形】</li><li>ごい語彙①【词汇】</li></ul></li><li>词中或词尾 --&gt; 浊音或鼻浊音均可<ul><li>かがく（科学）①【科学】</li><li>かげ（影）①【影子】</li></ul></li></ul><h2 id="ざ行例词"><a class="markdownIt-Anchor" href="#ざ行例词"></a> ざ行例词</h2><ul><li>かぞく（家族）①【家人】</li><li>みずうみ（湖）③【湖泊】</li><li>ちず（地図）①【地图】</li><li>ふくざつ（複雑）⓪【复杂】</li><li>じこ（事故）①【事故】</li><li>かぜ（風邪）⓪【感冒】</li></ul><h2 id="さ行清浊音对比练习"><a class="markdownIt-Anchor" href="#さ行清浊音对比练习"></a> さ行清浊音对比练习</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/さ行清浊音对比练习.png"><h2 id="た行和だ行"><a class="markdownIt-Anchor" href="#た行和だ行"></a> た行和だ行</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/た行和だ行.png"><h2 id="だ行清浊音对比练习"><a class="markdownIt-Anchor" href="#だ行清浊音对比练习"></a> だ行清浊音对比练习</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/だ行清浊音对比练习.png"><h2 id="だ行例词"><a class="markdownIt-Anchor" href="#だ行例词"></a> だ行例词</h2><ul><li>だもの（果物）②【水果】</li><li>ちぢむ（縮む）⓪【缩小】</li><li>ドア（door）①【门】</li><li>でぐち（出口）①【出口】</li></ul><h2 id="发音相同的两组浊音"><a class="markdownIt-Anchor" href="#发音相同的两组浊音"></a> 发音相同的两组浊音</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/发音相同的两组浊音.png"><h2 id="は行-ば行-ぱ行"><a class="markdownIt-Anchor" href="#は行-ば行-ぱ行"></a> は行 · ば行 · ぱ行</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/は行ば行ぱ行.png"><h2 id="ば行-ぱ行例词"><a class="markdownIt-Anchor" href="#ば行-ぱ行例词"></a> ば行 · ぱ行例词</h2><ul><li>バイク（bike）①【摩托车】</li><li>ながれぼし（流れ星）③【流星】</li><li>ピアス（pierced earrings）①【耳钉，耳坠】</li><li>ピアノ（piano）⓪【钢琴】</li></ul><h2 id="は行清浊音对比练习"><a class="markdownIt-Anchor" href="#は行清浊音对比练习"></a> は行清浊音对比练习</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/は行清浊音对比练习.png"><h2 id="寒暄语"><a class="markdownIt-Anchor" href="#寒暄语"></a> 寒暄语</h2><ul><li>いただきます【我开动了】</li><li>お　かえ（帰）りなさい【欢迎回来】</li><li>ただいま【我回来了】</li><li>おひさしぶりだす【好久不见】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图わ行，复习</title>
    <link href="http://extheor.club/posts/9f97db8f/index.html"/>
    <id>http://extheor.club/posts/9f97db8f/index.html</id>
    <published>2020-10-05T16:21:20.000Z</published>
    <updated>2020-10-05T16:26:34.611Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图わ行复习"><a class="markdownIt-Anchor" href="#五十音图わ行复习"></a> 五十音图わ行，复习</h1><h2 id="わ"><a class="markdownIt-Anchor" href="#わ"></a> わ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/わ.png"><h2 id="を"><a class="markdownIt-Anchor" href="#を"></a> を</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/を.png"><h2 id="わ行例词"><a class="markdownIt-Anchor" href="#わ行例词"></a> わ行例词</h2><ul><li>にわ（庭）⓪【院子】</li><li>わらう（笑う）⓪【笑】</li></ul><h2 id="寒暄语"><a class="markdownIt-Anchor" href="#寒暄语"></a> 寒暄语</h2><ul><li>お休みなさい【晚安】</li><li>また明日【明天见】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图やら行</title>
    <link href="http://extheor.club/posts/6bbf03f0/index.html"/>
    <id>http://extheor.club/posts/6bbf03f0/index.html</id>
    <published>2020-10-02T14:39:25.000Z</published>
    <updated>2020-10-02T14:41:36.109Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图やら行"><a class="markdownIt-Anchor" href="#五十音图やら行"></a> 五十音图やら行</h1><h2 id="や"><a class="markdownIt-Anchor" href="#や"></a> や</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/や.png"><h2 id="い"><a class="markdownIt-Anchor" href="#い"></a> い</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/い.png"><h2 id="ゆ"><a class="markdownIt-Anchor" href="#ゆ"></a> ゆ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ゆ.png"><h2 id="え"><a class="markdownIt-Anchor" href="#え"></a> え</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/え.png"><h2 id="よ"><a class="markdownIt-Anchor" href="#よ"></a> よ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/よ.png"><h2 id="や行例词"><a class="markdownIt-Anchor" href="#や行例词"></a> や行例词</h2><ul><li>やおや（八百屋）⓪【果蔬店】</li><li>おかゆ（お粥）⓪【粥】</li><li>よなか（夜中）⓪【半夜】</li><li>やすみ（休み）③【休息】</li></ul><h2 id="ら"><a class="markdownIt-Anchor" href="#ら"></a> ら</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ら.png"><h2 id="り"><a class="markdownIt-Anchor" href="#り"></a> り</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/り.png"><h2 id="る"><a class="markdownIt-Anchor" href="#る"></a> る</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/る.png"><h2 id="れ"><a class="markdownIt-Anchor" href="#れ"></a> れ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/れ.png"><h2 id="ろ"><a class="markdownIt-Anchor" href="#ろ"></a> ろ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ろ.png"><h2 id="ら行发音练习"><a class="markdownIt-Anchor" href="#ら行发音练习"></a> ら行发音练习</h2><p>られりりれら</p><p>らろるるろら</p><p>られりるれろらろ</p><p>らりるれろ</p><h2 id="ら行例词"><a class="markdownIt-Anchor" href="#ら行例词"></a> ら行例词</h2><ul><li>さくら（桜）⓪【樱花】</li><li>くすり（薬）⓪【药】</li><li>ホテル（hotel）①【宾馆】</li><li>かれし（彼氏）①【男朋友】</li><li>はしる（走る）②【奔跑】</li><li>ロシア（Russia）①【俄罗斯】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>Promise的使用方法</title>
    <link href="http://extheor.club/posts/9eadcdf6/index.html"/>
    <id>http://extheor.club/posts/9eadcdf6/index.html</id>
    <published>2020-09-30T15:35:40.000Z</published>
    <updated>2020-09-30T15:37:26.235Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="promise的使用方法"><a class="markdownIt-Anchor" href="#promise的使用方法"></a> Promise的使用方法</h1><h2 id="不用promise的方法"><a class="markdownIt-Anchor" href="#不用promise的方法"></a> 不用Promise的方法</h2><blockquote><p>会出现回调地狱</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;fileName&#125;</span> </span>文件名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;callback&#125;</span> </span>回调函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileContent</span>(<span class="params">fileName, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 绝对路径</span></span><br><span class="line">  <span class="keyword">const</span> fullFileName = path.resolve(__dirname, <span class="string">"files"</span>, fileName);</span><br><span class="line">  fs.readFile(fullFileName, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(err);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// console.log("data:", data); // data: &lt;Buffer 7b 0d 0a 20 20 22 6e 65 78 74 22 3a 20 22 62 2e 6a 73 6f 6e 22 2c 0d 0a 20 20 22 6d 73 67 22 3a 20 22 74 68 69 73 20 69 73 20 61 22 0d 0a 7d 0d 0a&gt;</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * data 传过来的是二进制格式,如上结果</span></span><br><span class="line"><span class="comment">     * 需要通过 toString() 方法把data转成字符串</span></span><br><span class="line"><span class="comment">     * 然后通过 JSON.parse() 方法把这个字符串解析为对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    callback(<span class="built_in">JSON</span>.parse(data.toString()));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 getFileContent 函数</span></span><br><span class="line"><span class="comment">// 测试 callback-hell</span></span><br><span class="line">getFileContent(<span class="string">"a.json"</span>, (aData) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"a data"</span>, aData);</span><br><span class="line">  getFileContent(aData.next, (bData) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b data"</span>, bData);</span><br><span class="line">    getFileContent(bData.next, (cData) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"c data"</span>, cData);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>实现了先执行a.json文件后才能执行b.json文件，执行了b.json文件后才能执行c.json文件，但是存在回调地狱</p></blockquote><h2 id="使用promise的方法"><a class="markdownIt-Anchor" href="#使用promise的方法"></a> 使用Promise的方法</h2><blockquote><p>解决了回调地狱的问题</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用promise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFileContent</span>(<span class="params">fileName</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * resolve  成功后触发 resolve</span></span><br><span class="line"><span class="comment">   * rejects  失败后触发 rejects</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, rejects</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 绝对路径</span></span><br><span class="line">    <span class="keyword">const</span> fullFileName = path.resolve(__dirname, <span class="string">"files"</span>, fileName);</span><br><span class="line">    fs.readFile(fullFileName, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        rejects(err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// console.log("data:", data); // data: &lt;Buffer 7b 0d 0a 20 20 22 6e 65 78 74 22 3a 20 22 62 2e 6a 73 6f 6e 22 2c 0d 0a 20 20 22 6d 73 67 22 3a 20 22 74 68 69 73 20 69 73 20 61 22 0d 0a 7d 0d 0a&gt;</span></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * data 传过来的是二进制格式,如上结果</span></span><br><span class="line"><span class="comment">       * 需要通过 toString() 方法把data转成字符串</span></span><br><span class="line"><span class="comment">       * 然后通过 JSON.parse() 方法把这个字符串解析为对象</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      resolve(<span class="built_in">JSON</span>.parse(data.toString()));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 把这个promise返回出去</span></span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getFileContent(<span class="string">"a.json"</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">aData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a data"</span>, aData);</span><br><span class="line">    <span class="keyword">return</span> getFileContent(aData.next);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">bData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b data"</span>, bData);</span><br><span class="line">    <span class="keyword">return</span> getFileContent(bData.next);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">cData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(cData);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><blockquote><p>首先new一个 <code>Promise</code> 对象，然后记得把创建的这个对象返回</p><p>然后 <code>getFileContent(&quot;a.json&quot;)</code> 返回一个 <code>Promise { &lt;pending&gt; }</code> 对象，这个对象中有 <code>then</code> 方法和 <code>catch</code> 方法，当文件读取成功后触发 <code>then</code> 方法，当文件读取失败后触发 <code>catch</code> 方法</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="promise" scheme="http://extheor.club/categories/promise/"/>
    
    
      <category term="promise" scheme="http://extheor.club/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>Nodejs博客开发笔记（持续更新）</title>
    <link href="http://extheor.club/posts/5b8c69d5/index.html"/>
    <id>http://extheor.club/posts/5b8c69d5/index.html</id>
    <published>2020-09-30T15:32:35.000Z</published>
    <updated>2020-10-08T12:16:13.005Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="nodejs博客开发笔记持续更新"><a class="markdownIt-Anchor" href="#nodejs博客开发笔记持续更新"></a> Nodejs博客开发笔记（持续更新）</h1><blockquote><p>本博客采用 node 原生制作</p></blockquote><h2 id="span-id接口设计接口设计span"><a class="markdownIt-Anchor" href="#span-id接口设计接口设计span"></a> <span id="接口设计">接口设计</span></h2><table><thead><tr><th>描述</th><th>接口</th><th>方法</th><th>url参数</th><th>备注</th></tr></thead><tbody><tr><td>获取博客列表</td><td>/api/blog/list</td><td>get</td><td>author 作者，keyword 搜索关键字</td><td>参数为空的话，则不进行查询过滤</td></tr><tr><td>获取一篇博客的内容</td><td>/api/blog/detail</td><td>get</td><td>id</td><td></td></tr><tr><td>新增一篇博客</td><td>/api/blog/new</td><td>post</td><td></td><td>post中有新增的信息</td></tr><tr><td>更新一篇博客</td><td>/api/blog/update</td><td>post</td><td>id</td><td>postData中有更新的内容</td></tr><tr><td>删除一篇博客</td><td>/api/blog/del</td><td>post</td><td>id</td><td></td></tr><tr><td>登录</td><td>/api/user/login</td><td>post</td><td></td><td>postData中有用户名和密码</td></tr></tbody></table><h2 id="基本目录结构"><a class="markdownIt-Anchor" href="#基本目录结构"></a> 基本目录结构</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">|-- bin</span><br><span class="line"></span><br><span class="line">​   |-- www.js  ---  服务启动文件</span><br><span class="line"></span><br><span class="line">|-- src</span><br><span class="line"></span><br><span class="line">​|-- controller</span><br><span class="line"></span><br><span class="line">​|-- blog.js  ---  数据文件</span><br><span class="line"></span><br><span class="line">​|-- model</span><br><span class="line"></span><br><span class="line">​|-- resModel.js  ---  模型文件</span><br><span class="line"></span><br><span class="line">​|-- router</span><br><span class="line"></span><br><span class="line">​|-- blog.js  ---  存放 blog 目录下的路由</span><br><span class="line"></span><br><span class="line">​|-- user.js  ---  存放 user 目录下的路由</span><br><span class="line"></span><br><span class="line">|-- app.js  ---  处理路由的文件</span><br><span class="line"></span><br><span class="line">|-- package.json  ---  包管理文件</span><br></pre></td></tr></table></figure><h2 id="博客搭建过程"><a class="markdownIt-Anchor" href="#博客搭建过程"></a> 博客搭建过程</h2><h3 id="梦初"><a class="markdownIt-Anchor" href="#梦初"></a> 【梦初】</h3><blockquote><p>把服务跑起来</p></blockquote><p>www.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="built_in">require</span>(<span class="string">"../app"</span>);</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">const</span> server = http.createServer(serverHandle);</span><br><span class="line"></span><br><span class="line">server.listen(port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`服务启动成功 --- <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>serverHandle 是分离出去的回调函数</p></blockquote><h3 id="梦入"><a class="markdownIt-Anchor" href="#梦入"></a> 【梦入】</h3><blockquote><p>把 serverHandle 导出去</p></blockquote><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 设置返回格式 JSON</span></span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">  res.end(<span class="string">"Hello Blog!"</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = serverHandle;</span><br></pre></td></tr></table></figure><blockquote><p>现在 <code>127.0.0.1:3000</code> 就能正常启动了</p></blockquote><h3 id="梦时"><a class="markdownIt-Anchor" href="#梦时"></a> 【梦时】</h3><blockquote><p>我需要写<a href="#%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1">路由</a>，怎么办呢？于是乎我便把 blog 和 user 两个目录下的路由分别写到不同的 js 文件中，然后导出供 <code>app.js</code> 文件进行路由处理</p></blockquote><p>blog.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> method = req.method; <span class="comment">// GET POST</span></span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  <span class="comment">// 获取路由地址</span></span><br><span class="line">  <span class="keyword">const</span> path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取博客列表</span></span><br><span class="line">  <span class="keyword">if</span> (method == <span class="string">"GET"</span> &amp;&amp; path == <span class="string">"/api/blog/list"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是获取博客列表的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取博客详情</span></span><br><span class="line">  <span class="keyword">if</span> (method == <span class="string">"GET"</span> &amp;&amp; path == <span class="string">"/api/blog/detail"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是获取博客详情的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 新建一篇博客</span></span><br><span class="line">  <span class="keyword">if</span> (method == <span class="string">"POST"</span> &amp;&amp; path == <span class="string">"/api/blog/new"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是新建博客的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 更新一篇博客</span></span><br><span class="line">  <span class="keyword">if</span> (method == <span class="string">"POST"</span> &amp;&amp; path == <span class="string">"/api/blog/update"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是更新博客的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleBlogRouter;</span><br></pre></td></tr></table></figure><p>user.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> method = req.method; <span class="comment">// GET POST</span></span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  <span class="comment">// 获取路由地址</span></span><br><span class="line">  <span class="keyword">const</span> path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 登录</span></span><br><span class="line">  <span class="keyword">if</span> (method == <span class="string">"POST"</span> &amp;&amp; path == <span class="string">"/api/user/login"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是用户登录的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleUserRouter;</span><br></pre></td></tr></table></figure><h3 id="梦境"><a class="markdownIt-Anchor" href="#梦境"></a> 【梦境】</h3><blockquote><p>但是写好路由之后怎么使用它呢？这就需要通过 <code>app.js</code> 来处理路由了，我们通常会在处理路由时，先给它设置 JSON 的返回格式，然后处理时需要以字符串的形式响应给前端，具体如下</p></blockquote><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 blog 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="built_in">require</span>(<span class="string">"./src/router/blog"</span>);</span><br><span class="line"><span class="comment">// 导入 user 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="built_in">require</span>(<span class="string">"./src/router/user"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 设置返回格式 JSON</span></span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 blog 路由</span></span><br><span class="line">  <span class="keyword">const</span> blogData = handleBlogRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (blogData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(blogData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 user 路由</span></span><br><span class="line">  <span class="keyword">const</span> userData = handleUserRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (userData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(userData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 未命中路由，返回 404</span></span><br><span class="line">  res.writeHead(<span class="number">404</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line">  res.write(<span class="string">"404 Not Found\n"</span>);</span><br><span class="line">  res.end();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = serverHandle;</span><br></pre></td></tr></table></figure><blockquote><p>现在我们已经可以通过 <code>http://127.0.0.1:3000/api/blog/list</code> 来正常的访问了</p></blockquote><h3 id="梦遇"><a class="markdownIt-Anchor" href="#梦遇"></a> 【梦遇】</h3><blockquote><p>虽然已经可以正常的访问了，但是我们可以发现， <code>blog.js</code> <code>user.js</code> 中是有重复的代码的，这就需要通过路由设计来优化代码了</p></blockquote><p>在 <code>app.js</code> 中处理它们重复的代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = req.url;</span><br><span class="line">req.path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 blog 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="built_in">require</span>(<span class="string">"./src/router/blog"</span>);</span><br><span class="line"><span class="comment">// 导入 user 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="built_in">require</span>(<span class="string">"./src/router/user"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 设置返回格式 JSON</span></span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  req.path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// 处理 blog 路由</span></span><br><span class="line">  <span class="keyword">const</span> blogData = handleBlogRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (blogData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(blogData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 user 路由</span></span><br><span class="line">  <span class="keyword">const</span> userData = handleUserRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (userData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(userData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 未命中路由，返回 404</span></span><br><span class="line">  res.writeHead(<span class="number">404</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line">  res.write(<span class="string">"404 Not Found\n"</span>);</span><br><span class="line">  res.end();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = serverHandle;</span><br></pre></td></tr></table></figure><blockquote><p>在 <code>blog.js</code>  <code>user.js</code> 文件中就得写成 <code>req.path</code> 了</p></blockquote><p>blog.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取博客列表</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"GET"</span> &amp;&amp; req.path == <span class="string">"/api/blog/list"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是获取博客列表的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取博客详情</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"GET"</span> &amp;&amp; req.path == <span class="string">"/api/blog/detail"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是获取博客详情的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 新建一篇博客</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/blog/new"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是新建博客的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 更新一篇博客</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/blog/update"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是更新博客的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleBlogRouter;</span><br></pre></td></tr></table></figure><p>user.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 登录</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/user/login"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">"这是用户登录的接口"</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleUserRouter;</span><br></pre></td></tr></table></figure><h3 id="梦醒"><a class="markdownIt-Anchor" href="#梦醒"></a> 【梦醒】</h3><blockquote><p>现在虽然能返回一些内容了，但是我们需要返回一些动态的数据，数据是由 <code>router/blog.js</code> 文件中的路由返回的，同样的道理，把数据单独做成一个文件</p></blockquote><blockquote><p>在 <code>controller</code> 目录下新建一个 <code>blog.js</code> 文件</p></blockquote><p>controller/blog.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getList = <span class="function">(<span class="params">author, keyword</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 先返回假数据(格式是正确的)</span></span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      title: <span class="string">"标题A"</span>,</span><br><span class="line">      content: <span class="string">"内容A"</span>,</span><br><span class="line">      createTime: <span class="number">1601305438637</span>,</span><br><span class="line">      author: <span class="string">"张三"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      title: <span class="string">"标题B"</span>,</span><br><span class="line">      content: <span class="string">"内容B"</span>,</span><br><span class="line">      createTime: <span class="number">1601305527630</span>,</span><br><span class="line">      author: <span class="string">"李四"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getList,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>这时我们就可以在 <code>router/blog.js</code> 文件中去使用这个数据文件中的数据了</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 getList 数据文件</span></span><br><span class="line"><span class="keyword">const</span> &#123; getList &#125; = <span class="built_in">require</span>(<span class="string">"../controller/blog"</span>);</span><br></pre></td></tr></table></figure><blockquote><p>想要获取到用户提交的数据，需要解析 query，获取到 query 对象</p><p>首先引入 querystring，然后再使用 querystring.parse 对url进行解析</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入querystring</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解析 query</span></span><br><span class="line">req.query = querystring.parse(url.split(<span class="string">"?"</span>)[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 blog 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleBlogRouter = <span class="built_in">require</span>(<span class="string">"./src/router/blog"</span>);</span><br><span class="line"><span class="comment">// 导入 user 路由文件</span></span><br><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="built_in">require</span>(<span class="string">"./src/router/user"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入querystring</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> serverHandle = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 设置返回格式 JSON</span></span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> url = req.url;</span><br><span class="line">  req.path = url.split(<span class="string">"?"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 解析 query</span></span><br><span class="line">  req.query = querystring.parse(url.split(<span class="string">"?"</span>)[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 blog 路由</span></span><br><span class="line">  <span class="keyword">const</span> blogData = handleBlogRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (blogData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(blogData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理 user 路由</span></span><br><span class="line">  <span class="keyword">const</span> userData = handleUserRouter(req, res);</span><br><span class="line">  <span class="keyword">if</span> (userData) &#123;</span><br><span class="line">    <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">    res.end(<span class="built_in">JSON</span>.stringify(userData));</span><br><span class="line">    <span class="comment">// 最后需要返回</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 未命中路由，返回 404</span></span><br><span class="line">  res.writeHead(<span class="number">404</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line">  res.write(<span class="string">"404 Not Found\n"</span>);</span><br><span class="line">  res.end();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = serverHandle;</span><br></pre></td></tr></table></figure><blockquote><p>现在我们可以在 <code>router/blog.js</code> 文件中调用 getList 函数，来获取到需要返回的数据了</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 query 中的 anthor ,如果没有则为空字符串</span></span><br><span class="line"><span class="keyword">const</span> author = req.query.author || <span class="string">""</span>;</span><br><span class="line"><span class="comment">// 获取 query 中的 keyword ,如果没有则为空字符串</span></span><br><span class="line"><span class="keyword">const</span> keyword = req.query.keyword || <span class="string">""</span>;</span><br><span class="line"><span class="comment">// 调用 getList 函数</span></span><br><span class="line"><span class="keyword">const</span> listData = getList(author, keyword);</span><br></pre></td></tr></table></figure><blockquote><p>但是又想到我们不能直接把这个数据直接返回给前端，我们需要返回给前端的只是需要一些 code 啊，message 、data 之类的东西</p></blockquote><blockquote><p>所以需要创建模型文件，把需要返回的数据用类来封装一下</p></blockquote><p>resModel.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModel</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(data, message) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.message = data;</span><br><span class="line">      data = <span class="literal">null</span>;</span><br><span class="line">      message = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (data) &#123;</span><br><span class="line">      <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (message) &#123;</span><br><span class="line">      <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuccessModel</span> <span class="keyword">extends</span> <span class="title">BaseModel</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(data, message) &#123;</span><br><span class="line">    <span class="keyword">super</span>(data, message);</span><br><span class="line">    <span class="keyword">this</span>.errno = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorModel</span> <span class="keyword">extends</span> <span class="title">BaseModel</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(data, message) &#123;</span><br><span class="line">    <span class="keyword">super</span>(data, message);</span><br><span class="line">    <span class="keyword">this</span>.errno = <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  SuccessModel,</span><br><span class="line">  ErrorModel,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>在 <code>router/blog.js</code> 文件中导入数据模型</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入数据模型</span></span><br><span class="line"><span class="keyword">const</span> &#123; SuccessModel, ErrorModel &#125; = <span class="built_in">require</span>(<span class="string">"../model/resModel"</span>);</span><br></pre></td></tr></table></figure><blockquote><p>返回一个 SuccessModel 对象</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回一个 SuccessModel 对象</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> SuccessModel(listData);</span><br></pre></td></tr></table></figure><p>意思就是说在 <code>SuccessModel</code> 中只传入一个 data 数据，当执行 <code>SuccessModel</code> 类时，会把 <code>listData</code> 的值赋给 <code>this.data</code> 类本身，并且 <code>SuccessModel</code> 自带 error为0</p><blockquote><p>当我在浏览器输入 <code>http://127.0.0.1:3000/api/blog/list</code> 的时候，页面会返回以下内容</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"标题A"</span>,</span><br><span class="line">            <span class="attr">"content"</span>:<span class="string">"内容A"</span>,</span><br><span class="line">            <span class="attr">"createTime"</span>:<span class="number">1601305438637</span>,</span><br><span class="line">            <span class="attr">"author"</span>:<span class="string">"张三"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"标题B"</span>,</span><br><span class="line">            <span class="attr">"content"</span>:<span class="string">"内容B"</span>,</span><br><span class="line">            <span class="attr">"createTime"</span>:<span class="number">1601305527630</span>,</span><br><span class="line">            <span class="attr">"author"</span>:<span class="string">"李四"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"errno"</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="梦结"><a class="markdownIt-Anchor" href="#梦结"></a> 【梦结】</h3><blockquote><p>来总结一下</p><p>代码是怎么运行的？</p></blockquote><ul><li><p>第一层 – www.js</p><ul><li>开启服务</li></ul></li><li><p>第二层 – app.js</p><ul><li>设置返回格式 JSON</li><li>解析 query</li><li>处理 blog 路由</li><li>处理 user 路由</li><li>未命中路由，返回 404</li></ul></li><li><p>第三层 – router/blog.js</p><ul><li>路由文件</li></ul></li><li><p>第四层 – controller/blog.js</p><ul><li>最关心数据的一层</li><li>用来存放数据</li></ul></li></ul><h2 id="处理-post-请求"><a class="markdownIt-Anchor" href="#处理-post-请求"></a> 处理 POST 请求</h2><blockquote><p>在 <code>app.js</code> 文件中处理post data</p></blockquote><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用于处理 post data</span></span><br><span class="line"><span class="keyword">const</span> getPostData = <span class="function">(<span class="params">req</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, rejects</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 如果当前的请求方法不是 POST,则返回空</span></span><br><span class="line">    <span class="keyword">if</span> (req.method !== <span class="string">"POST"</span>) &#123;</span><br><span class="line">      resolve(&#123;&#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果当前的请求头的 content-type 不为 application/json,则返回空</span></span><br><span class="line">    <span class="keyword">if</span> (req.headers[<span class="string">"content-type"</span>] !== <span class="string">"application/json"</span>) &#123;</span><br><span class="line">      resolve(&#123;&#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> postData = <span class="string">""</span>;</span><br><span class="line">    <span class="comment">// 接收前端请求的数据</span></span><br><span class="line">    req.on(<span class="string">"data"</span>, (chunk) =&gt; &#123;</span><br><span class="line">      <span class="comment">// 将传进来的数据转换为字符串</span></span><br><span class="line">      postData += chunk.toString();</span><br><span class="line">    &#125;);</span><br><span class="line">    req.on(<span class="string">"end"</span>, () =&gt; &#123;</span><br><span class="line">      <span class="comment">// 如果 postData 为空，则返回空</span></span><br><span class="line">      <span class="keyword">if</span> (!postData) &#123;</span><br><span class="line">        resolve(&#123;&#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 如果 postData 存在，则返回这个JSON格式的对象</span></span><br><span class="line">      resolve(<span class="built_in">JSON</span>.parse(postData));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>然后需要使用这个 <code>getPostData</code> 函数</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理 post data</span></span><br><span class="line">getPostData(req).then(<span class="function">(<span class="params">postData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 把 postData 的数据放到 req.body 中</span></span><br><span class="line">    req.body = postData;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>然后需要处理各种路由，就需要把处理路由的全部代码放到处理 post data 之中</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理 post data</span></span><br><span class="line">getPostData(req).then(<span class="function">(<span class="params">postData</span>) =&gt;</span> &#123;</span><br><span class="line">    req.body = postData;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理 blog 路由</span></span><br><span class="line">    <span class="keyword">const</span> blogData = handleBlogRouter(req, res);</span><br><span class="line">    <span class="keyword">if</span> (blogData) &#123;</span><br><span class="line">        <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">        res.end(<span class="built_in">JSON</span>.stringify(blogData));</span><br><span class="line">        <span class="comment">// 最后需要返回</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理 user 路由</span></span><br><span class="line">    <span class="keyword">const</span> userData = handleUserRouter(req, res);</span><br><span class="line">    <span class="keyword">if</span> (userData) &#123;</span><br><span class="line">        <span class="comment">// 把 JSON 类型的数据先转换为字符串，再响应给前端</span></span><br><span class="line">        res.end(<span class="built_in">JSON</span>.stringify(userData));</span><br><span class="line">        <span class="comment">// 最后需要返回</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 未命中路由，返回 404</span></span><br><span class="line">    res.writeHead(<span class="number">404</span>, &#123; <span class="string">"Content-Type"</span>: <span class="string">"text/plain"</span> &#125;);</span><br><span class="line">    res.write(<span class="string">"404 Not Found\n"</span>);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>然后在 <code>controller/blog.js</code> 中写新建博客需要返回的数据</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newBlog = <span class="function">(<span class="params">blogData = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// blogData = &#123;&#125;  如果blogData没有值的话，默认为空</span></span><br><span class="line">  <span class="comment">// blogData 是一个博客对象，包含 title content 属性</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"newBlog blogData..."</span>, blogData);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    id: <span class="number">3</span>, <span class="comment">// 表示新建博客，插入到数据表里面的 id</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>记得把 newBlog 导出去</p></blockquote><blockquote><p>然后就可以在 <code>router/blog.js</code> 文件中返回数据给前端</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新建一篇博客</span></span><br><span class="line"><span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/blog/new"</span>) &#123;</span><br><span class="line">    <span class="comment">// 通过 app.js 文件中定义的 req.body 来获取到前端请求的数据</span></span><br><span class="line">    <span class="keyword">const</span> data = newBlog(req.body);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SuccessModel(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>然后可以通过 postman 发送 <code>http://127.0.0.1:3000/api/blog/new</code> 这个，选择 POST请求，然后在 Body 里面的 raw 中随便发送一个JSON格式的数据，类型格式选择 <code>JSON(application/json)</code></p></blockquote><p>返回结果如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"errno"</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>后台输出的 <code>blogData</code> 的结果为</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newBlog blogData... &#123; <span class="attr">title</span>: <span class="string">'测试标题123'</span>, <span class="attr">content</span>: <span class="string">'测试内容123'</span> &#125;</span><br></pre></td></tr></table></figure><blockquote><p>说明成功</p></blockquote><blockquote><p>新增删除博客路由，同理</p></blockquote><blockquote><p>先 <code>controller/blog.js</code> 文件中设置一个删除路由需要返回的数据</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> delBlog = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// id 就是要删除博客的 id</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>记得把 delBlog 导出去</p></blockquote><blockquote><p>然后由 <code>router.blog.js</code> 文件在路由中返回数据给 <code>app.js</code> ，进行数据处理，然后再返回给前端</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除一篇博客</span></span><br><span class="line"><span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/blog/del"</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = delBlog(id);</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SuccessModel();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ErrorModel(<span class="string">"删除博客失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>postman 请求 <code>http://127.0.0.1:3000/api/blog/del?id=1</code> 的结果如下：</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errno"</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>新增登录接口</p></blockquote><blockquote><p>在 <code>controller/user.js</code> 文件中添加如下代码</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loginCheck = <span class="function">(<span class="params">username, passsword</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (username == <span class="string">"zhangsan"</span> &amp;&amp; passsword == <span class="string">"123"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  loginCheck,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p><code>router/user.js</code> 文件内容如下：</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入数据文件</span></span><br><span class="line"><span class="keyword">const</span> &#123; loginCheck &#125; = <span class="built_in">require</span>(<span class="string">"../controller/user"</span>);</span><br><span class="line"><span class="comment">// 导入数据模型</span></span><br><span class="line"><span class="keyword">const</span> &#123; SuccessModel, ErrorModel &#125; = <span class="built_in">require</span>(<span class="string">"../model/resModel"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleUserRouter = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 登录</span></span><br><span class="line">  <span class="keyword">if</span> (req.method == <span class="string">"POST"</span> &amp;&amp; req.path == <span class="string">"/api/user/login"</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; username, password &#125; = req.body;</span><br><span class="line">    <span class="keyword">const</span> result = loginCheck(username, password);</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> SuccessModel();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> ErrorModel(<span class="string">"登录失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = handleUserRouter;</span><br></pre></td></tr></table></figure><blockquote><p>postman 访问 <code>http://127.0.0.1:3000/api/user/login</code> 结果如下</p></blockquote><blockquote><p>如果成功</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"errno"</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果失败</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"登录失败"</span>,</span><br><span class="line">    <span class="attr">"errno"</span>: <span class="number">-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="Nodejs博客系统" scheme="http://extheor.club/categories/Nodejs%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="Nodejs博客系统" scheme="http://extheor.club/tags/Nodejs%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>五十音图はま行</title>
    <link href="http://extheor.club/posts/2d6d3bd/index.html"/>
    <id>http://extheor.club/posts/2d6d3bd/index.html</id>
    <published>2020-09-30T15:30:45.000Z</published>
    <updated>2020-09-30T15:37:26.231Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图はま行"><a class="markdownIt-Anchor" href="#五十音图はま行"></a> 五十音图はま行</h1><h2 id="は"><a class="markdownIt-Anchor" href="#は"></a> は</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/は.png"><h2 id="ひ"><a class="markdownIt-Anchor" href="#ひ"></a> ひ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ひ.png"><h2 id="ふ"><a class="markdownIt-Anchor" href="#ふ"></a> ふ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ふ.png"><h2 id="へ"><a class="markdownIt-Anchor" href="#へ"></a> へ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/へ.png"><h2 id="ほ"><a class="markdownIt-Anchor" href="#ほ"></a> ほ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ほ.png"><h2 id="は行发音练习"><a class="markdownIt-Anchor" href="#は行发音练习"></a> は行发音练习</h2><p>はへひひへは</p><p>はほふふほは</p><p>はへひふへほはほ</p><p>はひふへほ</p><h2 id="は行例词"><a class="markdownIt-Anchor" href="#は行例词"></a> は行例词</h2><ul><li>はな（花）②【花】</li><li>はし（橋）②【桥】</li><li>ひたい（額）⓪【额头】</li><li>ほし（星）⓪【星星】</li><li>へた（下手）②【不擅长】</li><li>ふさい（夫妻）①②【夫妻】</li></ul><h2 id="ま"><a class="markdownIt-Anchor" href="#ま"></a> ま</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ま.png"><h2 id="み"><a class="markdownIt-Anchor" href="#み"></a> み</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/み.png"><h2 id="む"><a class="markdownIt-Anchor" href="#む"></a> む</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/む.png"><h2 id="め"><a class="markdownIt-Anchor" href="#め"></a> め</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/め.png"><h2 id="も"><a class="markdownIt-Anchor" href="#も"></a> も</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/も.png"><h2 id="ま行发音练习"><a class="markdownIt-Anchor" href="#ま行发音练习"></a> ま行发音练习</h2><p>まめみみめま</p><p>まもむむもま</p><p>まめみむめもまも</p><p>まみむめも</p><h2 id="ま行例词"><a class="markdownIt-Anchor" href="#ま行例词"></a> ま行例词</h2><ul><li>まち（町）②【街道】</li><li>あめ（雨）①【雨】</li><li>かいもの（買い物）⓪【购物】</li><li>かみ（髪）②【头发】</li><li>むすめ（娘）③【女儿】</li><li>むし（虫）⓪【虫子】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图たな行</title>
    <link href="http://extheor.club/posts/75ceb627/index.html"/>
    <id>http://extheor.club/posts/75ceb627/index.html</id>
    <published>2020-09-27T16:45:32.000Z</published>
    <updated>2020-09-27T16:48:20.251Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图たな行"><a class="markdownIt-Anchor" href="#五十音图たな行"></a> 五十音图たな行</h1><h2 id="た"><a class="markdownIt-Anchor" href="#た"></a> た</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/た.png"><h2 id="ち"><a class="markdownIt-Anchor" href="#ち"></a> ち</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ち.png"><h2 id="つ"><a class="markdownIt-Anchor" href="#つ"></a> つ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/つ.png"><h2 id="て"><a class="markdownIt-Anchor" href="#て"></a> て</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/て.png"><h2 id="と"><a class="markdownIt-Anchor" href="#と"></a> と</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/と.png"><h2 id="た行发音练习"><a class="markdownIt-Anchor" href="#た行发音练习"></a> た行发音练习</h2><p>たてちちてた</p><p>たとつつとた</p><p>たてちつてとたと</p><p>たちつてと</p><h2 id="た行例词"><a class="markdownIt-Anchor" href="#た行例词"></a> た行例词</h2><ul><li>つくえ（机）⓪【桌子】</li><li>たこ①【章鱼】</li><li>いと（糸）①【线】</li><li>て（手）①【手、手掌】</li><li>とかい（都会）⓪【城市】</li><li>あつい（暑い）②【热】</li></ul><h2 id="送气音和不送气音"><a class="markdownIt-Anchor" href="#送气音和不送气音"></a> 送气音和不送气音</h2><p>「か · た · ぱ」行根据位置的不同发音有两种。</p><ul><li>①词头 --&gt; 送气音（正常发音）<ul><li><strong>か</strong>お（顔）⓪【脸】</li><li><strong>た</strong>こ①【章鱼】</li></ul></li><li>词中或词尾 --&gt; 不送气音（变成不送气音）<ul><li>つくえ（机）⓪【桌子】</li><li>たつ①【站、立】</li></ul></li></ul><h2 id="な"><a class="markdownIt-Anchor" href="#な"></a> な</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/な.png"><h2 id="に"><a class="markdownIt-Anchor" href="#に"></a> に</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/に.png"><h2 id="ぬ"><a class="markdownIt-Anchor" href="#ぬ"></a> ぬ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ぬ.png"><h2 id="ね"><a class="markdownIt-Anchor" href="#ね"></a> ね</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/ね.png"><h2 id="の"><a class="markdownIt-Anchor" href="#の"></a> の</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/の.png"><h2 id="な行发音练习"><a class="markdownIt-Anchor" href="#な行发音练习"></a> な行发音练习</h2><p>なねににねな</p><p>なのぬぬのな</p><p>なねにぬねのなの</p><p>なにぬねの</p><h2 id="な行例词"><a class="markdownIt-Anchor" href="#な行例词"></a> な行例词</h2><ul><li><p>いぬ（犬）②【狗】</p></li><li><p>ねこ（猫）①【猫】</p></li><li><p>にく（肉）②【肉】</p></li><li><p>のき（軒）⓪【屋檐】</p></li><li><p>なつ（夏）②【夏天】</p></li><li><p>あに（兄）①【哥哥】</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图かき行</title>
    <link href="http://extheor.club/posts/dbba997d/index.html"/>
    <id>http://extheor.club/posts/dbba997d/index.html</id>
    <published>2020-09-26T17:13:36.000Z</published>
    <updated>2020-09-26T17:14:44.466Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图かき行"><a class="markdownIt-Anchor" href="#五十音图かき行"></a> 五十音图かき行</h1><h2 id="か"><a class="markdownIt-Anchor" href="#か"></a> か</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/か.png"><h2 id="き"><a class="markdownIt-Anchor" href="#き"></a> き</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/き.png"><h2 id="く"><a class="markdownIt-Anchor" href="#く"></a> く</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/く.png"><h2 id="け"><a class="markdownIt-Anchor" href="#け"></a> け</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/け.png"><h2 id="こ"><a class="markdownIt-Anchor" href="#こ"></a> こ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/こ.png"><h2 id="か行发音练习"><a class="markdownIt-Anchor" href="#か行发音练习"></a> か行发音练习</h2><p>かけききけか</p><p>かこくくこか</p><p>かけきくけこかこ</p><p>かきくけこ</p><h2 id="か行例词"><a class="markdownIt-Anchor" href="#か行例词"></a> か行例词</h2><ul><li>いか（烏賊）⓪【鱿鱼】</li><li>えき（駅）①【车站】</li><li>いけ（池）②【池塘】</li><li>かく（書く）①【书写】</li><li>かお（顔）⓪【脸】</li><li>あき（秋）①【秋天】</li></ul><h2 id="さ"><a class="markdownIt-Anchor" href="#さ"></a> さ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/さ.png"><h2 id="し"><a class="markdownIt-Anchor" href="#し"></a> し</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/し.png"><h2 id="す"><a class="markdownIt-Anchor" href="#す"></a> す</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/す.png"><h2 id="せ"><a class="markdownIt-Anchor" href="#せ"></a> せ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/せ.png"><h2 id="そ"><a class="markdownIt-Anchor" href="#そ"></a> そ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/そ.png"><h2 id="さ行发音练习"><a class="markdownIt-Anchor" href="#さ行发音练习"></a> さ行发音练习</h2><p>させししせさ</p><p>さそす　すそさ</p><p>させしすせそさそ</p><p>さしっすせそ</p><h2 id="さ行例词"><a class="markdownIt-Anchor" href="#さ行例词"></a> さ行例词</h2><ul><li>すし（寿司）①②【寿司】</li><li>いす（椅子）⓪【椅子】</li><li>さけ（酒）⓪【酒】</li><li>おかし（お菓子）②【点心】</li><li>せかい（世界）①【世界】</li><li>あさ（朝）①【早上】</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图あ行</title>
    <link href="http://extheor.club/posts/ab176793/index.html"/>
    <id>http://extheor.club/posts/ab176793/index.html</id>
    <published>2020-09-25T14:50:23.000Z</published>
    <updated>2020-09-26T16:12:19.997Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图あ行"><a class="markdownIt-Anchor" href="#五十音图あ行"></a> 五十音图あ行</h1><h2 id="あ"><a class="markdownIt-Anchor" href="#あ"></a> あ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/あ.png"><h2 id="い"><a class="markdownIt-Anchor" href="#い"></a> い</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/い.png"><h2 id="う"><a class="markdownIt-Anchor" href="#う"></a> う</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/う.png"><h2 id="え"><a class="markdownIt-Anchor" href="#え"></a> え</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/え.png"><h2 id="お"><a class="markdownIt-Anchor" href="#お"></a> お</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/お.png"><h2 id="あ行发音练习"><a class="markdownIt-Anchor" href="#あ行发音练习"></a> あ行发音练习</h2><p>あえいいえあ</p><p>あおううおあ</p><p>あえいうえおあお</p><p>あいうえお</p><h2 id="あ行例词"><a class="markdownIt-Anchor" href="#あ行例词"></a> あ行例词</h2><ul><li><p>あい（愛）①【爱】</p></li><li><p>え（絵）①【画】</p></li><li><p>あおい（青い）②【蓝色】</p></li><li><p>うお（魚）⓪【鱼】</p></li></ul><h2 id="口语的声调"><a class="markdownIt-Anchor" href="#口语的声调"></a> 口语的声调</h2><ul><li><p>高低型</p><p>音节（假名）之间高低起伏</p><ul><li><p>あめ（前低后高）【糖果】</p></li><li><p>あめ（前高后低）【雨】</p></li></ul></li><li><p>表记方法</p><ul><li><p>数字表记法</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/数字表记法.png"><p>声调核：最后一个高度音节</p><p>例如：⓪的话就是没有最后一个高读音节，一直高，①的话就是一个高读音节（从前往后）</p></li><li><p>横线表记法</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/横线表记法.png"><p>横线：高音</p><p>竖线：下降</p></li></ul></li><li><p>四大类型</p><ul><li><p>平板型⓪</p><ul><li>一低二高一直高，助词也高</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/平板型.png"></li><li><p>头高型①</p><ul><li>一高二低一直低，助词也低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/头高型.png"></li><li><p>中高型②③…</p><ul><li>两头低中间高，助词低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/中高型②.png"><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/中高型③.png"></li><li><p>尾高型⑤…</p><ul><li>一低二高一直高，助词低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/尾高型.png"></li></ul></li></ul><h2 id="两个规则"><a class="markdownIt-Anchor" href="#两个规则"></a> 两个规则</h2><ul><li>单词的第一个音节和第二个音节的高低相反。<ul><li>第一个音节高，则第二个音节低；</li><li>反之，第一个音节低，则第二个音节高。</li></ul></li><li>一个单词的声调中，或没有下降，或只有一处下降。<ul><li>即下降了就不能在升起来了。</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>了解日本与日语的初步认识</title>
    <link href="http://extheor.club/posts/7bbd3149/index.html"/>
    <id>http://extheor.club/posts/7bbd3149/index.html</id>
    <published>2020-09-25T14:43:45.000Z</published>
    <updated>2020-09-25T14:44:35.007Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="了解日本与日语的初步认识"><a class="markdownIt-Anchor" href="#了解日本与日语的初步认识"></a> 了解日本与日语的初步认识</h1><h2 id="日本文字的构成"><a class="markdownIt-Anchor" href="#日本文字的构成"></a> 日本文字的构成</h2><p>私は昨日SONYのカメラを買いました。</p><p>(我昨天买了一步索尼的相机。)</p><ul><li>日本文字<ul><li>汉字</li><li>假名<ul><li>平假名</li><li>片假名</li></ul></li><li>罗马字</li></ul></li></ul><h2 id="平假名和片假名"><a class="markdownIt-Anchor" href="#平假名和片假名"></a> 平假名和片假名</h2><ul><li>平假名<ul><li>あいうえお</li></ul></li><li>片假名<ul><li>アイウエオ</li></ul></li></ul><blockquote><p>平假名和片假名之间一一对应，意义相同。</p></blockquote><h2 id="片假名的用途"><a class="markdownIt-Anchor" href="#片假名的用途"></a> 片假名的用途</h2><ul><li>外来语<ul><li>コーヒー（咖啡）</li><li>パンダ（熊猫）</li></ul></li><li>拟声拟态词<ul><li>ニャーニャー（猫叫声）</li><li>ザーザー（雨声）</li></ul></li><li>动植物名称<ul><li>ヒマワリ（向日葵）</li><li>ネコ（猫）</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="http://extheor.club/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="http://extheor.club/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>标签外挂</title>
    <link href="http://extheor.club/posts/54667693/index.html"/>
    <id>http://extheor.club/posts/54667693/index.html</id>
    <published>2020-09-18T15:24:25.000Z</published>
    <updated>2020-09-18T15:41:56.029Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="notebootstrap-callout"><a class="markdownIt-Anchor" href="#notebootstrap-callout"></a> Note(Bootstrap Callout)</h1><h1 id="标签外挂"><a class="markdownIt-Anchor" href="#标签外挂"></a> 标签外挂</h1><h2 id="notebootstrap-callout-2"><a class="markdownIt-Anchor" href="#notebootstrap-callout-2"></a> Note(Bootstrap Callout)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note default %&#125;</span><br><span class="line">default 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success %&#125;</span><br><span class="line">success 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info %&#125;</span><br><span class="line">info 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning %&#125;</span><br><span class="line">warning 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger %&#125;</span><br><span class="line">danger 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note default">            <p>default 提示块标籤</p>          </div><div class="note primary no-icon">            <p>primary 提示块标籤</p>          </div><div class="note success">            <p>success 提示块标籤</p>          </div><div class="note info">            <p>info 提示块标籤</p>          </div><div class="note warning">            <p>warning 提示块标籤</p>          </div><div class="note danger">            <p>danger 提示块标籤</p>          </div><h2 id="gallery相册图库"><a class="markdownIt-Anchor" href="#gallery相册图库"></a> Gallery相册图库</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gallery-group-main"</span>&gt;</span></span><br><span class="line">&#123;% galleryGroup '壁纸' '收藏的一些壁纸' '/Gallery/wallpaper' https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup '漫威' '关于漫威的图片' '/Gallery/marvel' https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup 'OH MY GIRL' '关于OH MY GIRL的图片' '/Gallery/ohmygirl' https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png'>  <figcaption>  <div class="gallery-group-name">壁纸</div>  <p>收藏的一些壁纸</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg'>  <figcaption>  <div class="gallery-group-name">漫威</div>  <p>关于漫威的图片</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg'>  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>关于OH MY GIRL的图片</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><h2 id="gallery相册"><a class="markdownIt-Anchor" href="#gallery相册"></a> Gallery相册</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><div class="justified-gallery"><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt="" /></p>          </div><h2 id="tag-hide"><a class="markdownIt-Anchor" href="#tag-hide"></a> tag-hide</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">门里站着一个人? &#123;% hideInline 闪 %&#125;</span><br></pre></td></tr></table></figure><p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">因为西装裤(C装酷)</span></span></p><p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click  </button><span class="hide-content">闪</span></span></p>]]></content>
    
    <summary type="html">
    
      标签外挂
    
    </summary>
    
    
      <category term="Hexo" scheme="http://extheor.club/categories/Hexo/"/>
    
      <category term="标签外挂" scheme="http://extheor.club/categories/Hexo/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/"/>
    
    
      <category term="Hexo" scheme="http://extheor.club/tags/Hexo/"/>
    
      <category term="标签外挂" scheme="http://extheor.club/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/"/>
    
  </entry>
  
  <entry>
    <title>京东抽奖项目开发笔记</title>
    <link href="http://extheor.club/posts/21abcf1a/index.html"/>
    <id>http://extheor.club/posts/21abcf1a/index.html</id>
    <published>2020-09-17T15:45:25.000Z</published>
    <updated>2020-09-17T23:57:30.525Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东抽奖项目开发笔记"><a class="markdownIt-Anchor" href="#京东抽奖项目开发笔记"></a> 京东抽奖项目开发笔记</h1><h2 id="文章目录"><a class="markdownIt-Anchor" href="#文章目录"></a> 文章目录</h2><p><a href="#1.%E6%B3%A8%E5%86%8C%E9%A1%B5">1.注册页</a></p><p><a href="#2.%E7%99%BB%E5%BD%95%E9%A1%B5">2.登录页</a></p><p><a href="#3.%E6%B7%BB%E5%8A%A0%E5%A4%B4%E9%83%A8tab">3.添加头部tab</a></p><p><a href="#4.%E5%AE%8C%E5%96%84%E6%B3%A8%E5%86%8C%E9%A1%B5%E7%9A%84ajax%E8%AF%B7%E6%B1%82">4.完善注册页的ajax请求</a></p><p><a href="#5.%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E9%A1%B5%E7%9A%84ajax%E8%AF%B7%E6%B1%82">5.完善登录页的ajax请求</a></p><p><a href="#6.%E6%8A%BD%E5%A5%96%E9%A1%B5--%E9%A6%96%E9%A1%B5">6.抽奖页–首页</a></p><p><a href="#7.%E5%AE%8C%E6%88%90%E6%B3%A8%E5%86%8C%E9%AA%8C%E8%AF%81%E7%A0%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%A5%E5%85%A5">7.完成注册验证码接口的接入</a></p><p><a href="#8.%E5%AE%8C%E6%88%90%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E7%A0%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%A5%E5%85%A5">8.完成登录验证码接口的接入</a></p><p><a href="#9.%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E8%B7%AF%E7%94%B1%E4%B8%8D%E5%88%B7%E6%96%B0">9.页面跳转路由不刷新</a></p><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言：</h2><p>这是一个独立项目，这个项目会由我们四个人来一起完成，所以首先就要分工合作，我是写前端的，所以我会先把基本的页面写出来</p><h2 id="a-id1注册页1注册页a"><a class="markdownIt-Anchor" href="#a-id1注册页1注册页a"></a> <a id="1.注册页">1.注册页</a></h2><p>这是注册页的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/login.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"codeForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">name</span>=<span class="string">"phone"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"code"</span> <span class="attr">name</span>=<span class="string">"code"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>验证码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"getCode"</span>&gt;</span>点击获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          下一步</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/modal_dialog.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/tccj.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户提交表单</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 判断手机号格式是否正确</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 提示错误信息</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="comment">/* background: linear-gradient(#141e30, #243b55); */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">      <span class="number">60deg</span>,</span><br><span class="line">      rgba(<span class="number">255</span>, <span class="number">165</span>, <span class="number">150</span>, <span class="number">0.5</span>) <span class="number">5%</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">228</span>, <span class="number">255</span>, <span class="number">0.35</span>)</span><br><span class="line">    ),</span><br><span class="line">    <span class="built_in">url</span>(https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%<span class="number">9</span>B%BE%E7%<span class="number">89%</span><span class="number">87</span>/坚持.jpg);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginBox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">470px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">15px</span> <span class="number">25px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginWay</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">36%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cc9644</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span> &gt; <span class="selector-class">.line1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.line1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">157</span>, <span class="number">131</span>, <span class="number">82</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">31%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cc9644</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span> &gt; <span class="selector-class">.line2</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.line2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">157</span>, <span class="number">131</span>, <span class="number">82</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pwdForm</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &gt; <span class="selector-class">.getCode</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &gt; <span class="selector-class">.getCode</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: aqua;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">#03e9f4</span>,</span><br><span class="line">    <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> <span class="number">0</span> <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line1 <span class="number">1s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">370px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line1 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line2 <span class="number">1s</span> <span class="number">0.25s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line2 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(right, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line3 <span class="number">1s</span> <span class="number">0.5s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line3 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line4 <span class="number">1s</span> <span class="number">0.75s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line4 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码是写的注册页的基本页面，CSS部分写的比较多，所以在写页面上花了很大一部分时间，js中还判断了手机号的格式是否正确，如果不正确会提示“手机号格式有误”（这个错误提示我用了插件，我会在下面给出相应的代码），如果输入的手机号正确，那么会进行Ajax请求（前端向后端发送用户所输入的数据，比如说：手机号和验证码），验证码的话是通过第三方API来获取的，这当然也必须是用Ajax发送请求，来获取验证码，这时就可以发送给后端了，后端会接收到数据，然后把该注册信息插入到数据库中进行存储，为以后的登录操作打下了良好的基础</p><ul><li><p>jQuery弹窗库</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装模态框_提示框</span></span><br><span class="line"><span class="comment">// 提示框</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图标 base64 码  全局变量</span></span><br><span class="line"><span class="comment">// 默认图标</span></span><br><span class="line"><span class="keyword">var</span> info_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADlUlEQVRYR82XS4hbdRjFz7l3ZsARamzryCQ31lft5A64qErFhYKK9bFwxmJRu/CxKbjzAXYmdyS0yYwu1J3oqt2otNQ+wEKxogiC+GgX0t44vlDnTqJW7LRoK53ce+SmTUw6j/wTRmq295zz/e6Xf/75PuIif9hOfTenHvWU76fC2wBeQahfYkjguMCyLH7Wu6L/wOHNnDXNNQJYs+2Xa7pYeV7UJoKXLR6uExDfka3X/JH0d61AFgUYmChfbYXhVgCbSFitwhqfCwghvC1YY0Uv+dNC3gUB3G3BnaTeBZlop/AcrTQjcYM/5nw4X868AO54sBkRXm/3rRcClRDBwtP+qPPmhZo5AG4huAvC+0tVvFYwhpC4vjiW+qARognAfal0FcLwq9YHrbMvRdBJ2PaN/pbkz7WEZoBCsJPARtN4AZ9SuA5En7FH2Ol7ziNzADKF6bUWdNg4CJjws84odsl2v51+mcBzpt6KrFsmveSXsb7eATc/tYfkcCcha/Klm7sYfWHqlbTX99IP1QGcV6cuWXYaMyR7jEOAV/zVqRewkaFbCMYJjJh7dQazTsLP8Wy1A5nx0pClaK9pQMPJ/h3E9wTWte/lkO+l9lcB3HxQIDFqGiLhDVC/1vXCOpL3mvpjnYCCn3W8KsBgPtgB4nGjAGnmmJe+vFHrbi0P0g6PGvnPiwTs8LPOk7UOHCJxt1GAcJrsvvZo9sp6B24YLw10Kyoa+f8FOORnnXvOdaAwdRDgetOA+EL527501Q9blp+MPR0BSAd9L33fuQ4Ugu0EnjAFiHWViAOTY6nJzgGw3fecpzo6hEsC0HgIM/nSsMVoj3EHhPdU6XnUz/X9We1ArrSyqzv8mKBrmhHRGi6OJvdVO5DMlXoTXeEJo4tonl9BtahEtxDEl9myVhCSzp7qRSJ4Nn2m8SreR/LBVmYAfx2bTSWQY6VJu0v24DfTp0D0tsqQtN/30kOxrg7Qzn0uyAdwvKmQsJLkYKvi8fMIvKmYTR1pAjh/Ie0GscEkpFONgN1+1nm45m+aBzL50ioiPEJyeacFFvNJ+kOw1zYOqXNGsky+dDsRffRfjGSAdYfvJT9phPz/DaU1uos6ltcg6osJ8RgBu51zUVtMItt+8euR/h8X8hqtZu7E1PUM+YzJahb/UVF8a0lWswupq8tpV/kBC+GtIvuqyykQUfytupyCn7PSfyAetUy7ZdQB07BOdP8AHHSWMKZhltwAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 成功图标</span></span><br><span class="line"><span class="keyword">var</span> success_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADd0lEQVRYR82X328UVRzFz5ntRgj4K+rOLtEAUV80MUENINhfs/iAxl+J8UFejCaW3emDiS/6D/gs4k4J8cXgiwkmICH60J2xpSj6IjEaY4yx+GumLdCAUdN2d46Zku3+mmV3yxact5m595zPnPu9c+8lbvDFG+yPzgG8l9dltHEQ0JOCtgM0KWwStQRwhtKfAr4SjE9nbl08hUcPL3XycR0BpLz8vkTIAyDu6EQUwO9CuD+wxk62a39VgDsnX8skl5IfgHiinVDce0Ef/ZtU7lL/2Hyr/i0B0m7uKYJHAN6+GvNKH0F+mXhxbtiZitOJBTCL+acN8pNrMa7tKyEMyYFZ673TjZpNAJmivVnUdwQ39gog0pEw87fw4F97ChdqdZsA0q59hsCOXpqvDId0Isg6z7QEWK528cO1MK/WRDgUWGMTlftqAgIzXv4cwHt6ASDhsoA3SLxJ4N6qps76lrOtCSDlju5OQLGV2i1QZF42NDg37JzNePkRiIdqNcoy7pvNHvw5eraSQMa13wbwVrdmje1rzc2J0a1GOZxoTDWkXp8Zdg7UAxTzp0HuuhaAWvO7JkbuT5QSUyRTTZrSMT/rPF8HkC7a0yQ2rx5A8yXCimJPj488QPZNtvp1S/g6yBaWZ9qVIRCY9uxFAn2rA9C8wP7AKnyfGs89lDCMqMpva6kl/eFnnbsbAPILBJNxnSQdFXmK0DsEG/4dVfOMm3tEMlwSt1z1Q5oAAKTd/C8Et8R1LFHbomij/4QhHKlCVM1NL7eToTFOYkO7FKNlO7AKOxuLcBJkf2wCkL+YwI6Lg85vpmu/Quh9AhcEDkWxm66dNYATANa3M78y4vg4sAovdDUNBU2X+kq7zg8c9k0v/2pZmjpvjf2YLub2gjzeavjigGKnYepz+7FEiC/ajN1PSiZ2BwMH56J2pms/S+Bot8UrlrcGw4em6xKIZkLGs38FsFydrS5JP/yzfuHxDQs3bVfIkySMTmJfaSN942edhyv3dRXd6WIk4RyoTd3EXgXAoJ8tTMYCRA/XcjkGdNy3nOdqE2veD3j7t0DGtwRv7iraNo073pBUissAjvUKQEApNDAwO1T4slHzumxKEWJfsMfx4j7o/7str6U13dGXDOnd634wqYuscjRTuFeMNq0xRzPyjMTPen4061Uxdl0Da2lc0f4PeKyXMJXpyrIAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 警告图标</span></span><br><span class="line"><span class="keyword">var</span> warning_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC8ElEQVRYR8WXTUhUURTHf0fToEWQfbmoKKjIRSotCiwoiDCqTWCCRkGl84aEllmLQgqkWpbVvBlxIRUxfay0j00fEGSr1CIi0igMhCRpE0k5J+4bJsdxPu4bhzzb9///z/+de++55wo+Qq+xiGLqUdYDS4DlCDGUb8AYwgcmicpxxm1lJRdQoxTznQaEQ8BOoDgrR/mD8AQlIkHu5tLPaEDbKKKcJoQzwIpcQhm+v0IISoD+TPy0BtRlAcp9hNo8EyfTFDglDpfSac0woFcpZx6PgcoCJJ+SULop46jUM5msO82AupQAfcAmy+RfgBGgxhJ/TxzqshnoAFqsxIRjEqDLYDXEaYR2Kx6cF4ezCey/CqjLXqDHSkQZlyBlCaxeZiHz+WHFNSBhtwS8ZcYz4JVeGUJYaSkyJA5rp+00F7PZ7EIZkCDVyQZOAhft2B5qdgbimRskwO14BUJ8Qlj9Xw0oLyVIjWiECmK885G8MBXAW7Jloi5+y18oA8ZCkzFgjtKROaiASemKhnhojsWcGFB6jIF+hKo5MvDaLMFAHn1/9scw/seDpgK9CHt8VmBEnKmmpVFKGWfCp4bZhI9MBVwg4JtcRJU0M+j1kTD7vevbf3QZA01AxDdX+YrQiVKJePdIqW8NaBXtYDEl3kyXczzLI0F2Sow1iVb8AmGrrwTKBEIUGEZpRFjniw/vxaEibuA6Bynihg+BX8BmcXjj8ePX8UdgqQ+NVjOmJc8DZkNttBS4Iw71yVh1uQk0WvGVYYQN4vB7ykCYWnMsrATguTjsSDHwDNhuyd8nDr0GmzoTngNvDM8diiNBwt4SuDhAKDfJgLkiQU4ksDOnYj+lBDOUmlhlmbyPMrYlT8bpDJjxrBPhsJWoLUh5yyS7pIXRZErml1F8TrhQkP6gPEA4IA4/U/1mbT4aphr11naL7Y+m4D6jtOMQEUk/tFp1Pw1Rh9Bs/TiFp0A3o9ySNmLZzFsZSAikeZ6bJ7qJsXyf538B0n8BZanHYR0AAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 错误图标</span></span><br><span class="line"><span class="keyword">var</span> error_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADd0lEQVRYR9WXS4gcVRSG/79qEnGjk3vLhc+4FBVd6CJIpqsmEXyShUpcZCGO+AqIqOALUdSFgqAJGEUxKIgujAoSHyQg0z2jC4UEYkCEREQiI2jd7owmIdpT9Uu16Xl0V1f1tNMEa9X0veec75zz31O3iNP88DTHx/8PoDE+emWS+jeSWivxPJIegF8F/YwEe4Np9+1yqtpXBQR4jSi4W9DjAC8uCiBphuTLBvF2VjFXBlMKkGWcyn8P4GVlzhavSzjkecmdZrLxdZFdIYCLzO2S9zaJM5cTfH6v1CTwoKm513vZ9wSIK/YWevxooMAdRoSeMFX3Yp6vXIA4spdA3D9w5nmRlG62tfquzqVcABcGB0BcsRLZL/iQM6vdWu7F8cV+uwBcxUzA83Z2BRd2kfgyBbYTOCM3SeF3j3pY4L0A1nf7SJ+xtfpzxQA9smeKLWYqfv9oxW5IiC9Arl4SQGqIuCaouh9cGDwL4ulOgOyIBjV3fk+A42PBuSd9zOSWXjriay4cnZr9yUXmeoC7AY609koNKg3NVOOgi8w6iHtAnpXnx0+aV41Oz+5vry1pgYvMXYD3Vq/eS/htlf5ef/bUH4calWBT6uljAMeYpmNZ8Hq4ZiyFv6dIvJKeDGruhR4A9nmATxWLTw6JKna6/r2rmM2+ksNZRvG43Qjxs176WJgNeNPW4kwjrWdpBUK7E+REufp1lEkamunGd9neerjmBsH7BOSqUlvhc1uLb/pPAAKOjSTNsN3LhXbQLwOQtDuouU0Dt0DCCXjaEEy6b9y4uVXgL63fkbkN4gcgS94v6Ru2Wr9vUBGe8JhcZ6qNr9onQeDJdjXqUbBF0rtFECUiNBcA3pHcIQP85SG5dj64mPX81CzQ7PxJKIHwiatHJ+N9uRXI/nSRPQjw8k4ISluzt1o/gygO7Q6SW3MSiW01PqdwEtZDe7/I17qN9SHBbBRvKxrFPvRIQtxBcGN3EnjU1OKXCgEUYaQu+yPIi8oUvZx1AYftn/Gl3IdmIcC/bWiN2k+B8mPVF4TU9NO5dYtHcE8NtBfiyGZlfKevACWbBD0QVN2reduGfiUT8VBQdTt6MQ73UspkIju2RQUqBciMT13L7xH0WJ/X8lcM4m0rci3vpG99mMi/mdCFrQ+TTKjEzFA/TFZCiANrYJjBM999aWCYEP8A7TSkMOyQWnEAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 关闭图标</span></span><br><span class="line"><span class="keyword">var</span> close_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFElEQVRYR+2WTWsTQRjH/08mLxepKIoHQcRLBRX0IPhCay2ih/opQpYJCeSQjxLIy7Ahn8KTivZVhB4aqEJ70V5FUSwlkmSHRyZYWJZtd3YDWQ/d487M8//Nf5555iGk/FHK+jgD+H8dcF33wWg0+lStVo+myZNms3kun8/fdhznY1icUAeUUs8BvALQ9zxvOSmEEc9ms+8A3AXwUkr5OghxEsB5Zn5PRPcAbA+Hw2e1Wu0wjhONRmOuUCi8BXCfmXeI6KmU8rcVgJmklPJD9LXWy5VK5ZcNRKvVuiCEmOz8NHET69QkNBAANgDcAfBZa70QBaGUugRgFcCtKPFIADOh2+1e1FqbgBMIAEtSyh9hThhxZt4konkAuwAWwmz3r7W6hn4IZt4XQjxxHOebP5Drule01mvH4kKIpVKp9DPqyKwAgk4w8xchxKNjiHa7fZWI1onohtm5rbjVEfh38M+JLQA3DQQzL5rxTCbzAcC1uOKxAcyCXq93eTwerxsIAF8BiKTiiQBCIMyvWLbHTsJgIgVcMMN7uVxusVgsfo9KOutCdFIgvzgzH0xsJLpuIIQQj20yP7EDqSZhoBbM9hqmWohSLcVB8Zk+RgHx2T7HgWd4moZkLaoniGrJtj3Pe5G0JfN1RaYxWSmXy2+sC1Gn03k4GAz69Xr9T9zq5p+fqCmdRjDuWut+IG5g2/lnAKk78Bd192wwo+7w4AAAAABJRU5ErkJggg=='</span>;</span><br><span class="line"><span class="comment">// 问号按钮</span></span><br><span class="line"><span class="keyword">var</span> question_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADlUlEQVRYR72XXWhUVxDHf7MJpYlCjdWkUloLVWmgvhSCUigUffADioqyIuapJd5NUwQxxra2Nf1AaQWp4EfWbygWTH0RQhUUNWqhhbRNihhEUjWCDZiEpCGka7I75dw9m+xudu+9m9Se1/Of//zPnDlzZoSAS/dTQimrgI3AQoTnUSqABEIf0AvcRjjHP/woW4kFoRY/kJ5kLqPsQdmMUOKHt/vDKN8xxifygSsu78orQBsp5gW2I3wKzAjoOBs2BHzOXxyQRsZyceQUoIcpo4gW4M0pOs40U34lzjqp42E23yQBGuVVlMsIr/wnzidIBhHWyBZa03kzBGiUOSjtCC/6Olc6EAZcnLq5sThAjvRTzGJ5j0cp/nEBbpbP4CbwRl7nygjCV4RokRr+SMdpM88wQDXKfuA5jwP8BiwVh1GDmRAQ5WugwcN5H0UsSzl2k3QelShxhLspQj3OAuL8Asz24PpYIuwdF6BHKCfEA+BZD+XLxOGqG/EjhAkRBWZZ/CBQLw7H3f0mViJc8BDwN8LL4jDoRkCjNAGOh0GbRKiy2NeAW0DRJLyyViKct7iffF7RPnFoEPfu+hnwSaDPxOFLe7ofEDbkEdsqDm9bAd8AOzwi2k8Z5aJHWYFy0SfrT6J8j9AB7lWV5sQrPRJhnhWwG2j05BVWi0Y5CNT5PrsgAOWKRFhuI2UEb/I0U06INnEVSYZtmmuIEEukhk49xEyK6fEt4co1E4FOwCTWdNZjEqyQWn63pz+LEPYlVO4aAaaaeRUOP55uwDzRLut8H0K9n5G7r4yYKxhCmBnIYDKonzhV8j5/2sQzVXBbYC4lZiJwB1gU2CgdmKBaajlT8MknOLqmk4TDlDFbwjzRo7yLcmIKh2g1ETgM1BZsnPnkriO8VTAHnDIR8K7b+ViVMxKh2oa/G+GlggUIG4KW4lzc7ZCs+ygNAXqBbI4nDDMr9RmZn21LwSeYjoHSLBE2JgUco4IE932+42x39wBTA0wEKhHKA+tRYsRZaHrE9IbENAgfBiaBXeKwx+aAf91PJ1a+kAjms0rriIK0ZJnqpiogd0tmK9kcoA2Y7xsJ5QrCDXsF6xFe97WB/E1pytjt6ca49FTa8hDvSI0VbR3+X4PJz8QJBxpMxiOR7Hp3Ah/5/uv5Y58czcr4VsLEc8Ge3nAKpxll95SH02y14+O5aTSURe54DiZpzepF3Sk4OZ7HuBB0PP8X+s83WFbJv84AAAAASUVORK5CYII='</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$modal</span>(<span class="params">data</span>) </span>&#123; <span class="comment">// data 必传 且为对象</span></span><br><span class="line">    <span class="comment">// 赋值默认参数</span></span><br><span class="line">    <span class="keyword">if</span> (data === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 弹框类型不传默认为 alert</span></span><br><span class="line">    <span class="keyword">if</span> (data.type === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.type = <span class="string">'alert'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tipIconImg = <span class="string">''</span>; <span class="comment">//提示显示小图标</span></span><br><span class="line">    <span class="comment">// 提示类型 默认不传为  info</span></span><br><span class="line">    <span class="keyword">if</span> (data.icon === <span class="string">'success'</span>) &#123;</span><br><span class="line">        tipIconImg = success_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'warning'</span>) &#123;</span><br><span class="line">        tipIconImg = warning_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'error'</span>) &#123;</span><br><span class="line">        tipIconImg = error_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'question'</span>) &#123;</span><br><span class="line">        tipIconImg = question_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tipIconImg = info_modal</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 弹框显示时长   confirm 下无效 </span></span><br><span class="line">    <span class="keyword">if</span> (data.timeout === <span class="literal">undefined</span> &amp;&amp; data.type != <span class="string">'confirm'</span>) &#123;</span><br><span class="line">        data.timeout = <span class="number">2000</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 最短显示时间为500</span></span><br><span class="line">        data.timeout &lt; <span class="number">500</span> ? data.timeout = <span class="number">500</span> : data.timeout = data.timeout;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 过渡动画</span></span><br><span class="line">    <span class="keyword">if</span> (data.transition === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.transition = <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遮罩层参数</span></span><br><span class="line">    <span class="keyword">if</span> (data.mask === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.mask</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 最小宽度</span></span><br><span class="line">    <span class="keyword">if</span> (data.width === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.width = <span class="number">300</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁止页面滚动</span></span><br><span class="line">    <span class="keyword">if</span> (data.pageScroll === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.pageScroll = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提示框标题</span></span><br><span class="line">    <span class="keyword">if</span> (data.title === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.title = <span class="string">'提示'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遮罩层关闭</span></span><br><span class="line">    <span class="keyword">if</span> (data.maskClose === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.maskClose = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 取消按钮文字</span></span><br><span class="line">    <span class="keyword">if</span> (data.cancelText === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.cancelText = <span class="string">'取消'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确认按钮文字</span></span><br><span class="line">    <span class="keyword">if</span> (data.confirmText === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.confirmText = <span class="string">"确认"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 距离顶部距离</span></span><br><span class="line">    <span class="keyword">if</span> (data.top === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.top = <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否绝对剧中</span></span><br><span class="line">    <span class="keyword">if</span> (data.center === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.center = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 公共计算当前元剧中top 值</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">calculate</span>(<span class="params">e, sun</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (data.center) &#123;</span><br><span class="line">            <span class="keyword">var</span> tipHeight = e.height() + sun;</span><br><span class="line">            <span class="built_in">console</span>.log(tipHeight)</span><br><span class="line">            <span class="keyword">var</span> windowHeight = $(<span class="built_in">window</span>).height();</span><br><span class="line">            <span class="built_in">console</span>.log((windowHeight / <span class="number">2</span>) - (tipHeight / <span class="number">2</span>))</span><br><span class="line">            data.top = (windowHeight / <span class="number">2</span>) - (tipHeight / <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  生成相对唯一id  保证弹框绑定id唯一  保证事件绑定不重复  （此处用于保证弹框内层 继续 弹框  不出现事件绑定重复）</span></span><br><span class="line">    <span class="keyword">var</span> idText = <span class="string">"modailItem"</span>;</span><br><span class="line">    <span class="keyword">var</span> date = (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() * <span class="built_in">Math</span>.random() + <span class="string">''</span>).substr(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    idText += date;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> titleSize = <span class="number">16</span>; <span class="comment">//标题文字大小</span></span><br><span class="line">    <span class="keyword">var</span> fontSize = <span class="number">14</span>; <span class="comment">//字体大小</span></span><br><span class="line">    <span class="comment">// 创建最外层元素 </span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">'#modail-dialog-box'</span>).index() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> modelBox = <span class="string">'&lt;div id="modail-dialog-box"&gt;&lt;/div&gt;'</span></span><br><span class="line">        $(<span class="string">'body'</span>).append(modelBox)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).css(&#123;</span><br><span class="line">            fontFamily: <span class="string">'微软雅黑'</span>,</span><br><span class="line">            fontSize: fontSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#666666'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成 message 提示</span></span><br><span class="line">    <span class="keyword">if</span> (data.type === <span class="string">'message'</span>) &#123;</span><br><span class="line">        $(<span class="string">'#modail_message_box'</span>).html(<span class="string">''</span>);</span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="modail_message_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置message提示框长度</span></span><br><span class="line">        <span class="keyword">var</span> width_s = <span class="number">40</span> + (fontSize * data.content.length) + fontSize + <span class="number">4</span>;</span><br><span class="line">        <span class="comment">// 不需要遮罩层</span></span><br><span class="line">        $(<span class="string">'#modail_message_box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示内容</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            width_s += fontSize + <span class="number">4</span>;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置外层框样式</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).css(&#123;</span><br><span class="line">            width: width_s + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'10px 15px'</span>,</span><br><span class="line">            background: <span class="string">'#fff'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            left: <span class="string">'0'</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            right: <span class="string">'0'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字内容框样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: fontSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算 距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>), <span class="number">20</span>)</span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).css(&#123;</span><br><span class="line">            top: data.top - <span class="number">60</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top - <span class="number">60</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 定时关闭</span></span><br><span class="line">        <span class="keyword">var</span> timers;</span><br><span class="line">        <span class="keyword">if</span> (!data.manual) &#123;</span><br><span class="line">            timers = setTimeout(close, data.timeout);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 清除定时器</span></span><br><span class="line">            clearInterval(timers)</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="string">'alert'</span>) &#123;</span><br><span class="line">        <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">        <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'hidden'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// alert 提示框展示</span></span><br><span class="line">        <span class="comment">// 添加 alert 提示框</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 是否添加遮罩层</span></span><br><span class="line">        <span class="keyword">if</span> (data.mask) &#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_mask"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">            <span class="comment">// 设置mask外层弹框样式</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).css(&#123;</span><br><span class="line">                position: <span class="string">'fixed'</span>,</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                background: <span class="string">'rgba(0,0,0,0.4)'</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成中间层</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'centerBox"&gt;&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            width: data.width + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'20px'</span>,</span><br><span class="line">            background: <span class="string">'#ffffff'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            left: <span class="number">0</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 生成头部以及提示内容部分</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'title"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示标题</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.title + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置标题框文字样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span>,</span><br><span class="line">            fontSize: titleSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#333333'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: titleSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'-1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置提示框 box 样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).css(&#123;</span><br><span class="line">            marginBottom: <span class="string">'10px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'body"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'body'</span>).css(&#123;</span><br><span class="line">            padding: <span class="string">'0 '</span> + (titleSize + <span class="number">10</span>) + <span class="string">'px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>), <span class="number">40</span>);</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            top: data.top + <span class="number">40</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition);</span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top + <span class="number">40</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">                <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">                    $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'auto'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 定时关闭</span></span><br><span class="line">        <span class="keyword">var</span> timers;</span><br><span class="line">        <span class="keyword">if</span> (!data.manual) &#123;</span><br><span class="line">            timers = setTimeout(close, data.timeout);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 清除定时器</span></span><br><span class="line">            clearInterval(timers)</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 遮罩层关闭</span></span><br><span class="line">        <span class="keyword">if</span> (data.maskClose) &#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 清除定时器</span></span><br><span class="line">                clearInterval(timers)</span><br><span class="line">                close();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="string">'confirm'</span>) &#123;</span><br><span class="line">        <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">        <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'hidden'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// alert 提示框展示</span></span><br><span class="line">        <span class="comment">// 添加 alert 提示框</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 是否添加遮罩层</span></span><br><span class="line">        <span class="keyword">if</span> (data.mask) &#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_mask"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">            <span class="comment">// 设置mask外层弹框样式</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).css(&#123;</span><br><span class="line">                position: <span class="string">'fixed'</span>,</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                background: <span class="string">'rgba(0,0,0,0.4)'</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成中间层</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'centerBox"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            width: data.width + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'20px'</span>,</span><br><span class="line">            background: <span class="string">'#ffffff'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            left: <span class="number">0</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成头部以及提示内容部分</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'title"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示标题</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.title + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置标题框文字样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span>,</span><br><span class="line">            fontSize: titleSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#333333'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: titleSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'-1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置提示框 box 样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).css(&#123;</span><br><span class="line">            marginBottom: <span class="string">'10px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'body"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'body'</span>).css(&#123;</span><br><span class="line">            padding: <span class="string">'0 '</span> + (titleSize + <span class="number">10</span>) + <span class="string">'px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置按钮</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'footer"&gt;&lt;button  class="button_s_model '</span> + idText + <span class="string">'_confirm"&gt;'</span> + data.confirmText + <span class="string">'&lt;/button&gt;&lt;button class="button_s_model '</span> + idText + <span class="string">'_cancel"&gt;'</span> + data.cancelText + <span class="string">'&lt;/button&gt;&lt;div class="clearBoth"&gt;&lt;/div&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'footer'</span>).css(&#123; <span class="attr">paddingTop</span>: <span class="string">'20px'</span> &#125;)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).css(&#123;</span><br><span class="line">            float: <span class="string">'right'</span>,</span><br><span class="line">            marginLeft: <span class="string">'20px'</span>,</span><br><span class="line">            outline: <span class="string">'none'</span>,</span><br><span class="line">            border: <span class="string">'none'</span>,</span><br><span class="line">            padding: <span class="string">'8px 30px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>), <span class="number">40</span>)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            top: data.top + <span class="number">40</span>,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 鼠标移入移出</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'.8'</span> &#125;)</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'1'</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 鼠标按下</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'1'</span> &#125;)</span><br><span class="line">        &#125;).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'.8'</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 取消按钮样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model.'</span> + idText + <span class="string">'_cancel'</span>).css(&#123;</span><br><span class="line">            background: <span class="string">'#fff'</span>,</span><br><span class="line">            borderBox: <span class="string">'box-sizing'</span>,</span><br><span class="line">            border: <span class="string">'1px solid #eee'</span>,</span><br><span class="line">        &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            data.cancel(close)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 确认按钮样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model.'</span> + idText + <span class="string">'_confirm'</span>).css(&#123;</span><br><span class="line">            background: <span class="string">'#2d8cf0'</span>,</span><br><span class="line">            color: <span class="string">'#fff'</span>,</span><br><span class="line">        &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            data.confirm(close)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 清除浮动</span></span><br><span class="line">        $(<span class="string">'.clearBoth'</span>).css(&#123;</span><br><span class="line">            clear: <span class="string">'both'</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top + <span class="number">40</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">                <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">                    $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'auto'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 遮罩层关闭</span></span><br><span class="line">        <span class="keyword">if</span> (data.maskClose) &#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                close();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$error</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    $modal(&#123;</span><br><span class="line">        type: <span class="string">'message'</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">'error'</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） </span></span><br><span class="line">        content: e, <span class="comment">// 提示文字 </span></span><br><span class="line">        center: <span class="literal">true</span>,<span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">        top:<span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">        transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">        closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成功提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$success</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    $modal(&#123;</span><br><span class="line">        type: <span class="string">'message'</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">'success'</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） </span></span><br><span class="line">        content: e, <span class="comment">// 提示文字 </span></span><br><span class="line">        center: <span class="literal">true</span>,<span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">        top:<span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">        transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">        closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用弹窗库</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"手机号格式有误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".message"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  message($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message1"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"人间值得"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"人间值得"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// alert</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alert</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"alert"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">300</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">true</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    pageScroll: <span class="literal">true</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">300</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".alert"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".alert2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"alert"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">999999999</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） 时间越长相当于需要手动关闭</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">false</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    pageScroll: <span class="literal">false</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">300</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// confirm</span></span><br><span class="line">$(<span class="string">".confirm"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"confirm"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">true</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    top: <span class="number">400</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    pageScroll: <span class="literal">false</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">500</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">    cancelText: <span class="string">"取消"</span>, <span class="comment">// 取消按钮 默认为 取消</span></span><br><span class="line">    confirmText: <span class="string">"确认"</span>, <span class="comment">// 确认按钮 默认未 确认</span></span><br><span class="line">    cancel: <span class="function"><span class="keyword">function</span> (<span class="params">close</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 回调函数  //  函数返回关闭事件 调用-关闭弹窗</span></span><br><span class="line">      $modal(&#123;</span><br><span class="line">        type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        content: <span class="string">"用户点击了取消"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">      &#125;);</span><br><span class="line">      close(); <span class="comment">// 调用返回的 关闭弹框函数 才能关闭</span></span><br><span class="line">    &#125;,</span><br><span class="line">    confirm: <span class="function"><span class="keyword">function</span> (<span class="params">close</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 回调函数  //  函数返回关闭事件 调用-关闭弹窗</span></span><br><span class="line">      $modal(&#123;</span><br><span class="line">        type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        content: <span class="string">"用户点击了确认"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">      &#125;);</span><br><span class="line">      close(); <span class="comment">// 调用返回的 关闭弹框函数 才能关闭</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  快捷错误提示</span></span><br><span class="line"><span class="comment">// $error('这是一条错误提示！')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  快捷成功提示</span></span><br><span class="line"><span class="comment">// $success('这是一条成功提示！')</span></span><br></pre></td></tr></table></figure></li><li><p>如果用户输入时输入了手机号格式有误，会是以下效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%94%99%E8%AF%AF%E5%BC%B9%E7%AA%97%E6%8F%90%E7%A4%BA.gif" alt="" /></p></li></ul><h2 id="a-id2登录页2登录页a"><a class="markdownIt-Anchor" href="#a-id2登录页2登录页a"></a> <a id="2.登录页">2.登录页</a></h2><p>然后是写登录页的页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/login.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 登录方式 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginWay"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 短信验证码登录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"codeLogin"</span>&gt;</span></span><br><span class="line">          短信验证码登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"line1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 29px; color: aquamarine"</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 服务密码登录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pwdLogin"</span>&gt;</span></span><br><span class="line">          服务密码登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"line2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"codeForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>验证码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"getCode"</span>&gt;</span>点击获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"pwdForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">name</span>=<span class="string">"phone"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/modal_dialog.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/tccj.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 点击短信验证码登录触发</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".codeLogin"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 登录操作切换动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line2"</span>).css(<span class="string">"width"</span>, <span class="string">"0"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line1"</span>).css(<span class="string">"width"</span>, <span class="string">"100%"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// form表单旋转动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"animation"</span>, <span class="string">"rotate 0.8s ease-in-out"</span>);</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">      $(<span class="string">".codeForm"</span>).css(<span class="string">"transform"</span>, <span class="string">"rotateY(0deg)"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 点击服务密码登录触发</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".pwdLogin"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 登录操作切换动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line2"</span>).css(<span class="string">"width"</span>, <span class="string">"100%"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line1"</span>).css(<span class="string">"width"</span>, <span class="string">"0"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// form表单旋转动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"animation"</span>, <span class="string">"rotate 0.8s ease-in-out"</span>);</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户点击发送短信</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 发送短信</span></span></span><br><span class="line"><span class="javascript">        $.ajax(<span class="string">""</span>, &#123;</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">"get"</span>,</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户提交表单</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 判断手机号格式是否正确</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 提示错误信息</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>因为CSS样式是用的上面的那个CSS，所以这里就不写了</p><p>直接看效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%94%99%E8%AF%AF%E5%BC%B9%E7%AA%97%E6%8F%90%E7%A4%BA02.gif" alt="" /></p><h2 id="a-id3添加头部tab3添加头部taba"><a class="markdownIt-Anchor" href="#a-id3添加头部tab3添加头部taba"></a> <a id="3.添加头部tab">3.添加头部tab</a></h2><p>HTML部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-shouye"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-denglu"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-zhuce"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS部分</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#3498db</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E5%A4%B4%E9%83%A8tab.gif" alt="" /></p><h2 id="a-id4完善注册页的ajax请求4完善注册页的ajax请求a"><a class="markdownIt-Anchor" href="#a-id4完善注册页的ajax请求4完善注册页的ajax请求a"></a> <a id="4.完善注册页的ajax请求">4.完善注册页的ajax请求</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户点击发送短信</span></span><br><span class="line">    <span class="comment">// $(".getCode").on("click", (e) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // 发送短信</span></span><br><span class="line">    <span class="comment">//   $.ajax("", &#123;</span></span><br><span class="line">    <span class="comment">//     type: "get",</span></span><br><span class="line">    <span class="comment">//   &#125;);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单</span></span><br><span class="line">    $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">"form"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 提交注册信息</span></span><br><span class="line">            $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                        <span class="comment">// 用户注册完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="a-id5完善登录页的ajax请求5完善登录页的ajax请求a"><a class="markdownIt-Anchor" href="#a-id5完善登录页的ajax请求5完善登录页的ajax请求a"></a> <a id="5.完善登录页的ajax请求">5.完善登录页的ajax请求</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户点击发送短信</span></span><br><span class="line">    <span class="comment">// $(".getCode").on("click", (e) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // 发送短信</span></span><br><span class="line">    <span class="comment">//   $.ajax("", &#123;</span></span><br><span class="line">    <span class="comment">//     type: "get",</span></span><br><span class="line">    <span class="comment">//   &#125;);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">    $(<span class="string">".codeForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".codeForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                        <span class="comment">// $(".message2").trigger("click");</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">".pwdForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中用到的弹窗插件为，首先在需要用到弹窗插件的页面中添加以下button按钮，其class值为message、message1、message2、message3…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message1"</span> <span class="attr">data-icon</span>=<span class="string">"warning"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message2"</span> <span class="attr">data-icon</span>=<span class="string">"success"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message3"</span> <span class="attr">data-icon</span>=<span class="string">"warning"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>tccj__info.js</p><p><code>.message</code> – <code>手机号格式有误</code></p><p><code>.message1</code> – <code>此用户未注册</code></p><p><code>.message2</code> – <code>登录成功</code></p><p><code>.message3</code> – <code>用户名或密码错误</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"手机号格式有误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".message"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  message($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">".message1"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"warning"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"此用户未注册"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"登录成功"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">".message3"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"warning"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"用户名或密码错误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>然后去modal_dialog.js文件中去设置以下message提示框长度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置message提示框长度</span></span><br><span class="line">    <span class="keyword">var</span> width_s = <span class="number">40</span> + fontSize * data.content.length + fontSize + <span class="number">10</span>;</span><br></pre></td></tr></table></figure><blockquote><p>提示：可以在文件中直接用 CTRL + F 搜索即可</p></blockquote></li></ul><p>现在你的弹窗应该已经可以正常运作了，只需要在需要弹窗的地方自动触发button按钮即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>); <span class="comment">// 自动点击class值为message的元素</span></span><br></pre></td></tr></table></figure><ul><li><p>弹窗效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5.gif" alt="" /></p></li></ul><h2 id="a-id6抽奖页-首页6抽奖页首页a"><a class="markdownIt-Anchor" href="#a-id6抽奖页-首页6抽奖页首页a"></a> <a id="6.抽奖页--首页">6.抽奖页–首页</a></h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rel</span>=<span class="string">"stylesheet"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">href</span>=<span class="string">"http://at.alicdn.com/t/font_2067208_jokj9bfucw.css"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/login.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/jQuery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/jqueryRotate.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pointer"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> duArry = [</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">4350</span>, name: <span class="string">"免单4999"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1550</span>, name: <span class="string">"免单50元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2250</span>, name: <span class="string">"免单50元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2311</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2281</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2300</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2000</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1980</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2720</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2700</span>, namm: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1650</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1660</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1670</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1680</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1690</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1703</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1710</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1719</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1728</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1738</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1746</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1755</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1763</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1770</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1776</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1783</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1790</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1758</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1779</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1762</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1789</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1774</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line">          ];</span><br><span class="line"><span class="actionscript">          <span class="comment">// 定义一个随机度数</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> du = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * duArry.length);</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> userPhone = $(<span class="string">"#userPhone"</span>).text();</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 判断度数是否为undefined</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">while</span> (duArry[du].name === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="javascript">            du = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * duArry.length);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (duArry[du].name !== <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 旋转轮盘</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".rotate&gt;img"</span>).rotate(&#123;</span></span><br><span class="line">            angle: 0,</span><br><span class="line">            animateTo: duArry[du].num,</span><br><span class="line">            duration: 5000,</span><br><span class="line"><span class="actionscript">            callback: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">              $.ajax(<span class="string">"/reduce"</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">"get"</span>,</span></span><br><span class="line">                data: &#123;</span><br><span class="line">                  phone: userPhone,</span><br><span class="line">                  prize: duArry[du].name,</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="actionscript">                success: <span class="function"><span class="keyword">function</span> <span class="params">(number)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// console.log(number.data);</span></span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// 修改文本内容</span></span></span><br><span class="line"><span class="javascript">                  $(<span class="string">".degree"</span>).text(<span class="string">"您还剩余抽奖次数为"</span> + number.data + <span class="string">"次"</span>);</span></span><br><span class="line"></span><br><span class="line">                  if (number.data == 0) &#123;</span><br><span class="line"><span class="javascript">                    $(<span class="string">".pointer"</span>).unbind();</span></span><br><span class="line"><span class="javascript">                    $.ajax(<span class="string">"/show"</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                      type: <span class="string">"get"</span>,</span></span><br><span class="line">                      data: &#123;</span><br><span class="line">                        phone: userPhone,</span><br><span class="line">                      &#125;,</span><br><span class="line"><span class="actionscript">                      success: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                        $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                          <span class="comment">// console.log(value);</span></span></span><br><span class="line"><span class="javascript">                          <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">// console.log(value);</span></span></span><br><span class="line"><span class="javascript">                            $.each(value, (index, prize) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">                              <span class="built_in">console</span>.log(prize);</span></span><br><span class="line"><span class="javascript">                              $(<span class="string">".mask&gt;ul"</span>).append($(<span class="string">`&lt;li&gt;<span class="subst">$&#123;prize&#125;</span>&lt;/li&gt;`</span>));</span></span><br><span class="line">                            &#125;);</span><br><span class="line"><span class="handlebars"><span class="xml">                            // $(".mask&gt;ul").append($(`<span class="tag">&lt;<span class="name">li</span>&gt;</span>$&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>`));</span></span></span><br><span class="line">                          &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                      &#125;,</span><br><span class="line"><span class="actionscript">                    &#125;).then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                      <span class="comment">// $(".mask").css("transform", "scale(1)");</span></span></span><br><span class="line"><span class="actionscript">                      <span class="comment">// $(".mask").css("transition", "all 2s");</span></span></span><br><span class="line"><span class="javascript">                      $(<span class="string">".mask"</span>).css(</span></span><br><span class="line"><span class="actionscript">                        <span class="string">"animation"</span>,</span></span><br><span class="line"><span class="actionscript">                        <span class="string">"scale 0.5s ease-in-out forwards"</span></span></span><br><span class="line">                      );</span><br><span class="line">                    &#125;);</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-shouye"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-denglu"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/quit"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-tuichu_huaban1"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pointer"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/img/pointer.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"rotate"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/img/jp.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"degree"</span>&gt;</span>您的抽奖次数为<span class="tag">&lt;<span class="name">a</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">a</span>&gt;</span>次<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mask"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用JS动画来完成抽奖动画，用户抽三次奖，最后会出一个结果，不能继续抽奖</p><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%BD%AC%E7%9B%98%E6%8A%BD%E5%A5%96.gif" alt="" /></p><h2 id="a-id7完成注册验证码接口的接入7完成注册验证码接口的接入a"><a class="markdownIt-Anchor" href="#a-id7完成注册验证码接口的接入7完成注册验证码接口的接入a"></a> <a id="7.完成注册验证码接口的接入">7.完成注册验证码接口的接入</a></h2><p>第一次搞这个，遇到了很多的问题，没有及时解决，问题包括：什么阿里云天级流控、接口被占用啊等等一系列后端问题，于是后端说这是阿里云默认的限制，你短信不能发送的太快，于是呢我就换了个手机号发送。</p><p>如下错误信息</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Error</span> [isv.BUSINESS_LIMIT_CONTROLError]: 触发天级流控Permits:<span class="number">10</span>, <span class="attr">URL</span>: https:<span class="comment">//dysmsapi.aliyuncs.com/</span></span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:<span class="number">97</span>:<span class="number">5</span>) &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    RequestId: <span class="string">'8FD669CC-506F-46B2-BA4F-5702EFD0A1CB'</span>,</span><br><span class="line">    Code: <span class="string">'isv.BUSINESS_LIMIT_CONTROL'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  code: <span class="string">'isv.BUSINESS_LIMIT_CONTROL'</span>,</span><br><span class="line">  url: <span class="string">'https://dysmsapi.aliyuncs.com/'</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    url: <span class="string">'https://dysmsapi.aliyuncs.com/'</span>,</span><br><span class="line">    request: &#123; <span class="attr">headers</span>: [<span class="built_in">Object</span>: <span class="literal">null</span> prototype] &#125;,</span><br><span class="line">    response: &#123; <span class="attr">statusCode</span>: <span class="number">200</span>, <span class="attr">headers</span>: [<span class="built_in">Object</span>] &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>1.首先我注册、登录时表单出现默认提交的情况，于是去百度上看了一下，只需要在需要点击提交的按钮上添加 <code>onclick=&quot;return false&quot;</code> ，即可禁止默认提交行为</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=<span class="string">"submit"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn codeBtn"</span> onclick=<span class="string">"return false"</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>2.注册页的逻辑，这都是我自己想到的需求，可能不太完美吧，希望大佬多多建议</p><ul><li>手机号必须是符合手机号格式的才能注册</li><li>密码必须是包含数字、字母、特殊符号中的其中两种的才能注册</li><li>验证码必须是和后端发送过来的验证码一致才能注册</li><li>点击下一步会自动进行登录操作，完成登录</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户输入的手机号</span></span><br><span class="line">    <span class="keyword">var</span> phone;</span><br><span class="line">    <span class="comment">// 用户输入的密码</span></span><br><span class="line">    <span class="keyword">var</span> password;</span><br><span class="line">    <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">    <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">    <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">    <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">    $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        password = $(<span class="string">"#password"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">            !<span class="regexp">/^(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.&#123;12,16&#125;$/</span>.test(</span><br><span class="line">                password</span><br><span class="line">            )</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// 验证数字，大写字母，小写字母，特殊字符四选三组成的密码强度，且长度在12到16个数之间</span></span><br><span class="line">            $(<span class="string">".message9"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">                password,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 发送短信</span></span><br><span class="line">            $.ajax(<span class="string">"/codeRequire"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// console.log(response);</span></span><br><span class="line">                    <span class="comment">// console.log(response.code);</span></span><br><span class="line">                    <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">304</span>) &#123;</span><br><span class="line">                        <span class="comment">// 此用户已注册</span></span><br><span class="line">                        $(<span class="string">".message8"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                        <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                            codeTime--;</span><br><span class="line">                            <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                            <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="comment">// 清除计时器</span></span><br><span class="line">                                clearInterval(timer);</span><br><span class="line">                                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, <span class="number">1000</span>);</span><br><span class="line">                        <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                        codeRes = response.data;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                        codeState = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单</span></span><br><span class="line">    $(<span class="string">".btn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 阻止默认行为</span></span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">                password,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 提交注册信息</span></span><br><span class="line">            $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// 获取用户输入的验证码</span></span><br><span class="line">                    <span class="keyword">var</span> codeInput = $(<span class="string">"#code"</span>).val();</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"用户输入的验证码："</span>, codeInput);</span><br><span class="line">                    <span class="comment">// 如果用户没有注册</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (codeInput == codeRes) &#123;</span><br><span class="line">                            <span class="comment">// 验证码正确</span></span><br><span class="line">                            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                            <span class="comment">// // 用户注册完毕直接跳到抽奖页面</span></span><br><span class="line">                            <span class="comment">// window.location = "/";</span></span><br><span class="line">                            <span class="comment">// 注册完成后完成登录功能 -- 使用密码登录</span></span><br><span class="line">                            <span class="comment">// 表单序列化</span></span><br><span class="line">                            <span class="comment">// 手机验证码登录</span></span><br><span class="line">                            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                                type: <span class="string">"post"</span>,</span><br><span class="line">                                data,</span><br><span class="line">                                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                                        <span class="comment">// $("body").html()</span></span><br><span class="line">                                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;,</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">// 验证码错误</span></span><br><span class="line">                            $(<span class="string">".message5"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>3.效果演示</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C01.gif" alt="" /></p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C02.gif" alt="" /></p></li></ul><h2 id="a-id8完成登录验证码接口的接入8完成登录验证码接口的接入a"><a class="markdownIt-Anchor" href="#a-id8完成登录验证码接口的接入8完成登录验证码接口的接入a"></a> <a id="8.完成登录验证码接口的接入">8.完成登录验证码接口的接入</a></h2><ul><li><p>1.有的人可能会说，为什么一个验证码接口要分为两个：一个注册验证码接口，和一个登录验证码接口，原因就是</p><ul><li><p>登录验证码接口是我改的</p><p>加了用户手机号查询，用户点击获取验证码后，前端首先会给后端返回数据（手机号 – phone），然后 后端会去数据库里去查询有没有这个用户，如果没有就把数据返回给前端，然后前端会把该数据以任何形式渲染到页面中，提示用户未注册，这样可以提升用户体验感，不可能是不管你有没有注册，先给你发送验证码，先验证验证码对不对然后再点击登录后，，发现你没有注册，这样你可能就是反手就是一个退出了。</p></li><li><p>注册验证码接口是我加的</p><p>和上面一样</p><p>只不过是注册验证码接口是查询用户是不是注册了，如果用户已经注册了，提示用户已注册。</p></li></ul></li><li><p>2.登录页的逻辑，和注册页的逻辑基本一样，这里不再赘述</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户输入的手机号</span></span><br><span class="line">    <span class="keyword">var</span> phone;</span><br><span class="line">    <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">    <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">    <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">    <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">    $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 发送短信</span></span><br><span class="line">            $.ajax(<span class="string">"/code"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// console.log(response);</span></span><br><span class="line">                    <span class="comment">// console.log(response.code);</span></span><br><span class="line">                    <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        <span class="comment">// 此用户未注册</span></span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                        <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                            codeTime--;</span><br><span class="line">                            <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                            <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="comment">// 清除计时器</span></span><br><span class="line">                                clearInterval(timer);</span><br><span class="line">                                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, <span class="number">1000</span>);</span><br><span class="line">                        <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                        codeRes = response.data;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                        codeState = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">    $(<span class="string">".codeBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 阻止默认行为</span></span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">            phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">            <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">                <span class="comment">// 提示错误信息</span></span><br><span class="line">                $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 手机号格式正确</span></span><br><span class="line">                <span class="comment">// 表单序列化</span></span><br><span class="line">                <span class="keyword">var</span> data = $(<span class="string">".codeForm"</span>).serializeArray();</span><br><span class="line">                <span class="comment">// 手机验证码登录</span></span><br><span class="line">                $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                    type: <span class="string">"post"</span>,</span><br><span class="line">                    data,</span><br><span class="line">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                            <span class="comment">// console.log(response.message);</span></span><br><span class="line">                            <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                            $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                            <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                            <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                            $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 密码登录</span></span><br><span class="line">    $(<span class="string">".pwdForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="a-id9页面跳转路由不刷新9页面跳转路由不刷新a"><a class="markdownIt-Anchor" href="#a-id9页面跳转路由不刷新9页面跳转路由不刷新a"></a> <a id="9.页面跳转路由不刷新">9.页面跳转路由不刷新</a></h2><blockquote><p>…渐渐崩溃</p></blockquote><p>今天又学到了新东西，刷新了我对注释的认知🥁</p><p>你猜下面这段代码放到我代码里会怎样？？？(就这样被注释着执行)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $("body").html(`&#123;% include "index.html" %&#125;`);</span></span><br></pre></td></tr></table></figure><p>结果是它居然能正常执行，搞的我一脸懵逼…，最后是实在受不了了，把它删了，就没事了，好像是不能包含 <code>script</code> 标签</p><p>原理，在ajax中有一股神秘的力量，我不知从何而来，我想触及到它，但我无法触及它，不管你有没有注释都会正常的执行</p><p>上面的代码意思是 我要跳转到 <code>index.html</code> 页面，而且我的 <code>index.html</code> 页面中在没有登录的情况下会自动跳转到登录页面，所以…就这样完成了递归原理来刷新页面，效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%80%92%E5%BD%92%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2.gif" alt="" /></p><p>后来经过我们的一番讨论，想到了怎么完成这样的一个功能  – 页面变化而路由不变</p><p>那就是通过jQuery在想要跳转页面的地方都来重新绘制此页面，把此页面绘制成为想要跳转到的那个页面的样子，这当然在其中页遇到了问题，那就是 <code>script</code> 标签不能被直接拿来绘制，需要先创建 <code>script</code> 标签，在为其添加文件路径，最后把 <code>script</code> 标签之间append到body中即可</p><ul><li><p>注册成功后显示用户抽奖界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>在全局定义那个loginM路由的形参，就可以在全局封装一个用来绘制抽奖页的函数了</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用户输入的手机号</span></span><br><span class="line">  <span class="keyword">var</span> phone;</span><br><span class="line">  <span class="comment">// 用户输入的密码</span></span><br><span class="line">  <span class="keyword">var</span> password;</span><br><span class="line">  <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">  <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 全局从后端接收到的data数据</span></span><br><span class="line">  <span class="keyword">var</span> timesLoginM;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绘制首页的函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">                      &lt;link rel="stylesheet" href="/css/index.css" /&gt;</span></span><br><span class="line"><span class="string">                      &lt;header&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/" class="iconfont icon-shouye"&gt;首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/quit" class="iconfont icon-tuichu_huaban1"&gt;退出&lt;/a&gt;</span></span><br><span class="line"><span class="string">                      &lt;/header&gt;</span></span><br><span class="line"><span class="string">                      &lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class="pointer"&gt;&lt;img src="/img/pointer.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class="rotate"&gt;&lt;img src="/img/jp.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                      &lt;/div&gt;</span></span><br><span class="line"><span class="string">                      &lt;p class="degree"&gt;您的抽奖次数为&lt;a&gt; <span class="subst">$&#123;timesLoginM&#125;</span> &lt;/a&gt;次&lt;/p&gt;</span></span><br><span class="line"><span class="string">                      &lt;div class="mask"&gt;</span></span><br><span class="line"><span class="string">                        &lt;ul&gt;</span></span><br><span class="line"><span class="string">                          &lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">                          &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">                          &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line"><span class="string">                        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">                      &lt;/div&gt;</span></span><br><span class="line"><span class="string">                `</span>);</span><br><span class="line">      <span class="comment">//引入第一个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script1.src = <span class="string">"/js/index.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">      <span class="comment">//引入第二个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script2.src = <span class="string">"/js/jQuery-1.12.4.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">      <span class="comment">//引入第三个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script3.src = <span class="string">"/js/jqueryRotate.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">  <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">  <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">  $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">    phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    password = $(<span class="string">"#password"</span>).val();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">      <span class="comment">// 提示错误信息</span></span><br><span class="line">      $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      !<span class="regexp">/^(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.&#123;12,16&#125;$/</span>.test(password)</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="comment">// 验证数字，大写字母，小写字母，特殊字符四选三组成的密码强度，且长度在12到16个数之间</span></span><br><span class="line">      $(<span class="string">".message9"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> data = &#123;</span><br><span class="line">        phone,</span><br><span class="line">        password,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// 发送短信</span></span><br><span class="line">      $.ajax(<span class="string">"/codeRequire"</span>, &#123;</span><br><span class="line">        type: <span class="string">"post"</span>,</span><br><span class="line">        data,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// console.log(response);</span></span><br><span class="line">          <span class="comment">// console.log(response.code);</span></span><br><span class="line">          <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">          <span class="keyword">if</span> (response.code === <span class="number">304</span>) &#123;</span><br><span class="line">            <span class="comment">// 此用户已注册</span></span><br><span class="line">            $(<span class="string">".message8"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">            $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">            <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              codeTime--;</span><br><span class="line">              <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">              $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">              <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">              $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 清除计时器</span></span><br><span class="line">                clearInterval(timer);</span><br><span class="line">                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">            <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">            codeRes = response.data;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">            codeState = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 用户提交表单</span></span><br><span class="line">  $(<span class="string">".btn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="comment">// 阻止默认行为</span></span><br><span class="line">      e.preventDefault();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> data = &#123;</span><br><span class="line">        phone,</span><br><span class="line">        password,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// 提交注册信息</span></span><br><span class="line">      $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">        type: <span class="string">"post"</span>,</span><br><span class="line">        data,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// 获取用户输入的验证码</span></span><br><span class="line">          <span class="keyword">var</span> codeInput = $(<span class="string">"#code"</span>).val();</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"用户输入的验证码："</span>, codeInput);</span><br><span class="line">          <span class="comment">// 如果用户没有注册</span></span><br><span class="line">          <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (codeInput == codeRes) &#123;</span><br><span class="line">              <span class="comment">// 验证码正确</span></span><br><span class="line">              <span class="built_in">console</span>.log(response.message);</span><br><span class="line">              <span class="comment">// // 用户注册完毕直接绘制个抽奖页面</span></span><br><span class="line">              <span class="comment">// 注册完成后完成登录功能 -- 使用密码登录</span></span><br><span class="line">              <span class="comment">// 表单序列化</span></span><br><span class="line">              <span class="comment">// 手机验证码登录</span></span><br><span class="line">              $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    <span class="comment">// window.location = "/";</span></span><br><span class="line">                    index();</span><br><span class="line">                  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// 验证码错误</span></span><br><span class="line">              $(<span class="string">".message5"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">            $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现已经实现了注册成功后 2秒钟后 显示用户抽奖界面，并且页面不刷新</p></blockquote></li><li><p>判断用户如果没有注册的话，直接跳转到用户注册界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>同样是绘制页面，这次绘制的是注册页</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绘制注册页的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;button class="message" data-icon="info"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message4" data-icon="info"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message5" data-icon="error"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message6" data-icon="error"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message7" data-icon="success"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message8" data-icon="warning"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message9" data-icon="warning"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;header style="width: 176px"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/register" class="iconfont icon-zhuce"&gt;注册&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="loginBox"&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;注册&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;form action="" method="" class="registerForm"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="text" required id="phone" name="phone" /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;手机号&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="password" required id="password" name="password" /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;密码&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="text" id="code" name="code" required /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;验证码&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="button" class="getCode" value="点击获取" /&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="button" class="coverGetCode" value="" /&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;button type="submit" class="btn" onclick="return false"&gt;</span></span><br><span class="line"><span class="string">            下一步</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">        <span class="comment">//引入第一个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script1.src =</span><br><span class="line">            <span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">        <span class="comment">//引入第二个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script2.src = <span class="string">"/js/modal_dialog.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">        <span class="comment">//引入第三个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script3.src = <span class="string">"/js/tccj_info.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">        <span class="comment">//引入第四个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script4 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script4.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script4.src = <span class="string">"/js/register.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script4);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">$(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">    phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">        <span class="comment">// 提示错误信息</span></span><br><span class="line">        $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> data = &#123;</span><br><span class="line">            phone,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 发送短信</span></span><br><span class="line">        $.ajax(<span class="string">"/code"</span>, &#123;</span><br><span class="line">            type: <span class="string">"post"</span>,</span><br><span class="line">            data,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="built_in">console</span>.log(response.code);</span><br><span class="line">                <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(response.datas);</span><br><span class="line">                    <span class="comment">// 此用户未注册</span></span><br><span class="line">                    $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    register();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                    $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                    <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                        codeTime--;</span><br><span class="line">                        <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                        $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                        <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                        $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">// 清除计时器</span></span><br><span class="line">                            clearInterval(timer);</span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="number">1000</span>);</span><br><span class="line">                    <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                    codeRes = response.data;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                    codeState = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现用户如果没有注册的话，直接跳转到用户注册界面，并且页面不刷新</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%B7%B3%E8%BD%AC01.gif" alt="" /></p></li><li><p>登录成功后显示用户抽奖界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>同样也是绘制页面，只不过这次是绘制抽奖界面</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绘制首页的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;link rel="stylesheet" href="/css/index.css" /&gt;</span></span><br><span class="line"><span class="string">            &lt;header&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/" class="iconfont icon-shouye"&gt;首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/quit" class="iconfont icon-tuichu_huaban1"&gt;退出&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="pointer"&gt;&lt;img src="/img/pointer.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="rotate"&gt;&lt;img src="/img/jp.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;p class="degree"&gt;您的抽奖次数为&lt;a&gt; <span class="subst">$&#123;timesLoginM&#125;</span> &lt;/a&gt;次&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="mask"&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">          <span class="comment">//引入第一个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script1.src = <span class="string">"/js/index.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">          <span class="comment">//引入第二个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script2.src = <span class="string">"/js/jQuery-1.12.4.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">          <span class="comment">//引入第三个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script3.src = <span class="string">"/js/jqueryRotate.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">$(<span class="string">".codeBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="comment">// var data = $(".codeForm").serializeArray();</span></span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(response.code);</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 直接绘制个首页</span></span><br><span class="line">                        index();</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码登录</span></span><br><span class="line">$(<span class="string">".pwdBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">        <span class="comment">// 提示错误信息</span></span><br><span class="line">        $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 手机号格式正确</span></span><br><span class="line">        <span class="comment">// 表单序列化</span></span><br><span class="line">        <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">        <span class="comment">// 密码登录</span></span><br><span class="line">        $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">            type: <span class="string">"post"</span>,</span><br><span class="line">            data,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    <span class="comment">// window.location = "/";</span></span><br><span class="line">                    timesLoginM = response.data.times;</span><br><span class="line">                    index();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现登录成功后显示用户抽奖界面，并且页面是不会刷新的</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%B7%B3%E8%BD%AC02.gif" alt="" /></p></li></ul><p>至此，项目已基本完成。</p>]]></content>
    
    <summary type="html">
    
      京东抽奖项目开发笔记
    
    </summary>
    
    
      <category term="Ajax" scheme="http://extheor.club/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="http://extheor.club/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>NodeJs 取参的四种方法</title>
    <link href="http://extheor.club/posts/7380b71/index.html"/>
    <id>http://extheor.club/posts/7380b71/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.949Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="nodejs-取参的四种方法"><a class="markdownIt-Anchor" href="#nodejs-取参的四种方法"></a> NodeJs 取参的四种方法</h1><p>参考：<a href="https://my.oschina.net/u/2519530/blog/535309" target="_blank" rel="noopener">https://my.oschina.net/u/2519530/blog/535309</a> 🙏</p><p>获取请求很中的参数是每个web后台处理的必经之路，nodejs的 <strong>express框架</strong> 提供了四种方法来实现。</p><ol><li><a href="#req.body">req.body</a></li><li><a href="#req.query">req.query</a></li><li><a href="#req.params">req.params</a></li><li><a href="#req.param()">req.param()</a></li></ol><p><a id="req.body"><strong>首先介绍第一个req.body</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">官方文档解释：</span><br><span class="line">Contains key-value pairs of data submitted in the request body. By default, it is undefined,</span><br><span class="line"> and is populated when you use body-parsing middleware such as body-parser and multer.</span><br><span class="line"></span><br><span class="line">稍微翻译一下：包含了提交数据的键值对在请求的body中，默认是underfined,</span><br><span class="line">你可以用body-parser或者multer来解析body</span><br></pre></td></tr></table></figure><p>解析body不是nodejs默认提供的，你需要载入body-parser中间件才可以使用req.body</p><blockquote><p><font color="red"><strong>此方法通常用来解析POST请求中的数据</strong></font></p></blockquote><p><a id="req.query"><strong>第二种是req.query</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">官方文档解释：</span><br><span class="line">An object containing a property for each query string parameter in the route. </span><br><span class="line">If there is no query string, it is the empty object, &#123;&#125;.</span><br><span class="line">翻译一下:包含在路由中每个查询字符串参数属性的对象。如果没有，默认为&#123;&#125;</span><br></pre></td></tr></table></figure><p>有nodejs默认提供，无需载入中间件</p><p>举例说明(官方摘抄)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; GET &#x2F;search?q&#x3D;tobi+ferret</span><br><span class="line">req.query.q</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;tobi ferret&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; GET &#x2F;shoes?order&#x3D;desc&amp;shoe[color]&#x3D;blue&amp;shoe[type]&#x3D;converse</span><br><span class="line">req.query.order</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;desc&quot;</span><br><span class="line">req.query.shoe.color</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;blue&quot;</span><br><span class="line">req.query.shoe.type</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;converse&quot;</span><br></pre></td></tr></table></figure><blockquote><p><font color="red"><strong>此方法多适用于GET请求，解析GET里的参数</strong></font></p></blockquote><p><a id="req.params"><strong>第三种是 req.params</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">官方文档：</span><br><span class="line">An object containing properties mapped to the named route “parameters”. </span><br><span class="line">For example, if you have the route &#x2F;user&#x2F;:name, </span><br><span class="line">then the “name” property is available as req.params.name. This object defaults to &#123;&#125;.</span><br><span class="line"></span><br><span class="line">翻译：包含映射到指定的路线“参数”属性的对象。</span><br><span class="line">例如，如果你有route&#x2F;user&#x2F;：name，那么“name”属性可作为req.params.name。</span><br><span class="line">该对象默认为&#123;&#125;。</span><br></pre></td></tr></table></figure><p>nodejs默认提供，无需载入其他中间件</p><p>举例说明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; GET &#x2F;user&#x2F;tj</span><br><span class="line">req.params.name</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;tj&quot;</span><br></pre></td></tr></table></figure><blockquote><p><font color="red"><strong>多适用于restful风格url中的参数的解析</strong></font></p></blockquote><p>req.query与req.params的区别</p><blockquote><p>req.params包含路由参数（在URL的路径部分），而req.query包含URL的查询参数（在URL的？后的参数）。</p></blockquote><p><a id="req.param()"><strong>最后一种req.param()</strong></a></p><p>此方法被弃用，请看<a href="http://www.expressjs.com.cn/4x/api.html#req.param" target="_blank" rel="noopener">官方解释</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Deprecated. Use either req.params, req.body or req.query, as applicable.</span><br><span class="line">翻译：被弃用，用其他三种方式替换</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      NodeJs 取参的四种方法
    
    </summary>
    
    
      <category term="Nodejs" scheme="http://extheor.club/categories/Nodejs/"/>
    
    
      <category term="nodejs" scheme="http://extheor.club/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB基本用法</title>
    <link href="http://extheor.club/posts/236bfea3/index.html"/>
    <id>http://extheor.club/posts/236bfea3/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.963Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="mongodb基本用法"><a class="markdownIt-Anchor" href="#mongodb基本用法"></a> MongoDB基本用法</h1><h2 id="1使用数据库-创建数据库"><a class="markdownIt-Anchor" href="#1使用数据库-创建数据库"></a> 1.使用数据库、创建数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use itying</span><br></pre></td></tr></table></figure><p>如果真的想把这个数据库创建成功，那么必须插入一个数据。</p><p>数据库中不能直接插入数据，只能往集合(collections)中插入数据。下面命令表示给itying数据库的user表中插入数据。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.insert(&#123;&quot;name&quot;:&quot;xiaoming&quot;&#125;);</span><br></pre></td></tr></table></figure><h2 id="2查看数据库"><a class="markdownIt-Anchor" href="#2查看数据库"></a> 2.查看数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></table></figure><h2 id="3显示当前的数据集合mysql中叫表"><a class="markdownIt-Anchor" href="#3显示当前的数据集合mysql中叫表"></a> 3.显示当前的数据集合（mysql中叫表）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure><h2 id="4查询数据集合中的数据"><a class="markdownIt-Anchor" href="#4查询数据集合中的数据"></a> 4.查询数据集合中的数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find()</span><br></pre></td></tr></table></figure><ul><li>1.如果想要查询指定的数据，则这么写</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: 13&#125;)</span><br></pre></td></tr></table></figure><ul><li>2.如果查询 age &gt; 22 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gt: 22&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>3.如果查询 age &lt; 22 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$lt: 22&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>4.如果查询 age &gt;= 25 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gte: 25&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>5.如果查询 age &lt;= 25 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$lte: 25&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>6.查询 age &gt;= 23 并且 age &lt;= 26</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gte: 23, $lte: 26&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>7.查询 name 中包含 mongo 的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;mongo&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>8.查询 name 中以 mongo 开头的</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;^mongo&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>9.查询 name 中以 mongo 结尾的</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;mongo$&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>10.查询指定列 name、age 数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&#125;,&#123;&quot;name&quot;: 1, &quot;age&quot;: 1&#125;);</span><br></pre></td></tr></table></figure><ul><li>11.按照年龄排序1升序-1降序</li></ul><p>升序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().sort(&#123;&quot;age&quot;: 1&#125;);</span><br></pre></td></tr></table></figure><p>降序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().sort(&#123;&quot;age&quot;: -1&#125;);</span><br></pre></td></tr></table></figure><ul><li>12.查询 name = zhangsan, age = 22 的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &quot;zhangsan&quot;, &quot;age&quot;: 22&#125;);</span><br></pre></td></tr></table></figure><ul><li>13.查询前 5 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().limit(5);</span><br></pre></td></tr></table></figure><ul><li>14.查询 10 条以后的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().skip(10);</span><br></pre></td></tr></table></figure><ul><li>15.查询 10 条以后的数据中的前 5 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().skip(10).limit(5);</span><br></pre></td></tr></table></figure><ul><li>16.如何分页查询</li></ul><p>第一页：1到10页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().limit(10)</span><br></pre></td></tr></table></figure><p>第二页：11到20页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip(10).limit(10)</span><br></pre></td></tr></table></figure><p>第三页：21到30页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip(20).limit(10)</span><br></pre></td></tr></table></figure><p>…</p><p>第n页：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip((n-1)*pageSize).limit(pageSize)</span><br></pre></td></tr></table></figure><ul><li>17.or 查询</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;$or: [&#123;&quot;age&quot;: 22&#125;, &#123;&quot;age&quot;: 25&#125;]&#125;);</span><br></pre></td></tr></table></figure><ul><li>18.findOne 查询第一条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.findOne();</span><br></pre></td></tr></table></figure><h2 id="5删除集合删除指定的集合-删除表"><a class="markdownIt-Anchor" href="#5删除集合删除指定的集合-删除表"></a> 5.删除集合，删除指定的集合    删除表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">删除集合 db.COLLECTION_NAME.drop()</span><br><span class="line">db.user.drop()</span><br></pre></td></tr></table></figure><h2 id="6删除数据库删除当前所在的数据库"><a class="markdownIt-Anchor" href="#6删除数据库删除当前所在的数据库"></a> 6.删除数据库，删除当前所在的数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase();</span><br></pre></td></tr></table></figure><h2 id="7插入数据"><a class="markdownIt-Anchor" href="#7插入数据"></a> 7.插入数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.insert(&#123;&quot;name&quot;:&quot;xiaoming&quot;&#125;);</span><br></pre></td></tr></table></figure><ul><li>如何一次给一个集合增加 100 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var i&#x3D;1; i&lt;&#x3D;100; i++)&#123;</span><br><span class="line">db.admin.insert(&#123;&quot;username&quot;: &quot;zhangsan&quot;+i, &quot;age&quot; :i&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>查看这个集合中有多少条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().count()</span><br></pre></td></tr></table></figure><h2 id="8修改数据"><a class="markdownIt-Anchor" href="#8修改数据"></a> 8.修改数据</h2><p>修改里面还有查询条件。你要改谁，要告诉 mongo。</p><p>查找名字叫做小明的，把年龄更改为 18 岁：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;name&quot;: &quot;小明&quot;&#125;, &#123;$set: &#123;&quot;age&quot;: 18&#125;&#125;);</span><br></pre></td></tr></table></figure><p>查找数学成绩是 70，把年龄更改为 33 岁：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;score.shuxue&quot;: 70&#125;, &#123;$set: &#123;&quot;age&quot;: 33&#125;&#125;);</span><br></pre></td></tr></table></figure><p>完整替换，<strong>不出现 $set 关键字了</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;name&quot;: &quot;小明&quot;&#125;, &#123;&quot;name&quot;: &quot;大明&quot;, &quot;age&quot;: 16&#125;);</span><br></pre></td></tr></table></figure><p>批量更新（一次修改多条数据）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;sex&quot;: &quot;男&quot;&#125;, &#123;$set: &#123;&quot;age&quot;: 33&#125;&#125;, &#123;multi: true&#125;);</span><br></pre></td></tr></table></figure><h2 id="9删除数据"><a class="markdownIt-Anchor" href="#9删除数据"></a> 9.删除数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.collectionNames.remove(&#123;&quot;borough&quot;: &quot;Manhattan&quot;&#125;)</span><br><span class="line">db.users.remove(&#123;&quot;age&quot;: 132&#125;);</span><br></pre></td></tr></table></figure><p>只删掉一条数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.restaurants.remove(&#123;&quot;borough&quot;: &quot;Queens&quot;&#125;, &#123;justOne: true&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      MongoDB基本用法
    
    </summary>
    
    
      <category term="MongoDB" scheme="http://extheor.club/categories/MongoDB/"/>
    
    
      <category term="mongodb" scheme="http://extheor.club/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>京东投票项目开发笔记</title>
    <link href="http://extheor.club/posts/5508212c/index.html"/>
    <id>http://extheor.club/posts/5508212c/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.966Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东投票项目开发笔记"><a class="markdownIt-Anchor" href="#京东投票项目开发笔记"></a> 京东投票项目开发笔记</h1><ol><li><p>打开项目<br /><code>$yarn install / $ npm install</code>: 跑环境（把项目依赖的插件进行安装）<br /><code>$node admin.js</code>: 启服务（把自己的计算机作为服务器，创建一个指定端口的服务，来管理后台程序-&gt;后台程序会根据客户端请求的需求，把对应的数据和业务逻辑实现）</p></li><li><p>API.TXT: API接口文档<br />真实项目中，后台开发人员会给前端开发人员提供一个技术文档（接口文档），文档中描述了前端需要调取后台的某些接口实现的某些功能，并且标注了请求的地址、请求方式、传递给服务器的内容、以及服务器返回的结果等信息</p><p>这就是前后端分离: 前端开发者不需要考虑后台是基于什么技术怎么实现的，我们只需要按照API文档中提供的信息，去发送请求传递内容即可，这样就可以获取我们需要的数据（API文档就是约束前端和后台的规范文档）</p></li></ol><h2 id="面试题有一万条数据想让其绑定到页面中怎么做好一些"><a class="markdownIt-Anchor" href="#面试题有一万条数据想让其绑定到页面中怎么做好一些"></a> 面试题：有一万条数据，想让其绑定到页面中，怎么做好一些？</h2><ol><li><p>文档碎片: 遍历数据，把对应的数据和结构都添加到文档碎片中，在把文档碎片扎入到页面中（优势∶减少了DOM的回流=&gt;基于字符串拼接也可以)</p></li><li><p>虚拟DOM:类似于REACT框架，基于虚拟DOM以及DIFF算法，也可以优化数据绑定</p></li><li><p><font color="red"><b>其实本质来讲怎么做都不是最好的，我们不应该出现1万条这种大数据量的绑定<br />-&gt;从服务器获取1万条消耗很多时间<br />-&gt;页面渲染1万条也会消耗很多时间</b></font></p></li></ol><h2 id="异步数据加载分页加载"><a class="markdownIt-Anchor" href="#异步数据加载分页加载"></a> 异步数据加载（分页加载）</h2><p>「需要服务器端做支持]</p><ol><li>客户端向服务器端发送一个GET请求，传递给服务器:每页展示的条数，当前要展示的页数等信息，例如传递的是?limit=20&amp;page=1（每页展示20条，当前展示第一页）</li><li>服务器端接受到请求后，在所有的数据中把第一页的20条数据返回给客户端</li><li>当用户下拉加载更多或者点击第二页等页码按钮等时候，重复第一步，把对应要展示的页码传递给服务器，服务器返回对应页码中的数据</li></ol><p>最终实现效果图</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E4%BA%AC%E4%B8%9C%E6%8A%95%E7%A5%A801.png" alt="" /></p><p>通过AJAX请求来获取JSON文件中的数据，只有在登录情况下才能投票和参赛，并且每个人只能投一票，如果没有数据会显示当前没有数据，登录的密码需要用MD5加密等等。</p><h2 id="一-首页后端"><a class="markdownIt-Anchor" href="#一-首页后端"></a> 一、首页后端</h2><h3 id="目录结构"><a class="markdownIt-Anchor" href="#目录结构"></a> 目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-- node_modules       第三方包</span><br><span class="line">|-- public             公共的静态资源</span><br><span class="line">|-- app.js           子应用文件</span><br><span class="line">|-- package.json       包描述文件</span><br><span class="line">|-- package-lock.json  第三方包版本锁定文件（npm 5 以后才有）</span><br><span class="line">|-- router.js          路由接口文件</span><br></pre></td></tr></table></figure><h3 id="路由设计"><a class="markdownIt-Anchor" href="#路由设计"></a> 路由设计</h3><table><thead><tr><th>路径</th><th>方法</th><th>get参数</th><th>post参数</th><th>是否需要登录</th><th>备注</th></tr></thead><tbody><tr><td>/index</td><td>GET</td><td></td><td></td><td></td><td>渲染首页</td></tr><tr><td>/register</td><td>GET</td><td></td><td></td><td></td><td>渲染注册页</td></tr><tr><td>/register</td><td>POST</td><td></td><td>username、phone、password、passwordtrue、descript、avatar、sex</td><td></td><td>处理注册页</td></tr><tr><td>/login</td><td>GET</td><td></td><td></td><td></td><td>渲染登录页</td></tr><tr><td>/login</td><td>POST</td><td></td><td>phone、password</td><td></td><td>处理登录页</td></tr><tr><td>/about</td><td>GET</td><td></td><td></td><td></td><td>渲染个人主页</td></tr><tr><td>/logout</td><td>GET</td><td></td><td></td><td></td><td>退出登录</td></tr><tr><td>/search</td><td>GET</td><td>username</td><td></td><td></td><td>搜索功能</td></tr><tr><td>/vote</td><td>GET</td><td>username</td><td></td><td></td><td>投票功能</td></tr><tr><td>/match</td><td>GET</td><td></td><td></td><td></td><td>渲染参赛页</td></tr></tbody></table><h2 id="项目构建"><a class="markdownIt-Anchor" href="#项目构建"></a> 项目构建</h2><h4 id="appjs-文件的基本配置"><a class="markdownIt-Anchor" href="#appjs-文件的基本配置"></a> app.js 文件的基本配置</h4><ul><li><p>需要引入第三方模块</p><p><a href="https://www.expressjs.com.cn/" target="_blank" rel="noopener"><code>npm i express</code></a></p><p><a href="https://www.npmjs.com/package/ejs" target="_blank" rel="noopener"><code>npm i ejs</code></a></p><p><a href="https://www.npmjs.com/package/cookie-parser" target="_blank" rel="noopener"><code>npm i cookie-parser</code></a></p><p><a href="https://www.npmjs.com/package/body-parser" target="_blank" rel="noopener"><code>npm i body-parser</code></a></p><p><a href="https://www.npmjs.com/package/mongoose" target="_blank" rel="noopener"><code>npm i mongoose</code></a></p><p><a href="https://www.npmjs.com/package/multer" target="_blank" rel="noopener"><code>npm i multer</code></a></p></li><li><p>路由文件（router.js）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">"/"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.send(<span class="string">"Hello World"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></li><li><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入写服务器的第三方模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入用来解析的插件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>);</span><br><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 引入router.js</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">"./router"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板引擎的设置</span></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"html"</span>);</span><br><span class="line">app.set(<span class="string">"views"</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views`</span>);</span><br><span class="line">app.engine(<span class="string">"html"</span>, <span class="built_in">require</span>(<span class="string">"ejs"</span>).renderFile); <span class="comment">// 用ejs模板渲染html</span></span><br><span class="line"><span class="comment">// 加载到没有挂载路径的中间件</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态资源配置</span></span><br><span class="line">app.use(express.static(__dirname + <span class="string">"/public"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用router, router.js文件中的所有路由都可以使用</span></span><br><span class="line">app.use(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数据库和开启服务器</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * localhost - 本地地址</span></span><br><span class="line"><span class="comment"> * jdvotes - mongodb数据库</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">mongoose.connect(</span><br><span class="line">  <span class="string">"mongodb://localhost/jdvotes"</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    useNewUrlParser: <span class="literal">true</span>,</span><br><span class="line">    useUnifiedTopology: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"数据库连接失败"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"数据库连接成功"</span>);</span><br><span class="line">      app.listen(<span class="number">8888</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"服务器开启成功 -- 8888"</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>需要用到MondoDB，所以需要配置以下表结构文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MongoDB数据库模型文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongogose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 通过mongoose定义接口 Schema</span></span><br><span class="line"><span class="keyword">var</span> Schema = mongogose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成表结构</span></span><br><span class="line"><span class="comment">// 操作users表（集合） 定义一个Schema  Schema里面的对象和数据库表里面的字段需要一一对应</span></span><br><span class="line"><span class="keyword">var</span> mySchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  <span class="comment">// name: &#123; type: String, default: "zhangsan" &#125;,</span></span><br><span class="line">  name: <span class="built_in">String</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把Schema导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = mySchema;</span><br></pre></td></tr></table></figure></li><li><p>然后再访问数据库模型</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 引入 schema.js 文件（MongoDB数据库表结构文件）</span></span><br><span class="line"><span class="keyword">const</span> mySchema = <span class="built_in">require</span>(<span class="string">"./schema"</span>);</span><br><span class="line"><span class="comment">// 定义数据库模型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    model里面的第一个参数 要注意：</span></span><br><span class="line"><span class="comment">      1.首字母大写</span></span><br><span class="line"><span class="comment">        2.要和数据库表（集合）名称对应</span></span><br><span class="line"><span class="comment">    这个模型会和模型名称相同的复数的数据库表建立连接 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把这个数据库模型导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">"User"</span>, mySchema);</span><br></pre></td></tr></table></figure></li><li><p>最后在写路由，在对应路由上查询对应的数据返回给页面即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 路由文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入model.js文件（数据库模型文件）</span></span><br><span class="line"><span class="keyword">const</span> USER = <span class="built_in">require</span>(<span class="string">"./model"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页</span></span><br><span class="line">router.get(<span class="string">"/"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  USER.find(&#123;&#125;, (err, docs) =&gt; &#123;</span><br><span class="line">    <span class="comment">// docs.forEach</span></span><br><span class="line">    <span class="comment">// 如果查询成功</span></span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(docs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  res.send(<span class="string">"Hello"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>浏览器访问 <code>127.0.0.1:8888</code> ，得到结果 <code>[ { _id: 5f5ad635994e3f8f4923d1cd, name: 'zhangsan' } ]</code></p></li><li><p>创建数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var i&#x3D;1;i&lt;&#x3D;150;i++)&#123;</span><br><span class="line">db.users.insert(&#123;&quot;id&quot;:i,&quot;name&quot;:&quot;张&quot;+i,&quot;picture&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;extheor&#x2F;images&#x2F;Ajax%E5%9B%BE%E7%89%87&#x2F;man.png&quot;,&quot;phone&quot;:&quot;10377771223&quot;,&quot;sex&quot;:0,&quot;password&quot;:&quot;123456&quot;,&quot;bio&quot;:&quot;Live beautifully, dream passionately, love completely&quot;,&quot;time&quot;:1506090072369,&quot;isMatch&quot;:1,&quot;matchId&quot;:i&lt;10?&quot;00&quot;+i:i&lt;100?&quot;0&quot;+i:i,&quot;slogan&quot;:&quot;你是唯一的，你是非常独特的，你就是你生命中的第一名&quot;,&quot;voteNum&quot;:1&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="二-首页前端"><a class="markdownIt-Anchor" href="#二-首页前端"></a> 二、首页前端</h2><h3 id="首先把首页写出来viewsindexhtml"><a class="markdownIt-Anchor" href="#首先把首页写出来viewsindexhtml"></a> 首先把首页写出来（views/index.html）</h3><blockquote><p>完全手撸的</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myToMacth"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/match"</span>&gt;</span>我要参赛<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">placeholder</span>=<span class="string">"输入用户名查找"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"searchButton"</span> <span class="attr">value</span>=<span class="string">"搜索"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"userul"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> <span class="attr">datas.forEach</span>(<span class="attr">data</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&lt;%= data.phone %&gt;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&lt;%= data.picture %&gt; "</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.username</span> %&gt;</span> | 编号# <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.matchId</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.slogan</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"voteNum"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.voteNum</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>投他一票<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式在这里</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页、登录、注册 */</span></span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#31a5de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 投起来 */</span></span><br><span class="line"><span class="selector-class">.header</span> &gt; <span class="selector-class">.img</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">40%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 我要参赛 */</span></span><br><span class="line"><span class="selector-class">.myToMacth</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">38%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eb713b</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">2px</span> <span class="number">15px</span> <span class="built_in">rgb</span>(<span class="number">90</span>, <span class="number">38</span>, <span class="number">38</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myToMacth</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 搜索 */</span></span><br><span class="line"><span class="selector-class">.search</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">52%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">45%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="comment">/* border: 1px solid #000; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* border-radius: ; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchInput</span>,</span><br><span class="line"><span class="selector-class">.searchButton</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchInput</span> &#123;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.searchButton</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#007ec3</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 列表 */</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.left</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.center</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">156</span>, <span class="number">92</span>, <span class="number">92</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &gt; <span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="comment">/* width: 60px;</span></span><br><span class="line"><span class="comment">  height: 30px; */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#0081cd</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>页面样式如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index01.png" alt="" /></p><ul><li><p>接下来需要把从数据库获取到的数据渲染到HTML页面当中去</p><ul><li><p>从路由文件中获取到数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 路由文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入model.js文件（数据库模型文件）</span></span><br><span class="line"><span class="keyword">const</span> USER = <span class="built_in">require</span>(<span class="string">"./model"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页</span></span><br><span class="line">router.get(<span class="string">"/index"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="comment">// docs.forEach</span></span><br><span class="line">    <span class="comment">// 如果查询成功</span></span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// console.log(datas);</span></span><br><span class="line">      res.render(<span class="string">"index"</span>, &#123;</span><br><span class="line">        <span class="comment">// es6语法：对象解构赋值，</span></span><br><span class="line">        <span class="comment">// 相当于datas:datas</span></span><br><span class="line">        datas,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></li><li><p>渲染到HTML页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myToMacth"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/match"</span>&gt;</span>我要参赛<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">placeholder</span>=<span class="string">"输入用户名查找"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"searchButton"</span> <span class="attr">value</span>=<span class="string">"搜索"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> <span class="attr">datas.forEach</span>(<span class="attr">data</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&lt;%= data.id %&gt;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&lt;%= data.picture %&gt; "</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>张三 | 编号# <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.matchId</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.slogan</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"voteNum"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.voteNum</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>投他一票<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/indexEjs01.png" alt="" /></p></li></ul></li></ul><h2 id="三-注册页前端"><a class="markdownIt-Anchor" href="#三-注册页前端"></a> 三、注册页前端</h2><h3 id="首先把注册页面写出来"><a class="markdownIt-Anchor" href="#首先把注册页面写出来"></a> 首先把注册页面写出来</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/register.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/logout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        用户名：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"username"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"username"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请输入您的真实姓名"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        手机号码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请填写您常用的手机号"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"由6~12位数字和字母组成"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        确认密码：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"passwordtrue"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"introduce"</span>&gt;</span>自我描述：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">          <span class="attr">cols</span>=<span class="string">"54"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">rows</span>=<span class="string">"6"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"限制在10~100字之间"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">minlength</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">maxlength</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"descript"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"descript"</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        上传头像：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"avatar"</span> <span class="attr">name</span>=<span class="string">"avatar"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sex"</span>&gt;</span>性别：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">id</span>=<span class="string">"man"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>男<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">id</span>=<span class="string">"woman"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>女<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交注册信息"</span> <span class="attr">class</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/register.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 投起来 */</span></span><br><span class="line"><span class="selector-class">.header</span> &gt; <span class="selector-class">.img</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#656e73</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">396px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">resize</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span>,</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#woman</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">135px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sex</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span> ~ <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">17px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#woman</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">89px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-class">.submit</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#54abe8</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前端需要把注册信息发送给后端，所以需要用到AJAX</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当提交表单时触发</span></span><br><span class="line">$(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 阻止默认行为</span></span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="comment">//   console.log($("form")[0]);</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    serialize()  FormData  serializeArray()都是序列化表单，实现表单的异步提交</span></span><br><span class="line"><span class="comment">    但是serialize()和serializeArray()都是只能序列化表单中的数据，比如input  select等的数据，</span></span><br><span class="line"><span class="comment">    但是对于文件上传就只能用 FormData。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">new</span> FormData($(<span class="string">"form"</span>)[<span class="number">0</span>]);</span><br><span class="line">  $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">    type: <span class="string">"post"</span>,</span><br><span class="line">    data,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    <span class="comment">// (默认: "application/x-www-form-urlencoded") 发送信息至服务器时内容编码类型。默认值适合大多数情况。如果你明确地传递了一个content-type给 $.ajax() 那么他必定会发送给服务器（即使没有数据要发送）</span></span><br><span class="line">    contentType: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// processData 默认为true，当设置为true的时候,jquery ajax 提交的时候不会序列化 data，而是直接使用data</span></span><br><span class="line">    processData: <span class="literal">false</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (response.code == <span class="string">"200"</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="四-注册页后端"><a class="markdownIt-Anchor" href="#四-注册页后端"></a> 四、注册页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册</span></span><br><span class="line">router.get(<span class="string">"/register"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.render(<span class="string">"register"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 必须写上传文件</span></span><br><span class="line">router.post(<span class="string">"/register"</span>, upload.single(<span class="string">"picture"</span>), (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 获取前端发送过来的注册信息</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username, phone, password, passwordtrue, slogan, sex &#125; = req.body;</span><br><span class="line">  <span class="comment">// console.log(username);</span></span><br><span class="line">  <span class="keyword">var</span> picture;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    picture = req.file.filename;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    picture = <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log(picture);</span></span><br><span class="line">  <span class="keyword">if</span> (password !== passwordtrue) &#123;</span><br><span class="line">    res.send(&#123;</span><br><span class="line">      code: <span class="string">"304"</span>,</span><br><span class="line">      message: <span class="string">"两次密码不一致"</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  USER.findOne(&#123; username &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果查询到username存在，则说明该用户已注册过</span></span><br><span class="line">      <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="comment">// console.log(result); // 查询结果</span></span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">304</span>,</span><br><span class="line">          message: <span class="string">"该用户已存在"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 否则该用户不存在，则添加到表(集合)中去</span></span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"用户注册~~~"</span>);</span><br><span class="line">        <span class="comment">// 如果用户上传了图片</span></span><br><span class="line">        <span class="comment">// 创建一个数据集合(对象)</span></span><br><span class="line">        <span class="keyword">var</span> myUser = <span class="keyword">new</span> USER(&#123;</span><br><span class="line">          username,</span><br><span class="line">          phone,</span><br><span class="line">          password,</span><br><span class="line">          picture,</span><br><span class="line">          slogan,</span><br><span class="line">          <span class="comment">// sex,</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// console.log(myUser);</span></span><br><span class="line">        <span class="comment">// 把这个数据集合插入到表(集合)中</span></span><br><span class="line">        USER.insertMany(myUser)</span><br><span class="line">          .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(result);</span></span><br><span class="line">            <span class="comment">// 插入成功</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">200</span>,</span><br><span class="line">              message: <span class="string">"注册成功"</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(err);</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">304</span>,</span><br><span class="line">              message: <span class="string">"注册失败"</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>页面效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/register01.png" alt="" /></p><p>注册即可，其中用户名为必填项，手机号码为必填项，密码为必填项，确认密码为必填项，性别为必填项</p><p>点击“提交注册信息”即可注册成功，我们会发现在数据库里就多了一条数据，相对而言，首页也就会多出这条数据，如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index02.png" alt="" /></p><h2 id="五-登录页前端"><a class="markdownIt-Anchor" href="#五-登录页前端"></a> 五、登录页前端</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/register.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        手机号码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请填写您常用的手机号"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"由6~12位数字和字母组成"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交登录信息"</span> <span class="attr">class</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/login.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="六-登录页后端"><a class="markdownIt-Anchor" href="#六-登录页后端"></a> 六、登录页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录</span></span><br><span class="line">router.get(<span class="string">"/login"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.render(<span class="string">"login"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">router.post(<span class="string">"/login"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">var</span> &#123; username, phone, password &#125; = req.body;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 去数据库查找phone和password</span></span><br><span class="line">  USER.findOne(&#123; phone, password &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (phone === result.phone &amp;&amp; password === result.password) &#123;</span><br><span class="line">        <span class="comment">// 如果手机号和密码都正确，则登录成功</span></span><br><span class="line">        <span class="keyword">var</span> id = result._id;</span><br><span class="line">        <span class="comment">// console.log(id);</span></span><br><span class="line"></span><br><span class="line">        res.cookie(<span class="string">"phone"</span>, phone);</span><br><span class="line">        res.cookie(<span class="string">"id"</span>, id);</span><br><span class="line"></span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">200</span>,</span><br><span class="line">          message: <span class="string">"登录成功"</span>,</span><br><span class="line">          data: &#123;</span><br><span class="line">            phone,</span><br><span class="line">            id,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">304</span>,</span><br><span class="line">          message: <span class="string">"手机号或密码错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>登录用到了cookie,可以通过用后端发送cookie给客户端，并在客户端存储，然后前端可以通过判断cookie中的phone是否存在，来判断用户是否登录</p><ul><li><p>登录页ajax请求部分</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取后台传送的cookie</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果cookie里的phone存在,则把index页面中的登录换成用户名</span></span><br><span class="line">  <span class="comment">// 想要获取当前手机号,可以使用cookie中的phone</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie); // phone=17692414892; id=j%3A%225f5c9c1f203b5c3b2ca5c27c%22</span></span><br><span class="line">  <span class="comment">// 通过 ; 切割字符串</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")); // ["phone=17692414892", " id=j%3A%225f5c9c1f203b5c3b2ca5c27c%22"]</span></span><br><span class="line">  <span class="comment">// 取第零个 -- 手机号</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")[0]); // phone=17692414892</span></span><br><span class="line">  <span class="comment">// 利用 = 切割字符串</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")[0].split("=")); // ["phone", "17692414892"]</span></span><br><span class="line">  <span class="comment">// 然后再取第一个就可以了</span></span><br><span class="line">  <span class="keyword">var</span> phone = <span class="built_in">document</span>.cookie.split(<span class="string">";"</span>)[<span class="number">0</span>].split(<span class="string">"="</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="comment">// console.log(phone);</span></span><br><span class="line">  <span class="comment">// 对登录a标签进行文本替换,herf地址也换一下，可以换成个人主页</span></span><br><span class="line">  $(<span class="string">".login"</span>).text(phone);</span><br><span class="line">  $(<span class="string">".login"</span>).attr(<span class="string">"href"</span>, <span class="string">"/about"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// about页逻辑</span></span><br><span class="line">  $(<span class="string">".about"</span>).text(phone + <span class="string">"~ 欢迎你"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>顺便就把个人主页写出来了</p><h2 id="七-个人主页前端"><a class="markdownIt-Anchor" href="#七-个人主页前端"></a> 七、个人主页前端</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/about.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/logout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"about"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"seekfocus"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/%E6%B1%82%E5%85%B3%E6%B3%A8.jpg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#31a5de</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#edf1f8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.about</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#edf1f8</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.06</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="八-个人主页后端"><a class="markdownIt-Anchor" href="#八-个人主页后端"></a> 八、个人主页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 个人主页</span></span><br><span class="line">router.get(<span class="string">"/about"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 在数据库中查找到所有的数据进行返回</span></span><br><span class="line">  USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      res.render(<span class="string">"about"</span>, &#123;</span><br><span class="line">        datas,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>点击 手机号</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index03.png" alt="" /></p><p>即可出现以下页面</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/about01.png" alt="" /></p><h2 id="九-退出后端没有前端页面"><a class="markdownIt-Anchor" href="#九-退出后端没有前端页面"></a> 九、退出后端（没有前端页面）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 退出</span></span><br><span class="line">router.get(<span class="string">"/logout"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 清除cookie</span></span><br><span class="line">  res.clearCookie(<span class="string">"phone"</span>);</span><br><span class="line">  res.clearCookie(<span class="string">"id"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重定向</span></span><br><span class="line">  res.writeHead(<span class="number">302</span>, &#123;</span><br><span class="line">    Location: <span class="string">"/index"</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 结束响应过程</span></span><br><span class="line">  <span class="comment">// 用于快速结束没有任何数据的响应</span></span><br><span class="line">  res.end(<span class="string">""</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="十-搜索后端"><a class="markdownIt-Anchor" href="#十-搜索后端"></a> 十、搜索后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搜索</span></span><br><span class="line">router.get(<span class="string">"/search"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 根据id搜索信息</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username &#125; = req.query;</span><br><span class="line">  <span class="comment">// 把前端传递过来的username在数据库进行查找，然后返回结果给前端</span></span><br><span class="line">  <span class="keyword">if</span> (username !== <span class="string">""</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果用户名不为空，则查询对应的用户</span></span><br><span class="line">    USER.find(&#123; username &#125;, (err, datas) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          datas,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">500</span>,</span><br><span class="line">          message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 如果用户名不为空，则查询所有的用户</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          datas,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">500</span>,</span><br><span class="line">          message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>然后前端发送数据给后端，让后端在数据库里查询想要的结果，然后后端在把结果返回给前端，前端只需渲染到页面上即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搜索逻辑</span></span><br><span class="line"><span class="comment">// 按用户名 -- 搜索</span></span><br><span class="line">$(<span class="string">".searchButton"</span>).on(<span class="string">"click"</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果进入到这里说明用户已登录</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取到用户在搜索框输入的用户名</span></span><br><span class="line">    <span class="keyword">var</span> username = &#123;</span><br><span class="line">      username: $(<span class="string">".searchInput"</span>).val(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 发送ajax请求，后端会传给前端数据，让前端进行页面处理</span></span><br><span class="line">    $.ajax(<span class="string">"/search"</span>, &#123;</span><br><span class="line">      type: <span class="string">"get"</span>,</span><br><span class="line">      data: username,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(response.datas);</span></span><br><span class="line">        <span class="keyword">var</span> result = response.datas;</span><br><span class="line">        <span class="comment">// console.log(result[0].username);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (result[<span class="number">0</span>]) &#123;</span><br><span class="line">          <span class="comment">// 如果查询到的结果不为空</span></span><br><span class="line">          <span class="comment">// 先把ul列表清空</span></span><br><span class="line">          $(<span class="string">".userul"</span>).empty();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 循环遍历result</span></span><br><span class="line">          $.each(result, (index, data) =&gt; &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data);</span><br><span class="line">            <span class="keyword">var</span> html = <span class="string">`&lt;li class="<span class="subst">$&#123;data.username&#125;</span>"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="left"&gt;</span></span><br><span class="line"><span class="string">              &lt;img src="<span class="subst">$&#123;data.picture&#125;</span>" alt="" /&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="center"&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;<span class="subst">$&#123;data.username&#125;</span> | 编号# <span class="subst">$&#123;data.matchId&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;<span class="subst">$&#123;data.slogan&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="right"&gt;</span></span><br><span class="line"><span class="string">              &lt;div class="voteNum"&gt;<span class="subst">$&#123;data.voteNum&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;&lt;button&gt;投他一票&lt;/button&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;`</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 然后再把查询到的所有数据都添加到ul列表中</span></span><br><span class="line">            $(<span class="string">".userul"</span>).append(html);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 如果查询到的结果为空</span></span><br><span class="line">          alert(<span class="string">"当前没有该用户"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="comment">//   var username = datas</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 如果进入到这里说明用户未登录</span></span><br><span class="line">    alert(<span class="string">"请先登录！！！"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>注意：该操作必须登录</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD.gif" alt="" /></p></li></ul><h2 id="十一-投票后端"><a class="markdownIt-Anchor" href="#十一-投票后端"></a> 十一、投票后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 投票</span></span><br><span class="line">router.get(<span class="string">"/vote"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 当前端点击投票按钮时获取到前端发送过来的投票数，然后自加</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username &#125; = req.query;</span><br><span class="line">  USER.findOne(&#123; username &#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// 修改数据库中vaotNum的值 -- update</span></span><br><span class="line">      <span class="comment">// console.log(datas); // 从数据库查到的数据集合(对象)</span></span><br><span class="line">      <span class="comment">// 从数据库中修改用户点击的用户的投票数</span></span><br><span class="line">      USER.updateOne(</span><br><span class="line">        &#123; username &#125;,</span><br><span class="line">        &#123; <span class="attr">voteNum</span>: ++datas.voteNum &#125;,</span><br><span class="line">        (err, voteNum) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log("点赞成功");</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">200</span>,</span><br><span class="line">              message: <span class="string">"点赞成功"</span>,</span><br><span class="line">              datas,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"点赞失败"</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>首先是前端点击投票a标签，然后通过Ajax发送给后端，后端接收到数据后，从数据库进行查找，每点击一次投票数（voteNum）加一，然后 后端会把这个结果返回给前端，前端可以使用这个数据，来重新绘制HTML页面</p></li><li><p>前端ajax请求如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 投票</span></span><br><span class="line"><span class="comment">// 因为li标签是动态创建的，所以需要通过事件委托来获取投票按钮</span></span><br><span class="line">$(<span class="string">".userul"</span>).delegate(<span class="string">".vote"</span>, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">var</span> username = $<span class="keyword">this</span>.parents(<span class="string">"li"</span>).attr(<span class="string">"class"</span>);</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">      username,</span><br><span class="line">    &#125;;</span><br><span class="line">    $.ajax(<span class="string">"/vote"</span>, &#123;</span><br><span class="line">      type: <span class="string">"get"</span>,</span><br><span class="line">      data,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(response.datas);</span></span><br><span class="line">        <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// 先获取到数据库中该用户的票数</span></span><br><span class="line">          <span class="keyword">var</span> voteNum = response.datas.voteNum;</span><br><span class="line">          <span class="built_in">console</span>.log(voteNum);</span><br><span class="line">          <span class="comment">// 通过 全局$this 找到voteNum元素</span></span><br><span class="line">          <span class="keyword">var</span> $voteNum = $<span class="keyword">this</span>.parents(<span class="string">".right"</span>).children(<span class="string">".voteNum"</span>);</span><br><span class="line">          <span class="comment">// 然后把voteNum重新绘制到HTML页面即可</span></span><br><span class="line">          $voteNum.text(voteNum);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">"请先登录！！！"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>到这里，基本的投票功能也已经能实现了，如下效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      京东投票项目开发笔记
    
    </summary>
    
    
      <category term="MongoDB" scheme="http://extheor.club/categories/MongoDB/"/>
    
    
      <category term="mongodb" scheme="http://extheor.club/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>京东抽奖案例</title>
    <link href="http://extheor.club/posts/37c547df/index.html"/>
    <id>http://extheor.club/posts/37c547df/index.html</id>
    <published>2020-09-06T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.968Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东抽奖案例"><a class="markdownIt-Anchor" href="#京东抽奖案例"></a> 京东抽奖案例</h1><h2 id="0设计思路"><a class="markdownIt-Anchor" href="#0设计思路"></a> 0.设计思路</h2><p>项目呢是模仿的王者荣耀抽奖界面的一部分。。。</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80%E6%8A%BD%E5%A5%96%E7%95%8C%E9%9D%A2.jpg" alt="" /></p><h2 id="1目录结构"><a class="markdownIt-Anchor" href="#1目录结构"></a> 1.目录结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-- app.js</span><br><span class="line">|-- router.js          路由接口文件</span><br><span class="line">|-- controllers        控制器</span><br><span class="line">|-- models</span><br><span class="line">|-- node_modules       第三方包</span><br><span class="line">|-- package.json       包描述文件</span><br><span class="line">|-- package-lock.json  第三方包版本锁定文件（npm 5 以后才有）</span><br><span class="line">|-- public             公共的静态资源</span><br><span class="line">|-- README.md          项目说明文档</span><br><span class="line">|-- routes</span><br><span class="line">|-- views              存储视图目录</span><br></pre></td></tr></table></figure><h2 id="2项目需求"><a class="markdownIt-Anchor" href="#2项目需求"></a> 2.项目需求</h2><p>本项目包含用户注册、登录以及抽奖等功能：</p><ol><li><p>用户注册功能</p><p>a. 提供手机号验证码注册功能: 用户输入手机号，对应手机号接收验证码</p><p>b.输入完成手机号和验证码之后进入下一步，允许用户输入密码以及确认密码:密码要求12~16位的数字、大小写字母以及符号</p><p>c. 注册成功后显示用户抽奖界面（<font color="red"><b>注</b></font>: 页面不刷新)</p></li><li><p>用户登录功能</p><p>a. 提供手机号和密码、手机号和验证码两种方式登录</p><p>b. 判断如果用户没有注册的话，直接跳转用户注册界面（<font color="red"><b>注</b></font>: 页面不刷新)</p><p>c. 登录成功后显示用户抽奖界面（<font color="red"><b>注</b></font>: 页面不刷新)</p></li><li><p>用户抽奖功能</p><p>a. 每个用户—次拥有三次抽奖机会</p><p>b. 抽奖方式采用转盘方式抽奖:不同奖项的得奖率不同（转盘抽奖可参考百度)</p><p>c. 三次抽奖完成后在界面显示三次抽奖汇总结果</p></li></ol><h2 id="3路由设计"><a class="markdownIt-Anchor" href="#3路由设计"></a> 3.路由设计</h2><p>由于要求是页面不跳转，所以应该是只写一个路由即可</p><table><thead><tr><th>路径</th><th>方法</th><th>get参数</th><th>post参数</th><th>是否需要登录</th><th>备注</th></tr></thead><tbody><tr><td>/</td><td>GET</td><td></td><td></td><td></td><td>渲染首页</td></tr></tbody></table><h2 id="4项目构建"><a class="markdownIt-Anchor" href="#4项目构建"></a> 4.项目构建</h2><ul><li><p>一、先把静态页面写好</p><ul><li><p>HTML完整代码（views/index.html）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>京东抽奖<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/style.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/login.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/main.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注册 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;form action="#" class="register"&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="text" name="username" id="username" /&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="text" name="password" id="password" /&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="submit" /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/form&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 登录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"login"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"phone"</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>Phone<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>PassWord<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          submit</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        共有一圈奖品，是8个</span></span><br><span class="line"><span class="comment">        中间是一个抽奖键</span></span><br><span class="line"><span class="comment">        点击抽奖之后抽奖按键消失，随后弹出3项奖品内容，这是一个蒙层</span></span><br><span class="line"><span class="comment">        有再次抽奖按钮，和确定按钮</span></span><br><span class="line"><span class="comment">            点击再次抽奖按钮可以再次抽奖，点击确定按钮完成抽奖</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_0"</span> <span class="attr">name</span>=<span class="string">"阿古朵"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_1.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_1"</span> <span class="attr">name</span>=<span class="string">"萌芽"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_2.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_2"</span> <span class="attr">name</span>=<span class="string">"蒙恬"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_2"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_3.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_7"</span> <span class="attr">name</span>=<span class="string">"华硕笔记本电脑"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_7"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_4.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span>抽奖<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_3"</span> <span class="attr">name</span>=<span class="string">"运动鞋一双"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_3"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_5.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_6"</span> <span class="attr">name</span>=<span class="string">"摄像机"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_6"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_6.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_5"</span> <span class="attr">name</span>=<span class="string">"联想笔记本电脑"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_5"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_7.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_4"</span> <span class="attr">name</span>=<span class="string">"谢谢惠顾"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 谢谢惠顾 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_4"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_8.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 遮挡抽奖功能的div --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"coverLottery"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 抽奖结果页面 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotteryResult"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 抽奖结果显示框 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"msgbox"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 抽奖结果背景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.9.1/jquery.min.js"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../node_modules/axios/dist/axios.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/axios_default.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/login.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>首页CSS代码（style.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(#<span class="number">141</span>e30, #<span class="number">243</span>b55);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 抽奖样式 */</span></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="comment">/* margin: 50px auto; */</span></span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">40%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">30%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">td</span> &#123;</span><br><span class="line">  <span class="comment">/* border: 1px solid #900; */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.prize</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jpg_</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.coverLottery</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="comment">/* background: red; */</span></span><br><span class="line">  <span class="comment">/* margin: -307px auto; */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">45%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">35%</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#325c8e</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">25px</span> auto;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-class">.jpg_</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">600px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-class">.msgbox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">170</span>, <span class="number">170</span>, <span class="number">73</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">140px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">260px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="comment">/* display: none; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注册样式 */</span></span><br></pre></td></tr></table></figure></li><li><p>登录页CSS样式（login.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 登录样式 */</span></span><br><span class="line"><span class="selector-class">.loginBox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">15px</span> <span class="number">25px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">#03e9f4</span>,</span><br><span class="line">    <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> <span class="number">0</span> <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line1 <span class="number">1s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#submit</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">108px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line1 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line2 <span class="number">1s</span> <span class="number">0.25s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line2 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(right, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line3 <span class="number">1s</span> <span class="number">0.5s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line3 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line4 <span class="number">1s</span> <span class="number">0.75s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line4 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>奖品结果背景特效CSS样式（main.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">61%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">800px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> white;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">animation</span>: run <span class="number">3s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">12deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">24deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> run &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  10% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">560px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后就可以看到，我们的静态页面已经写好了，接下来可以开始写JS逻辑代码了</p></li><li><p>首页的JS代码（index.js）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 全局计时器</span></span><br><span class="line">  <span class="keyword">var</span> drawTimer = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// 全局步数</span></span><br><span class="line">  <span class="keyword">var</span> drawStep = <span class="number">-1</span>;</span><br><span class="line">  <span class="comment">// 全局缓动计时</span></span><br><span class="line">  <span class="keyword">var</span> easeTime = <span class="number">2</span>;</span><br><span class="line">  <span class="comment">// 全局随机奖品(最后停止的位置)</span></span><br><span class="line">  <span class="keyword">var</span> stopPosition = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// 点击按钮的次数</span></span><br><span class="line">  <span class="keyword">var</span> clickNum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//   当我点击按钮时，开始抽奖</span></span><br><span class="line">  $(<span class="string">".button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 点击抽奖之后，禁用抽奖功能</span></span><br><span class="line">    $(<span class="string">".coverLottery"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    <span class="comment">// console.log(clickNum);</span></span><br><span class="line">    <span class="comment">// 声明一个 1~8 的数组,写重复的数来提高此数的概率值</span></span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>];</span><br><span class="line">    <span class="comment">// 0 ~ arr.length-1 的随机数</span></span><br><span class="line">    <span class="keyword">var</span> randomNum = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length);</span><br><span class="line">    stopPosition = arr[randomNum];</span><br><span class="line">    <span class="comment">// console.log(stopPosition);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// easeTime * 100 毫秒后开始抽奖</span></span><br><span class="line">    drawTimer = setTimeout(drawRun, easeTime * <span class="number">100</span>);</span><br><span class="line">    <span class="comment">// 抽三次奖，停止抽奖</span></span><br><span class="line">    <span class="keyword">if</span> (clickNum &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="comment">// 清除计时器，停止抽奖</span></span><br><span class="line">      clearTimeout(drawTimer);</span><br><span class="line">      <span class="comment">// 显示那个中奖页面</span></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">      <span class="comment">// 让奖品不透明</span></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).children().css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">      <span class="comment">// 显示背景特效</span></span><br><span class="line">      $(<span class="string">".main"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clickNum++;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 抽奖游戏滚动函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">drawRun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 抽奖游戏滚动</span></span><br><span class="line">    <span class="keyword">if</span> (drawStep &gt;= <span class="number">40</span> + stopPosition) &#123;</span><br><span class="line">      <span class="comment">// prize为奖品序号(序号从0开始)</span></span><br><span class="line">      <span class="keyword">var</span> prize = drawStep % <span class="number">8</span>;</span><br><span class="line">      $(<span class="string">".jpg_"</span> + prize).css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">      <span class="comment">// 重置drawStep,为下一次的抽奖做准备</span></span><br><span class="line">      <span class="comment">// 让下一次抽奖的位置从上一次抽奖结束的位置开始走</span></span><br><span class="line">      drawStep = stopPosition;</span><br><span class="line">      <span class="comment">// 以防万一，写上 easeTime = 2</span></span><br><span class="line">      easeTime = <span class="number">2</span>;</span><br><span class="line">      <span class="comment">// 提示消息</span></span><br><span class="line">      $(<span class="string">".prize_"</span> + prize).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> prizeName = value.getAttribute(<span class="string">"name"</span>);</span><br><span class="line">        msg(prizeName);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> img = $(<span class="string">".prize_"</span> + prize)</span><br><span class="line">        .children()</span><br><span class="line">        .clone();</span><br><span class="line"></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).append(img);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 清除计时器</span></span><br><span class="line">      clearTimeout(drawTimer);</span><br><span class="line">      <span class="comment">// 返回结果</span></span><br><span class="line"></span><br><span class="line">      $(<span class="string">".button"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (drawStep &gt;= <span class="number">36</span> + stopPosition) &#123;</span><br><span class="line">      <span class="comment">// 最后四个的时候开始缓动</span></span><br><span class="line">      easeTime += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (easeTime &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">        easeTime = <span class="number">2</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      easeTime--;</span><br><span class="line">    &#125;</span><br><span class="line">    drawStep++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使每个方格在变成不透明之后再变成半透明</span></span><br><span class="line">    $(<span class="string">".jpg_"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// console.log(value);</span></span><br><span class="line">      $(<span class="keyword">this</span>).css(<span class="string">"opacity"</span>, <span class="string">"0.5"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 每次抽奖时的不透明效果</span></span><br><span class="line">    $(<span class="string">".jpg_"</span> + (drawStep % <span class="number">8</span>)).css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">    <span class="comment">// 延迟递归</span></span><br><span class="line">    <span class="comment">// 每 easeTime * 70 的时间走一格</span></span><br><span class="line">    drawTimer = setTimeout(drawRun, easeTime * <span class="number">70</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 消息提示函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">msg</span>(<span class="params">prizeName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> say = <span class="string">"恭喜您抽中了奖品"</span> + prizeName;</span><br><span class="line">    <span class="keyword">var</span> $pElement = $(<span class="string">`&lt;p&gt;<span class="subst">$&#123;say&#125;</span>&lt;p&gt;`</span>);</span><br><span class="line">    $(<span class="string">".msgbox"</span>).append($pElement);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>登录页的JS代码（login.js）</p><ul><li><p>首先需要写一个json文件来存储用户信息</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"zhangsan"</span>,</span><br><span class="line">  <span class="attr">"phone"</span>: <span class="string">"17692414892"</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">  <span class="attr">"msg"</span>: <span class="string">"登录成功"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#login"</span>).bind(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 阻止默认行为</span></span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="comment">// 表单序列化 - 根据表单默认同步提交获取数据的方式</span></span><br><span class="line">  <span class="keyword">var</span> data = $(<span class="string">"#login"</span>).serialize();</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通过异步交互提交表单</span></span><br><span class="line">  <span class="comment">// 因为我在 axios_default.js 中写了baseURL，所以可以直接写/data/login.json</span></span><br><span class="line">  axios.get(<span class="string">"/data/login.json"</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">    <span class="comment">// 获取到json文件中的phone和password的值</span></span><br><span class="line">    <span class="keyword">var</span> phoneJson = response.phone;</span><br><span class="line">    <span class="keyword">var</span> passwordJson = response.password;</span><br><span class="line">    <span class="comment">// console.log(phoneJson, passwordJson);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取到用户输入的phone和password的值</span></span><br><span class="line">    <span class="keyword">var</span> phoneInput = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> passwordInput = $(<span class="string">"#password"</span>).val();</span><br><span class="line">    <span class="comment">// console.log(phoneInput, passwordInput);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果用户输入的 phone和password都一样，那么跳转到抽奖页面（页面不刷新）</span></span><br><span class="line">    <span class="keyword">if</span> (phoneInput === phoneJson &amp;&amp; passwordInput === passwordJson) &#123;</span><br><span class="line">      <span class="comment">// 登录页面隐藏</span></span><br><span class="line">      $(<span class="string">".loginBox"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">      <span class="comment">// 抽奖页面显示</span></span><br><span class="line">      $(<span class="string">"table"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 提示错误信息，可以改成页面</span></span><br><span class="line">      alert(<span class="string">"手机号或密码错误"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>中奖结果背景特效JS代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> main = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"main"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; <span class="number">60</span>; x++) &#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="built_in">document</span>.createElement(<span class="string">"i"</span>);</span><br><span class="line">  main.appendChild(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> is = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"i"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; is.length; i++) &#123;</span><br><span class="line">  is[i].style.transform = <span class="string">`rotate(<span class="subst">$&#123;i * <span class="number">12</span>&#125;</span>deg) translateX(80px)`</span>;</span><br><span class="line">  is[i].style.animationDelay = <span class="string">`<span class="subst">$&#123;i * <span class="number">0.05</span>&#125;</span>s`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>二、写后台代码</p><ul><li><p>首先先创建一个服务器</p><ul><li>安装第三方库</li><li><code>npm i axios</code></li><li><code>npm i express</code></li><li><code>npm i ejs</code></li></ul><p>router.js - 把所有的路由都放在这个文件里面了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入express第三方模块，用来写服务器</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// router路由对象</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写路由</span></span><br><span class="line">router.get(<span class="string">"/"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">"index"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">"/login"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">"666"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>app.js代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入express第三方模块，用来写服务器</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入path内置模块，用来获取文件路径</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">// 引入router.js文件（自己写的路由文件）</span></span><br><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">"./router"</span>);</span><br><span class="line"><span class="comment">// 创建一个服务器</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板引擎设置（ejs模板引擎）</span></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"html"</span>);</span><br><span class="line">app.set(<span class="string">"views"</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views`</span>);</span><br><span class="line">app.engine(<span class="string">"html"</span>, <span class="built_in">require</span>(<span class="string">"ejs"</span>).renderFile); <span class="comment">// 用ejs模板渲染html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log("__dirname: ", __dirname);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把文件暴露出去，使每个文件都能访问到暴露出去的文件</span></span><br><span class="line"><span class="comment">// 使用"/public"作为前缀来加载public文件夹下的文件</span></span><br><span class="line">app.use(<span class="string">"/public"</span>, express.static(path.join(__dirname, <span class="string">"./public/"</span>)));</span><br><span class="line"><span class="comment">// 使用"/node_modules"作为前缀来加载node_modules文件夹下的文件</span></span><br><span class="line">app.use(</span><br><span class="line">  <span class="string">"/node_modules"</span>,</span><br><span class="line">  express.static(path.join(__dirname, <span class="string">"./node_modules/"</span>))</span><br><span class="line">);</span><br><span class="line"><span class="comment">// 使用"/data"作为前缀来加载data文件夹下的文件</span></span><br><span class="line">app.use(<span class="string">"/data"</span>, express.static(path.join(__dirname, <span class="string">"./data/"</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把路由挂载到 app 中</span></span><br><span class="line"><span class="comment">//router路由对象中的路由都会匹配到</span></span><br><span class="line">app.use(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听3000端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"服务器开启成功了 -- 3000"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>我写了一个配置默认的设置的文件，可以在 <code>axios.defaults.xxx</code> 中进行配置</p></li></ul><p>axios_default.js文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认配置</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> axios !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  axios.defaults.baseURL = <span class="string">"http://127.0.0.1:3000"</span>;</span><br><span class="line">  axios.defaults.withCredentials = <span class="literal">true</span>; <span class="comment">//=&gt; 允许跨域请求</span></span><br><span class="line">  axios.defaults.transformRequest = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">``</span>;</span><br><span class="line">    <span class="keyword">if</span> (data &amp;&amp; <span class="keyword">typeof</span> data === <span class="string">"object"</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (data.hasOwnProperty(attr)) &#123;</span><br><span class="line">          str += <span class="string">`<span class="subst">$&#123;attr&#125;</span>=<span class="subst">$&#123;data[attr]&#125;</span>&amp;`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.substring(<span class="number">0</span>, str.length - <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  axios.defaults.headers[<span class="string">"Contet-Type"</span>] = <span class="string">"x-www-form-urlencoded"</span>;</span><br><span class="line">  axios.interceptors.response.use(<span class="function">(<span class="params">result</span>) =&gt;</span> result.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在浏览器输入 <code>127.0.0.1:3000</code> ，可以发现，我们已经可以成功启动服务了，并且能够访问到我写的网页了</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E4%BA%AC%E4%B8%9C%E6%8A%BD%E5%A5%96%E4%BA%8C.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      京东抽奖案例
    
    </summary>
    
    
      <category term="Ajax" scheme="http://extheor.club/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="http://extheor.club/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>axios中文文档</title>
    <link href="http://extheor.club/posts/dc94f8a1/index.html"/>
    <id>http://extheor.club/posts/dc94f8a1/index.html</id>
    <published>2020-09-06T02:31:41.000Z</published>
    <updated>2020-09-13T06:37:36.956Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="axios中文文档"><a class="markdownIt-Anchor" href="#axios中文文档"></a> axios中文文档</h1><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>使用 npm:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure><p>使用 bower:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure><p>使用 cdn:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;axios&#x2F;dist&#x2F;axios.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h2 id="案例"><a class="markdownIt-Anchor" href="#案例"></a> 案例</h2><p>执行 <code>GET</code> 请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 为给定 ID 的 user 创建请求</span><br><span class="line">axios.get(&#39;&#x2F;user?ID&#x3D;12345&#39;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 上面的请求也可以这样做</span><br><span class="line">axios.get(&#39;&#x2F;user&#39;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>执行 <code>POST</code> 请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#39;&#x2F;user&#39;, &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;,</span><br><span class="line">    lastName: &#39;Flintstone&#39;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>执行多个并发请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#39;&#x2F;user&#x2F;12345&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#39;&#x2F;user&#x2F;12345&#x2F;permissions&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    &#x2F;&#x2F; 两个请求现在都执行完成</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure><h2 id="axios-api"><a class="markdownIt-Anchor" href="#axios-api"></a> axios API</h2><p>可以通过向 <code>axios</code> 传递相关配置来创建请求</p><h5 id="axiosconfig"><a class="markdownIt-Anchor" href="#axiosconfig"></a> axios(config)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 发送 POST 请求</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &#39;post&#39;,</span><br><span class="line">  url: &#39;&#x2F;user&#x2F;12345&#39;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;,</span><br><span class="line">    lastName: &#39;Flintstone&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F; 获取远端图片</span><br><span class="line">axios(&#123;</span><br><span class="line">  method:&#39;get&#39;,</span><br><span class="line">  url:&#39;http:&#x2F;&#x2F;bit.ly&#x2F;2mTM3nY&#39;,</span><br><span class="line">  responseType:&#39;stream&#39;</span><br><span class="line">&#125;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">  response.data.pipe(fs.createWriteStream(&#39;ada_lovelace.jpg&#39;))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="axiosurl-config"><a class="markdownIt-Anchor" href="#axiosurl-config"></a> axios(url[, config])</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 发送 GET 请求（默认的方法）</span><br><span class="line">axios(&#39;&#x2F;user&#x2F;12345&#39;);</span><br></pre></td></tr></table></figure><h3 id="请求方法的别名"><a class="markdownIt-Anchor" href="#请求方法的别名"></a> 请求方法的别名</h3><p>为方便起见，为所有支持的请求方法提供了别名</p><h5 id="axiosrequestconfig"><a class="markdownIt-Anchor" href="#axiosrequestconfig"></a> axios.request(config)</h5><h5 id="axiosgeturl-config"><a class="markdownIt-Anchor" href="#axiosgeturl-config"></a> axios.get(url[, config])</h5><h5 id="axiosdeleteurl-config"><a class="markdownIt-Anchor" href="#axiosdeleteurl-config"></a> axios.delete(url[, config])</h5><h5 id="axiosheadurl-config"><a class="markdownIt-Anchor" href="#axiosheadurl-config"></a> axios.head(url[, config])</h5><h5 id="axiosoptionsurl-config"><a class="markdownIt-Anchor" href="#axiosoptionsurl-config"></a> axios.options(url[, config])</h5><h5 id="axiosposturl-data-config"><a class="markdownIt-Anchor" href="#axiosposturl-data-config"></a> axios.post(url[, data[, config]])</h5><h5 id="axiosputurl-data-config"><a class="markdownIt-Anchor" href="#axiosputurl-data-config"></a> axios.put(url[, data[, config]])</h5><h5 id="axiospatchurl-data-config"><a class="markdownIt-Anchor" href="#axiospatchurl-data-config"></a> axios.patch(url[, data[, config]])</h5><h6 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h6><p>在使用别名方法时， <code>url</code>、<code>method</code>、<code>data</code> 这些属性都不必在配置中指定。</p><h3 id="并发"><a class="markdownIt-Anchor" href="#并发"></a> 并发</h3><p>处理并发请求的助手函数</p><h5 id="axiosalliterable"><a class="markdownIt-Anchor" href="#axiosalliterable"></a> axios.all(iterable)</h5><h5 id="axiosspreadcallback"><a class="markdownIt-Anchor" href="#axiosspreadcallback"></a> axios.spread(callback)</h5><h3 id="创建实例"><a class="markdownIt-Anchor" href="#创建实例"></a> 创建实例</h3><p>可以使用自定义配置新建一个 axios 实例</p><h5 id="axioscreateconfig"><a class="markdownIt-Anchor" href="#axioscreateconfig"></a> axios.create([config])</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const instance &#x3D; axios.create(&#123;</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;some-domain.com&#x2F;api&#x2F;&#39;,</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  headers: &#123;&#39;X-Custom-Header&#39;: &#39;foobar&#39;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="实例方法"><a class="markdownIt-Anchor" href="#实例方法"></a> 实例方法</h3><p>以下是可用的实例方法。指定的配置将与实例的配置合并。</p><h5 id="axiosrequestconfig-2"><a class="markdownIt-Anchor" href="#axiosrequestconfig-2"></a> axios#request(config)</h5><h5 id="axiosgeturl-config-2"><a class="markdownIt-Anchor" href="#axiosgeturl-config-2"></a> axios#get(url[, config])</h5><h5 id="axiosdeleteurl-config-2"><a class="markdownIt-Anchor" href="#axiosdeleteurl-config-2"></a> axios#delete(url[, config])</h5><h5 id="axiosheadurl-config-2"><a class="markdownIt-Anchor" href="#axiosheadurl-config-2"></a> axios#head(url[, config])</h5><h5 id="axiosoptionsurl-config-2"><a class="markdownIt-Anchor" href="#axiosoptionsurl-config-2"></a> axios#options(url[, config])</h5><h5 id="axiosposturl-data-config-2"><a class="markdownIt-Anchor" href="#axiosposturl-data-config-2"></a> axios#post(url[, data[, config]])</h5><h5 id="axiosputurl-data-config-2"><a class="markdownIt-Anchor" href="#axiosputurl-data-config-2"></a> axios#put(url[, data[, config]])</h5><h5 id="axiospatchurl-data-config-2"><a class="markdownIt-Anchor" href="#axiospatchurl-data-config-2"></a> axios#patch(url[, data[, config]])</h5><h2 id="请求配置"><a class="markdownIt-Anchor" href="#请求配置"></a> 请求配置</h2><p>这些是创建请求时可以用的配置选项。只有 <code>url</code> 是必需的。如果没有指定 <code>method</code>，请求将默认使用 <code>get</code> 方法。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &#x2F;&#x2F; &#96;url&#96; 是用于请求的服务器 URL</span><br><span class="line">  url: &#39;&#x2F;user&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;method&#96; 是创建请求时使用的方法</span><br><span class="line">  method: &#39;get&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;baseURL&#96; 将自动加在 &#96;url&#96; 前面，除非 &#96;url&#96; 是一个绝对 URL。</span><br><span class="line">  &#x2F;&#x2F; 它可以通过设置一个 &#96;baseURL&#96; 便于为 axios 实例的方法传递相对 URL</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;some-domain.com&#x2F;api&#x2F;&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;transformRequest&#96; 允许在向服务器发送前，修改请求数据</span><br><span class="line">  &#x2F;&#x2F; 只能用在 &#39;PUT&#39;, &#39;POST&#39; 和 &#39;PATCH&#39; 这几个请求方法</span><br><span class="line">  &#x2F;&#x2F; 后面数组中的函数必须返回一个字符串，或 ArrayBuffer，或 Stream</span><br><span class="line">  transformRequest: [function (data, headers) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对 data 进行任意转换处理</span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;transformResponse&#96; 在传递给 then&#x2F;catch 前，允许修改响应数据</span><br><span class="line">  transformResponse: [function (data) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对 data 进行任意转换处理</span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;headers&#96; 是即将被发送的自定义请求头</span><br><span class="line">  headers: &#123;&#39;X-Requested-With&#39;: &#39;XMLHttpRequest&#39;&#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;params&#96; 是即将与请求一起发送的 URL 参数</span><br><span class="line">  &#x2F;&#x2F; 必须是一个无格式对象(plain object)或 URLSearchParams 对象</span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: 12345</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;paramsSerializer&#96; 是一个负责 &#96;params&#96; 序列化的函数</span><br><span class="line">  &#x2F;&#x2F; (e.g. https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;qs, http:&#x2F;&#x2F;api.jquery.com&#x2F;jquery.param&#x2F;)</span><br><span class="line">  paramsSerializer: function(params) &#123;</span><br><span class="line">    return Qs.stringify(params, &#123;arrayFormat: &#39;brackets&#39;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;data&#96; 是作为请求主体被发送的数据</span><br><span class="line">  &#x2F;&#x2F; 只适用于这些请求方法 &#39;PUT&#39;, &#39;POST&#39;, 和 &#39;PATCH&#39;</span><br><span class="line">  &#x2F;&#x2F; 在没有设置 &#96;transformRequest&#96; 时，必须是以下类型之一：</span><br><span class="line">  &#x2F;&#x2F; - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span><br><span class="line">  &#x2F;&#x2F; - 浏览器专属：FormData, File, Blob</span><br><span class="line">  &#x2F;&#x2F; - Node 专属： Stream</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;timeout&#96; 指定请求超时的毫秒数(0 表示无超时时间)</span><br><span class="line">  &#x2F;&#x2F; 如果请求话费了超过 &#96;timeout&#96; 的时间，请求将被中断</span><br><span class="line">  timeout: 1000,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;withCredentials&#96; 表示跨域请求时是否需要使用凭证</span><br><span class="line">  withCredentials: false, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;adapter&#96; 允许自定义处理请求，以使测试更轻松</span><br><span class="line">  &#x2F;&#x2F; 返回一个 promise 并应用一个有效的响应 (查阅 [response docs](#response-api)).</span><br><span class="line">  adapter: function (config) &#123;</span><br><span class="line">    &#x2F;* ... *&#x2F;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> &#x2F;&#x2F; &#96;auth&#96; 表示应该使用 HTTP 基础验证，并提供凭据</span><br><span class="line">  &#x2F;&#x2F; 这将设置一个 &#96;Authorization&#96; 头，覆写掉现有的任意使用 &#96;headers&#96; 设置的自定义 &#96;Authorization&#96;头</span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: &#39;janedoe&#39;,</span><br><span class="line">    password: &#39;s00pers3cret&#39;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;responseType&#96; 表示服务器响应的数据类型，可以是 &#39;arraybuffer&#39;, &#39;blob&#39;, &#39;document&#39;, &#39;json&#39;, &#39;text&#39;, &#39;stream&#39;</span><br><span class="line">  responseType: &#39;json&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;responseEncoding&#96; indicates encoding to use for decoding responses</span><br><span class="line">  &#x2F;&#x2F; Note: Ignored for &#96;responseType&#96; of &#39;stream&#39; or client-side requests</span><br><span class="line">  responseEncoding: &#39;utf8&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;xsrfCookieName&#96; 是用作 xsrf token 的值的cookie的名称</span><br><span class="line">  xsrfCookieName: &#39;XSRF-TOKEN&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;xsrfHeaderName&#96; is the name of the http header that carries the xsrf token value</span><br><span class="line">  xsrfHeaderName: &#39;X-XSRF-TOKEN&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;onUploadProgress&#96; 允许为上传处理进度事件</span><br><span class="line">  onUploadProgress: function (progressEvent) &#123;</span><br><span class="line">    &#x2F;&#x2F; Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;onDownloadProgress&#96; 允许为下载处理进度事件</span><br><span class="line">  onDownloadProgress: function (progressEvent) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对原生进度事件的处理</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;maxContentLength&#96; 定义允许的响应内容的最大尺寸</span><br><span class="line">  maxContentLength: 2000,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;validateStatus&#96; 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise 。如果 &#96;validateStatus&#96; 返回 &#96;true&#96; (或者设置为 &#96;null&#96; 或 &#96;undefined&#96;)，promise 将被 resolve; 否则，promise 将被 rejecte</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &gt;&#x3D; 200 &amp;&amp; status &lt; 300; &#x2F;&#x2F; default</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;maxRedirects&#96; 定义在 node.js 中 follow 的最大重定向数目</span><br><span class="line">  &#x2F;&#x2F; 如果设置为0，将不会 follow 任何重定向</span><br><span class="line">  maxRedirects: 5, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;socketPath&#96; defines a UNIX Socket to be used in node.js.</span><br><span class="line">  &#x2F;&#x2F; e.g. &#39;&#x2F;var&#x2F;run&#x2F;docker.sock&#39; to send requests to the docker daemon.</span><br><span class="line">  &#x2F;&#x2F; Only either &#96;socketPath&#96; or &#96;proxy&#96; can be specified.</span><br><span class="line">  &#x2F;&#x2F; If both are specified, &#96;socketPath&#96; is used.</span><br><span class="line">  socketPath: null, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;httpAgent&#96; 和 &#96;httpsAgent&#96; 分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理。允许像这样配置选项：</span><br><span class="line">  &#x2F;&#x2F; &#96;keepAlive&#96; 默认没有启用</span><br><span class="line">  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line">  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#39;proxy&#39; 定义代理服务器的主机名称和端口</span><br><span class="line">  &#x2F;&#x2F; &#96;auth&#96; 表示 HTTP 基础验证应当用于连接代理，并提供凭据</span><br><span class="line">  &#x2F;&#x2F; 这将会设置一个 &#96;Proxy-Authorization&#96; 头，覆写掉已有的通过使用 &#96;header&#96; 设置的自定义 &#96;Proxy-Authorization&#96; 头。</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: &#39;127.0.0.1&#39;,</span><br><span class="line">    port: 9000,</span><br><span class="line">    auth: &#123;</span><br><span class="line">      username: &#39;mikeymike&#39;,</span><br><span class="line">      password: &#39;rapunz3l&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;cancelToken&#96; 指定用于取消请求的 cancel token</span><br><span class="line">  &#x2F;&#x2F; （查看后面的 Cancellation 这节了解更多）</span><br><span class="line">  cancelToken: new CancelToken(function (cancel) &#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="响应结构"><a class="markdownIt-Anchor" href="#响应结构"></a> 响应结构</h2><p>某个请求的响应包含以下信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x2F;&#x2F; &#96;data&#96; 由服务器提供的响应</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;status&#96; 来自服务器响应的 HTTP 状态码</span><br><span class="line">  status: 200,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;statusText&#96; 来自服务器响应的 HTTP 状态信息</span><br><span class="line">  statusText: &#39;OK&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;headers&#96; 服务器响应的头</span><br><span class="line">  headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;config&#96; 是为请求提供的配置信息</span><br><span class="line">  config: &#123;&#125;,</span><br><span class="line"> &#x2F;&#x2F; &#39;request&#39;</span><br><span class="line">  &#x2F;&#x2F; &#96;request&#96; is the request that generated this response</span><br><span class="line">  &#x2F;&#x2F; It is the last ClientRequest instance in node.js (in redirects)</span><br><span class="line">  &#x2F;&#x2F; and an XMLHttpRequest instance the browser</span><br><span class="line">  request: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 <code>then</code> 时，你将接收下面这样的响应 :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>在使用 <code>catch</code> 时，或传递 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" target="_blank" rel="noopener">rejection callback</a> 作为 <code>then</code> 的第二个参数时，响应可以通过 <code>error</code> 对象可被使用，正如在<a href="https://www.kancloud.cn/yunye/axios/234845#handling-errors" target="_blank" rel="noopener">错误处理</a>这一节所讲。</p><h2 id="配置默认值"><a class="markdownIt-Anchor" href="#配置默认值"></a> 配置默认值</h2><p>你可以指定将被用在各个请求的配置默认值</p><h3 id="全局的-axios-默认值"><a class="markdownIt-Anchor" href="#全局的-axios-默认值"></a> 全局的 axios 默认值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL &#x3D; &#39;https:&#x2F;&#x2F;api.example.com&#39;;</span><br><span class="line">axios.defaults.headers.common[&#39;Authorization&#39;] &#x3D; AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&#39;Content-Type&#39;] &#x3D; &#39;application&#x2F;x-www-form-urlencoded&#39;;</span><br></pre></td></tr></table></figure><h3 id="自定义实例默认值"><a class="markdownIt-Anchor" href="#自定义实例默认值"></a> 自定义实例默认值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Set config defaults when creating the instance</span><br><span class="line">const instance &#x3D; axios.create(&#123;</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;api.example.com&#39;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Alter defaults after instance has been created</span><br><span class="line">instance.defaults.headers.common[&#39;Authorization&#39;] &#x3D; AUTH_TOKEN;</span><br></pre></td></tr></table></figure><h3 id="配置的优先顺序"><a class="markdownIt-Anchor" href="#配置的优先顺序"></a> 配置的优先顺序</h3><p>配置会以一个优先顺序进行合并。这个顺序是：在 <code>lib/defaults.js</code> 找到的库的默认值，然后是实例的 <code>defaults</code> 属性，最后是请求的 <code>config</code> 参数。后者将优先于前者。这里是一个例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 使用由库提供的配置的默认值来创建实例</span><br><span class="line">&#x2F;&#x2F; 此时超时配置的默认值是 &#96;0&#96;</span><br><span class="line">var instance &#x3D; axios.create();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 覆写库的超时默认值</span><br><span class="line">&#x2F;&#x2F; 现在，在超时前，所有请求都会等待 2.5 秒</span><br><span class="line">instance.defaults.timeout &#x3D; 2500;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 为已知需要花费很长时间的请求覆写超时设置</span><br><span class="line">instance.get(&#39;&#x2F;longRequest&#39;, &#123;</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="拦截器"><a class="markdownIt-Anchor" href="#拦截器"></a> 拦截器</h2><p>在请求或响应被 <code>then</code> 或 <code>catch</code> 处理前拦截它们。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 添加请求拦截器</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">    &#x2F;&#x2F; 在发送请求之前做些什么</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对请求错误做些什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 添加响应拦截器</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对响应数据做点什么</span><br><span class="line">    return response;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对响应错误做点什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>如果你想在稍后移除拦截器，可以这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myInterceptor &#x3D; axios.interceptors.request.use(function () &#123;&#x2F;*...*&#x2F;&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure><p>可以为自定义 axios 实例添加拦截器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const instance &#x3D; axios.create();</span><br><span class="line">instance.interceptors.request.use(function () &#123;&#x2F;*...*&#x2F;&#125;);</span><br></pre></td></tr></table></figure><h2 id="错误处理"><a class="markdownIt-Anchor" href="#错误处理"></a> 错误处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">      &#x2F;&#x2F; The request was made and the server responded with a status code</span><br><span class="line">      &#x2F;&#x2F; that falls out of the range of 2xx</span><br><span class="line">      console.log(error.response.data);</span><br><span class="line">      console.log(error.response.status);</span><br><span class="line">      console.log(error.response.headers);</span><br><span class="line">    &#125; else if (error.request) &#123;</span><br><span class="line">      &#x2F;&#x2F; The request was made but no response was received</span><br><span class="line">      &#x2F;&#x2F; &#96;error.request&#96; is an instance of XMLHttpRequest in the browser and an instance of</span><br><span class="line">      &#x2F;&#x2F; http.ClientRequest in node.js</span><br><span class="line">      console.log(error.request);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      &#x2F;&#x2F; Something happened in setting up the request that triggered an Error</span><br><span class="line">      console.log(&#39;Error&#39;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>Y可以使用 <code>validateStatus</code> 配置选项定义一个自定义 HTTP 状态码的错误范围。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &lt; 500; &#x2F;&#x2F; Reject only if the status code is greater than or equal to 500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="取消"><a class="markdownIt-Anchor" href="#取消"></a> 取消</h2><p>使用 <em>cancel token</em> 取消请求</p><blockquote><p>Axios 的 cancel token API 基于<a href="https://github.com/tc39/proposal-cancelable-promises" target="_blank" rel="noopener">cancelable promises proposal</a>，它还处于第一阶段。</p></blockquote><p>可以使用 <code>CancelToken.source</code> 工厂方法创建 cancel token，像这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken &#x3D; axios.CancelToken;</span><br><span class="line">const source &#x3D; CancelToken.source();</span><br><span class="line"></span><br><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;).catch(function(thrown) &#123;</span><br><span class="line">  if (axios.isCancel(thrown)) &#123;</span><br><span class="line">    console.log(&#39;Request canceled&#39;, thrown.message);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">     &#x2F;&#x2F; 处理错误</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">axios.post(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  name: &#39;new name&#39;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 取消请求（message 参数是可选的）</span><br><span class="line">source.cancel(&#39;Operation canceled by the user.&#39;);</span><br></pre></td></tr></table></figure><p>还可以通过传递一个 executor 函数到 <code>CancelToken</code> 的构造函数来创建 cancel token：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken &#x3D; axios.CancelToken;</span><br><span class="line">let cancel;</span><br><span class="line"></span><br><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  cancelToken: new CancelToken(function executor(c) &#123;</span><br><span class="line">    &#x2F;&#x2F; executor 函数接收一个 cancel 函数作为参数</span><br><span class="line">    cancel &#x3D; c;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; cancel the request</span><br><span class="line">cancel();</span><br></pre></td></tr></table></figure><blockquote><p>注意: 可以使用同一个 cancel token 取消多个请求</p></blockquote><h2 id="使用-applicationx-www-form-urlencoded-format"><a class="markdownIt-Anchor" href="#使用-applicationx-www-form-urlencoded-format"></a> 使用 application/x-www-form-urlencoded format</h2><p>默认情况下，axios将JavaScript对象序列化为JSON。 要以application / x-www-form-urlencoded格式发送数据，您可以使用以下选项之一。</p><h3 id="浏览器"><a class="markdownIt-Anchor" href="#浏览器"></a> 浏览器</h3><p>在浏览器中，您可以使用URLSearchParams API，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const params &#x3D; new URLSearchParams();</span><br><span class="line">params.append(&#39;param1&#39;, &#39;value1&#39;);</span><br><span class="line">params.append(&#39;param2&#39;, &#39;value2&#39;);</span><br><span class="line">axios.post(&#39;&#x2F;foo&#39;, params);</span><br></pre></td></tr></table></figure><blockquote><p>请注意，所有浏览器都不支持URLSearchParams（<a href="http://xn--caniuse-1g3ln192bq9ua.com" target="_blank" rel="noopener">请参阅caniuse.com</a>），但可以使用polyfill（确保填充全局环境）。</p></blockquote><p>或者，您可以使用qs库编码数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const qs &#x3D; require(&#39;qs&#39;);</span><br><span class="line">axios.post(&#39;&#x2F;foo&#39;, qs.stringify(&#123; &#39;bar&#39;: 123 &#125;));</span><br></pre></td></tr></table></figure><p>或者以另一种方式（ES6），</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import qs from &#39;qs&#39;;</span><br><span class="line">const data &#x3D; &#123; &#39;bar&#39;: 123 &#125;;</span><br><span class="line">const options &#x3D; &#123;</span><br><span class="line">  method: &#39;POST&#39;,</span><br><span class="line">  headers: &#123; &#39;content-type&#39;: &#39;application&#x2F;x-www-form-urlencoded&#39; &#125;,</span><br><span class="line">  data: qs.stringify(data),</span><br><span class="line">  url,</span><br><span class="line">&#125;;</span><br><span class="line">axios(options);</span><br></pre></td></tr></table></figure><h3 id="nodejs"><a class="markdownIt-Anchor" href="#nodejs"></a> Node.js</h3><p>在node.js中，您可以使用querystring模块，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const querystring &#x3D; require(&#39;querystring&#39;);</span><br><span class="line">axios.post(&#39;http:&#x2F;&#x2F;something.com&#x2F;&#39;, querystring.stringify(&#123; foo: &#39;bar&#39; &#125;));</span><br></pre></td></tr></table></figure><p>您也可以使用qs库。</p><h2 id="semver"><a class="markdownIt-Anchor" href="#semver"></a> Semver</h2><p>在axios达到1.0版本之前，破坏性更改将以新的次要版本发布。 例如0.5.1和0.5.4将具有相同的API，但0.6.0将具有重大变化。</p><h2 id="promises"><a class="markdownIt-Anchor" href="#promises"></a> Promises</h2><p>axios 依赖原生的 ES6 Promise 实现而<a href="http://caniuse.com/promises" target="_blank" rel="noopener">被支持</a>. 如果你的环境不支持 ES6 Promise，你可以使用 <a href="https://github.com/jakearchibald/es6-promise" target="_blank" rel="noopener">polyfill</a>.</p><h2 id="typescript"><a class="markdownIt-Anchor" href="#typescript"></a> TypeScript</h2><p>axios包括TypeScript定义。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#39;axios&#39;;</span><br><span class="line">axios.get(&#39;&#x2F;user?ID&#x3D;12345&#39;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      axios中文文档
    
    </summary>
    
    
      <category term="Ajax" scheme="http://extheor.club/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="http://extheor.club/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>axios的请求合并以及参数配置</title>
    <link href="http://extheor.club/posts/12d95a5e/index.html"/>
    <id>http://extheor.club/posts/12d95a5e/index.html</id>
    <published>2020-09-05T12:50:41.000Z</published>
    <updated>2020-09-13T06:37:36.965Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="axios的请求合并以及参数配置"><a class="markdownIt-Anchor" href="#axios的请求合并以及参数配置"></a> axios的请求合并以及参数配置</h1><p>现在我们假设想要两个请求都完成后才做一些事情，应该怎么办呢？</p><p>我们会想到，可以在第二个请求完成后，一起返回第一个请求结果和第二个请求结果，并且他们是按照代码顺序输出结果的。</p><p>代码演示为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="literal">null</span>;</span><br><span class="line">axios</span><br><span class="line">    .get(</span><br><span class="line">    <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/info"</span></span><br><span class="line">)</span><br><span class="line">    .then(<span class="function">(<span class="params">resuleA</span>) =&gt;</span> &#123;</span><br><span class="line">    result = resuleA;</span><br><span class="line">    <span class="comment">// console.log(resuleA);</span></span><br><span class="line">    <span class="keyword">return</span> axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/list"</span></span><br><span class="line">    );</span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">resultB</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(resultB);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们可以看到，我在第二个then里面利用全局变量 result 返回了第一个then的结果</p></blockquote><p>这样写的话未免有点麻烦，那有没有什么方法可以直接实现所有请求都完成后然后才做一些事情的方法呢？</p><ul><li><p>axios.all([])</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendArr = [</span><br><span class="line">    axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/list"</span></span><br><span class="line">    ),</span><br><span class="line">    axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/info"</span></span><br><span class="line">    ),</span><br><span class="line">    axios.post(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/add"</span></span><br><span class="line">    ),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt; 三个请求都完成才做一些事情（可以基于ALL实现）</span></span><br><span class="line">axios.all(sendArr).then((result) =&gt; &#123;</span><br><span class="line">    console.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>返回结果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/axios.all()%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.png" alt="" /></p><p>返回结果是一个数组，分别存储每一个请求的结果</p></li><li><p>axios.spread返回每次请求的结果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">axios.all(sendArr).then(</span><br><span class="line">    axios.spread(<span class="function">(<span class="params">resA, resB, resC</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//=&gt; RES-A/-B/-C分别代表三次请求的结果</span></span><br><span class="line">        <span class="comment">//=&gt; 原理搜索JS中的柯里化函数</span></span><br><span class="line">        <span class="built_in">console</span>.log(resA);</span><br><span class="line">        <span class="built_in">console</span>.log(resB);</span><br><span class="line">        <span class="built_in">console</span>.log(resC);</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      axios的请求合并以及参数配置
    
    </summary>
    
    
      <category term="Ajax" scheme="http://extheor.club/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="http://extheor.club/tags/ajax/"/>
    
  </entry>
  
</feed>
