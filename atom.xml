<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>码小余の博客</title>
  <icon>https://www.gravatar.com/avatar/7ff8334eb3ce169d5ef407706436ee76</icon>
  <subtitle>每天进步一点点！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://extheor.github.io/"/>
  <updated>2020-09-25T14:44:35.007Z</updated>
  <id>https://extheor.github.io/</id>
  
  <author>
    <name>Continue.Run</name>
    <email>2044580857@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>了解日本与日语的初步认识</title>
    <link href="https://extheor.github.io/posts/7bbd3149/index.html"/>
    <id>https://extheor.github.io/posts/7bbd3149/index.html</id>
    <published>2020-09-25T14:43:45.000Z</published>
    <updated>2020-09-25T14:44:35.007Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="了解日本与日语的初步认识"><a class="markdownIt-Anchor" href="#了解日本与日语的初步认识"></a> 了解日本与日语的初步认识</h1><h2 id="日本文字的构成"><a class="markdownIt-Anchor" href="#日本文字的构成"></a> 日本文字的构成</h2><p>私は昨日SONYのカメラを買いました。</p><p>(我昨天买了一步索尼的相机。)</p><ul><li>日本文字<ul><li>汉字</li><li>假名<ul><li>平假名</li><li>片假名</li></ul></li><li>罗马字</li></ul></li></ul><h2 id="平假名和片假名"><a class="markdownIt-Anchor" href="#平假名和片假名"></a> 平假名和片假名</h2><ul><li>平假名<ul><li>あいうえお</li></ul></li><li>片假名<ul><li>アイウエオ</li></ul></li></ul><blockquote><p>平假名和片假名之间一一对应，意义相同。</p></blockquote><h2 id="片假名的用途"><a class="markdownIt-Anchor" href="#片假名的用途"></a> 片假名的用途</h2><ul><li>外来语<ul><li>コーヒー（咖啡）</li><li>パンダ（熊猫）</li></ul></li><li>拟声拟态词<ul><li>ニャーニャー（猫叫声）</li><li>ザーザー（雨声）</li></ul></li><li>动植物名称<ul><li>ヒマワリ（向日葵）</li><li>ネコ（猫）</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="https://extheor.github.io/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="https://extheor.github.io/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>五十音图あ行</title>
    <link href="https://extheor.github.io/posts/ab176793/index.html"/>
    <id>https://extheor.github.io/posts/ab176793/index.html</id>
    <published>2020-09-25T14:43:30.000Z</published>
    <updated>2020-09-25T15:04:51.116Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="五十音图あ行"><a class="markdownIt-Anchor" href="#五十音图あ行"></a> 五十音图あ行</h1><h2 id="あ"><a class="markdownIt-Anchor" href="#あ"></a> あ</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/あ.png"><h2 id="い"><a class="markdownIt-Anchor" href="#い"></a> い</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/い.png"><h2 id="う"><a class="markdownIt-Anchor" href="#う"></a> う</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/う.png"><h2 id="え"><a class="markdownIt-Anchor" href="#え"></a> え</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/え.png"><h2 id="お"><a class="markdownIt-Anchor" href="#お"></a> お</h2><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/お.png"><h2 id="あ行发音练习"><a class="markdownIt-Anchor" href="#あ行发音练习"></a> あ行发音练习</h2><p>あえいいえあ</p><p>あおううおあ</p><p>あえいうえおあお</p><p>あいうえお</p><p>##　あ行例词</p><p>あい（愛）①【爱】</p><p>え（絵）①【画】</p><p>あおい（青い）②【蓝色】</p><p>うお（魚）⓪【鱼】</p><h2 id="口语的声调"><a class="markdownIt-Anchor" href="#口语的声调"></a> 口语的声调</h2><ul><li>高低型</li></ul><p>音节（假名）之间高低起伏</p><p>あめ（前低后高）【糖果】</p><p>あめ（前高后低）【雨】</p><ul><li><p>表记方法</p><ul><li><p>数字表记法</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/数字表记法.png"><p>声调核：最后一个高度音节</p><p>例如：⓪的话就是没有最后一个高读音节，一直高，①的话就是一个高读音节（从前往后）</p></li><li><p>横线表记法</p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/横线表记法.png"><p>横线：高音</p><p>竖线：下降</p></li></ul></li><li><p>四大类型</p><ul><li><p>平板型⓪</p><ul><li>一低二高一直高，助词也高</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/平板型.png"></li><li><p>头高型①</p><ul><li>一高二低一直低，助词也低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/头高型.png"></li><li><p>中高型②③…</p><ul><li>两头低中间高，助词低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/中高型②.png"><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/中高型③.png"></li><li><p>尾高型⑤…</p><ul><li>一低二高一直高，助词低</li></ul><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/日语图片/尾高型.png"></li></ul></li></ul><h2 id="两个规则"><a class="markdownIt-Anchor" href="#两个规则"></a> 两个规则</h2><ul><li>单词的第一个音节和第二个音节的高低相反。<ul><li>第一个音节高，则第二个音节低；</li><li>反之，第一个音节低，则第二个音节高。</li></ul></li><li>一个单词的声调中，或没有下降，或只有一处下降。<ul><li>即下降了就不能在升起来了。</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/
      
    
    </summary>
    
    
      <category term="日语" scheme="https://extheor.github.io/categories/%E6%97%A5%E8%AF%AD/"/>
    
    
      <category term="日语" scheme="https://extheor.github.io/tags/%E6%97%A5%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>标签外挂</title>
    <link href="https://extheor.github.io/posts/54667693/index.html"/>
    <id>https://extheor.github.io/posts/54667693/index.html</id>
    <published>2020-09-18T15:24:25.000Z</published>
    <updated>2020-09-18T15:41:56.029Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="notebootstrap-callout"><a class="markdownIt-Anchor" href="#notebootstrap-callout"></a> Note(Bootstrap Callout)</h1><h1 id="标签外挂"><a class="markdownIt-Anchor" href="#标签外挂"></a> 标签外挂</h1><h2 id="notebootstrap-callout-2"><a class="markdownIt-Anchor" href="#notebootstrap-callout-2"></a> Note(Bootstrap Callout)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note default %&#125;</span><br><span class="line">default 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success %&#125;</span><br><span class="line">success 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info %&#125;</span><br><span class="line">info 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning %&#125;</span><br><span class="line">warning 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger %&#125;</span><br><span class="line">danger 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note default">            <p>default 提示块标籤</p>          </div><div class="note primary no-icon">            <p>primary 提示块标籤</p>          </div><div class="note success">            <p>success 提示块标籤</p>          </div><div class="note info">            <p>info 提示块标籤</p>          </div><div class="note warning">            <p>warning 提示块标籤</p>          </div><div class="note danger">            <p>danger 提示块标籤</p>          </div><h2 id="gallery相册图库"><a class="markdownIt-Anchor" href="#gallery相册图库"></a> Gallery相册图库</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gallery-group-main"</span>&gt;</span></span><br><span class="line">&#123;% galleryGroup '壁纸' '收藏的一些壁纸' '/Gallery/wallpaper' https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup '漫威' '关于漫威的图片' '/Gallery/marvel' https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup 'OH MY GIRL' '关于OH MY GIRL的图片' '/Gallery/ohmygirl' https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png'>  <figcaption>  <div class="gallery-group-name">壁纸</div>  <p>收藏的一些壁纸</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg'>  <figcaption>  <div class="gallery-group-name">漫威</div>  <p>关于漫威的图片</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img" src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg'>  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>关于OH MY GIRL的图片</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><h2 id="gallery相册"><a class="markdownIt-Anchor" href="#gallery相册"></a> Gallery相册</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><div class="justified-gallery"><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt="" /><br /><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt="" /></p>          </div><h2 id="tag-hide"><a class="markdownIt-Anchor" href="#tag-hide"></a> tag-hide</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">门里站着一个人? &#123;% hideInline 闪 %&#125;</span><br></pre></td></tr></table></figure><p>哪个英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">因为西装裤(C装酷)</span></span></p><p>门里站着一个人? <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click  </button><span class="hide-content">闪</span></span></p>]]></content>
    
    <summary type="html">
    
      标签外挂
    
    </summary>
    
    
      <category term="Hexo" scheme="https://extheor.github.io/categories/Hexo/"/>
    
      <category term="标签外挂" scheme="https://extheor.github.io/categories/Hexo/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/"/>
    
    
      <category term="Hexo" scheme="https://extheor.github.io/tags/Hexo/"/>
    
      <category term="标签外挂" scheme="https://extheor.github.io/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/"/>
    
  </entry>
  
  <entry>
    <title>京东抽奖项目开发笔记</title>
    <link href="https://extheor.github.io/posts/21abcf1a/index.html"/>
    <id>https://extheor.github.io/posts/21abcf1a/index.html</id>
    <published>2020-09-17T15:45:25.000Z</published>
    <updated>2020-09-17T23:57:30.525Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东抽奖项目开发笔记"><a class="markdownIt-Anchor" href="#京东抽奖项目开发笔记"></a> 京东抽奖项目开发笔记</h1><h2 id="文章目录"><a class="markdownIt-Anchor" href="#文章目录"></a> 文章目录</h2><p><a href="#1.%E6%B3%A8%E5%86%8C%E9%A1%B5">1.注册页</a></p><p><a href="#2.%E7%99%BB%E5%BD%95%E9%A1%B5">2.登录页</a></p><p><a href="#3.%E6%B7%BB%E5%8A%A0%E5%A4%B4%E9%83%A8tab">3.添加头部tab</a></p><p><a href="#4.%E5%AE%8C%E5%96%84%E6%B3%A8%E5%86%8C%E9%A1%B5%E7%9A%84ajax%E8%AF%B7%E6%B1%82">4.完善注册页的ajax请求</a></p><p><a href="#5.%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E9%A1%B5%E7%9A%84ajax%E8%AF%B7%E6%B1%82">5.完善登录页的ajax请求</a></p><p><a href="#6.%E6%8A%BD%E5%A5%96%E9%A1%B5--%E9%A6%96%E9%A1%B5">6.抽奖页–首页</a></p><p><a href="#7.%E5%AE%8C%E6%88%90%E6%B3%A8%E5%86%8C%E9%AA%8C%E8%AF%81%E7%A0%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%A5%E5%85%A5">7.完成注册验证码接口的接入</a></p><p><a href="#8.%E5%AE%8C%E6%88%90%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E7%A0%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%8E%A5%E5%85%A5">8.完成登录验证码接口的接入</a></p><p><a href="#9.%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E8%B7%AF%E7%94%B1%E4%B8%8D%E5%88%B7%E6%96%B0">9.页面跳转路由不刷新</a></p><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言：</h2><p>这是一个独立项目，这个项目会由我们四个人来一起完成，所以首先就要分工合作，我是写前端的，所以我会先把基本的页面写出来</p><h2 id="a-id1注册页1注册页a"><a class="markdownIt-Anchor" href="#a-id1注册页1注册页a"></a> <a id="1.注册页">1.注册页</a></h2><p>这是注册页的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/login.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"codeForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">name</span>=<span class="string">"phone"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"code"</span> <span class="attr">name</span>=<span class="string">"code"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>验证码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"getCode"</span>&gt;</span>点击获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          下一步</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/modal_dialog.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/tccj.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户提交表单</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 判断手机号格式是否正确</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 提示错误信息</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="comment">/* background: linear-gradient(#141e30, #243b55); */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">      <span class="number">60deg</span>,</span><br><span class="line">      rgba(<span class="number">255</span>, <span class="number">165</span>, <span class="number">150</span>, <span class="number">0.5</span>) <span class="number">5%</span>,</span><br><span class="line">      <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">228</span>, <span class="number">255</span>, <span class="number">0.35</span>)</span><br><span class="line">    ),</span><br><span class="line">    <span class="built_in">url</span>(https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%<span class="number">9</span>B%BE%E7%<span class="number">89%</span><span class="number">87</span>/坚持.jpg);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginBox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">470px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">15px</span> <span class="number">25px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginWay</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">36%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cc9644</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span> &gt; <span class="selector-class">.line1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.codeLogin</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.line1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">157</span>, <span class="number">131</span>, <span class="number">82</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">31%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cc9644</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span> &gt; <span class="selector-class">.line2</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginWay</span> &gt; <span class="selector-class">.pwdLogin</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.line2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">157</span>, <span class="number">131</span>, <span class="number">82</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pwdForm</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &gt; <span class="selector-class">.getCode</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ecf0f1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &gt; <span class="selector-class">.getCode</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: aqua;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">#03e9f4</span>,</span><br><span class="line">    <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> <span class="number">0</span> <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line1 <span class="number">1s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">370px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">390px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line1 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line2 <span class="number">1s</span> <span class="number">0.25s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line2 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(right, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line3 <span class="number">1s</span> <span class="number">0.5s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line3 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line4 <span class="number">1s</span> <span class="number">0.75s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line4 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码是写的注册页的基本页面，CSS部分写的比较多，所以在写页面上花了很大一部分时间，js中还判断了手机号的格式是否正确，如果不正确会提示“手机号格式有误”（这个错误提示我用了插件，我会在下面给出相应的代码），如果输入的手机号正确，那么会进行Ajax请求（前端向后端发送用户所输入的数据，比如说：手机号和验证码），验证码的话是通过第三方API来获取的，这当然也必须是用Ajax发送请求，来获取验证码，这时就可以发送给后端了，后端会接收到数据，然后把该注册信息插入到数据库中进行存储，为以后的登录操作打下了良好的基础</p><ul><li><p>jQuery弹窗库</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装模态框_提示框</span></span><br><span class="line"><span class="comment">// 提示框</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图标 base64 码  全局变量</span></span><br><span class="line"><span class="comment">// 默认图标</span></span><br><span class="line"><span class="keyword">var</span> info_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADlUlEQVRYR82XS4hbdRjFz7l3ZsARamzryCQ31lft5A64qErFhYKK9bFwxmJRu/CxKbjzAXYmdyS0yYwu1J3oqt2otNQ+wEKxogiC+GgX0t44vlDnTqJW7LRoK53ce+SmTUw6j/wTRmq295zz/e6Xf/75PuIif9hOfTenHvWU76fC2wBeQahfYkjguMCyLH7Wu6L/wOHNnDXNNQJYs+2Xa7pYeV7UJoKXLR6uExDfka3X/JH0d61AFgUYmChfbYXhVgCbSFitwhqfCwghvC1YY0Uv+dNC3gUB3G3BnaTeBZlop/AcrTQjcYM/5nw4X868AO54sBkRXm/3rRcClRDBwtP+qPPmhZo5AG4huAvC+0tVvFYwhpC4vjiW+qARognAfal0FcLwq9YHrbMvRdBJ2PaN/pbkz7WEZoBCsJPARtN4AZ9SuA5En7FH2Ol7ziNzADKF6bUWdNg4CJjws84odsl2v51+mcBzpt6KrFsmveSXsb7eATc/tYfkcCcha/Klm7sYfWHqlbTX99IP1QGcV6cuWXYaMyR7jEOAV/zVqRewkaFbCMYJjJh7dQazTsLP8Wy1A5nx0pClaK9pQMPJ/h3E9wTWte/lkO+l9lcB3HxQIDFqGiLhDVC/1vXCOpL3mvpjnYCCn3W8KsBgPtgB4nGjAGnmmJe+vFHrbi0P0g6PGvnPiwTs8LPOk7UOHCJxt1GAcJrsvvZo9sp6B24YLw10Kyoa+f8FOORnnXvOdaAwdRDgetOA+EL527501Q9blp+MPR0BSAd9L33fuQ4Ugu0EnjAFiHWViAOTY6nJzgGw3fecpzo6hEsC0HgIM/nSsMVoj3EHhPdU6XnUz/X9We1ArrSyqzv8mKBrmhHRGi6OJvdVO5DMlXoTXeEJo4tonl9BtahEtxDEl9myVhCSzp7qRSJ4Nn2m8SreR/LBVmYAfx2bTSWQY6VJu0v24DfTp0D0tsqQtN/30kOxrg7Qzn0uyAdwvKmQsJLkYKvi8fMIvKmYTR1pAjh/Ie0GscEkpFONgN1+1nm45m+aBzL50ioiPEJyeacFFvNJ+kOw1zYOqXNGsky+dDsRffRfjGSAdYfvJT9phPz/DaU1uos6ltcg6osJ8RgBu51zUVtMItt+8euR/h8X8hqtZu7E1PUM+YzJahb/UVF8a0lWswupq8tpV/kBC+GtIvuqyykQUfytupyCn7PSfyAetUy7ZdQB07BOdP8AHHSWMKZhltwAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 成功图标</span></span><br><span class="line"><span class="keyword">var</span> success_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADd0lEQVRYR82X328UVRzFz5ntRgj4K+rOLtEAUV80MUENINhfs/iAxl+J8UFejCaW3emDiS/6D/gs4k4J8cXgiwkmICH60J2xpSj6IjEaY4yx+GumLdCAUdN2d46Zku3+mmV3yxact5m595zPnPu9c+8lbvDFG+yPzgG8l9dltHEQ0JOCtgM0KWwStQRwhtKfAr4SjE9nbl08hUcPL3XycR0BpLz8vkTIAyDu6EQUwO9CuD+wxk62a39VgDsnX8skl5IfgHiinVDce0Ef/ZtU7lL/2Hyr/i0B0m7uKYJHAN6+GvNKH0F+mXhxbtiZitOJBTCL+acN8pNrMa7tKyEMyYFZ673TjZpNAJmivVnUdwQ39gog0pEw87fw4F97ChdqdZsA0q59hsCOXpqvDId0Isg6z7QEWK528cO1MK/WRDgUWGMTlftqAgIzXv4cwHt6ASDhsoA3SLxJ4N6qps76lrOtCSDlju5OQLGV2i1QZF42NDg37JzNePkRiIdqNcoy7pvNHvw5eraSQMa13wbwVrdmje1rzc2J0a1GOZxoTDWkXp8Zdg7UAxTzp0HuuhaAWvO7JkbuT5QSUyRTTZrSMT/rPF8HkC7a0yQ2rx5A8yXCimJPj488QPZNtvp1S/g6yBaWZ9qVIRCY9uxFAn2rA9C8wP7AKnyfGs89lDCMqMpva6kl/eFnnbsbAPILBJNxnSQdFXmK0DsEG/4dVfOMm3tEMlwSt1z1Q5oAAKTd/C8Et8R1LFHbomij/4QhHKlCVM1NL7eToTFOYkO7FKNlO7AKOxuLcBJkf2wCkL+YwI6Lg85vpmu/Quh9AhcEDkWxm66dNYATANa3M78y4vg4sAovdDUNBU2X+kq7zg8c9k0v/2pZmjpvjf2YLub2gjzeavjigGKnYepz+7FEiC/ajN1PSiZ2BwMH56J2pms/S+Bot8UrlrcGw4em6xKIZkLGs38FsFydrS5JP/yzfuHxDQs3bVfIkySMTmJfaSN942edhyv3dRXd6WIk4RyoTd3EXgXAoJ8tTMYCRA/XcjkGdNy3nOdqE2veD3j7t0DGtwRv7iraNo073pBUissAjvUKQEApNDAwO1T4slHzumxKEWJfsMfx4j7o/7str6U13dGXDOnd634wqYuscjRTuFeMNq0xRzPyjMTPen4061Uxdl0Da2lc0f4PeKyXMJXpyrIAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 警告图标</span></span><br><span class="line"><span class="keyword">var</span> warning_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC8ElEQVRYR8WXTUhUURTHf0fToEWQfbmoKKjIRSotCiwoiDCqTWCCRkGl84aEllmLQgqkWpbVvBlxIRUxfay0j00fEGSr1CIi0igMhCRpE0k5J+4bJsdxPu4bhzzb9///z/+de++55wo+Qq+xiGLqUdYDS4DlCDGUb8AYwgcmicpxxm1lJRdQoxTznQaEQ8BOoDgrR/mD8AQlIkHu5tLPaEDbKKKcJoQzwIpcQhm+v0IISoD+TPy0BtRlAcp9hNo8EyfTFDglDpfSac0woFcpZx6PgcoCJJ+SULop46jUM5msO82AupQAfcAmy+RfgBGgxhJ/TxzqshnoAFqsxIRjEqDLYDXEaYR2Kx6cF4ezCey/CqjLXqDHSkQZlyBlCaxeZiHz+WHFNSBhtwS8ZcYz4JVeGUJYaSkyJA5rp+00F7PZ7EIZkCDVyQZOAhft2B5qdgbimRskwO14BUJ8Qlj9Xw0oLyVIjWiECmK885G8MBXAW7Jloi5+y18oA8ZCkzFgjtKROaiASemKhnhojsWcGFB6jIF+hKo5MvDaLMFAHn1/9scw/seDpgK9CHt8VmBEnKmmpVFKGWfCp4bZhI9MBVwg4JtcRJU0M+j1kTD7vevbf3QZA01AxDdX+YrQiVKJePdIqW8NaBXtYDEl3kyXczzLI0F2Sow1iVb8AmGrrwTKBEIUGEZpRFjniw/vxaEibuA6Bynihg+BX8BmcXjj8ePX8UdgqQ+NVjOmJc8DZkNttBS4Iw71yVh1uQk0WvGVYYQN4vB7ykCYWnMsrATguTjsSDHwDNhuyd8nDr0GmzoTngNvDM8diiNBwt4SuDhAKDfJgLkiQU4ksDOnYj+lBDOUmlhlmbyPMrYlT8bpDJjxrBPhsJWoLUh5yyS7pIXRZErml1F8TrhQkP6gPEA4IA4/U/1mbT4aphr11naL7Y+m4D6jtOMQEUk/tFp1Pw1Rh9Bs/TiFp0A3o9ySNmLZzFsZSAikeZ6bJ7qJsXyf538B0n8BZanHYR0AAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 错误图标</span></span><br><span class="line"><span class="keyword">var</span> error_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADd0lEQVRYR9WXS4gcVRSG/79qEnGjk3vLhc+4FBVd6CJIpqsmEXyShUpcZCGO+AqIqOALUdSFgqAJGEUxKIgujAoSHyQg0z2jC4UEYkCEREQiI2jd7owmIdpT9Uu16Xl0V1f1tNMEa9X0veec75zz31O3iNP88DTHx/8PoDE+emWS+jeSWivxPJIegF8F/YwEe4Np9+1yqtpXBQR4jSi4W9DjAC8uCiBphuTLBvF2VjFXBlMKkGWcyn8P4GVlzhavSzjkecmdZrLxdZFdIYCLzO2S9zaJM5cTfH6v1CTwoKm513vZ9wSIK/YWevxooMAdRoSeMFX3Yp6vXIA4spdA3D9w5nmRlG62tfquzqVcABcGB0BcsRLZL/iQM6vdWu7F8cV+uwBcxUzA83Z2BRd2kfgyBbYTOCM3SeF3j3pY4L0A1nf7SJ+xtfpzxQA9smeKLWYqfv9oxW5IiC9Arl4SQGqIuCaouh9cGDwL4ulOgOyIBjV3fk+A42PBuSd9zOSWXjriay4cnZr9yUXmeoC7AY609koNKg3NVOOgi8w6iHtAnpXnx0+aV41Oz+5vry1pgYvMXYD3Vq/eS/htlf5ef/bUH4calWBT6uljAMeYpmNZ8Hq4ZiyFv6dIvJKeDGruhR4A9nmATxWLTw6JKna6/r2rmM2+ksNZRvG43Qjxs176WJgNeNPW4kwjrWdpBUK7E+REufp1lEkamunGd9neerjmBsH7BOSqUlvhc1uLb/pPAAKOjSTNsN3LhXbQLwOQtDuouU0Dt0DCCXjaEEy6b9y4uVXgL63fkbkN4gcgS94v6Ru2Wr9vUBGe8JhcZ6qNr9onQeDJdjXqUbBF0rtFECUiNBcA3pHcIQP85SG5dj64mPX81CzQ7PxJKIHwiatHJ+N9uRXI/nSRPQjw8k4ISluzt1o/gygO7Q6SW3MSiW01PqdwEtZDe7/I17qN9SHBbBRvKxrFPvRIQtxBcGN3EnjU1OKXCgEUYaQu+yPIi8oUvZx1AYftn/Gl3IdmIcC/bWiN2k+B8mPVF4TU9NO5dYtHcE8NtBfiyGZlfKevACWbBD0QVN2reduGfiUT8VBQdTt6MQ73UspkIju2RQUqBciMT13L7xH0WJ/X8lcM4m0rci3vpG99mMi/mdCFrQ+TTKjEzFA/TFZCiANrYJjBM999aWCYEP8A7TSkMOyQWnEAAAAASUVORK5CYII='</span>;</span><br><span class="line"><span class="comment">// 关闭图标</span></span><br><span class="line"><span class="keyword">var</span> close_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFElEQVRYR+2WTWsTQRjH/08mLxepKIoHQcRLBRX0IPhCay2ih/opQpYJCeSQjxLIy7Ahn8KTivZVhB4aqEJ70V5FUSwlkmSHRyZYWJZtd3YDWQ/d487M8//Nf5555iGk/FHK+jgD+H8dcF33wWg0+lStVo+myZNms3kun8/fdhznY1icUAeUUs8BvALQ9zxvOSmEEc9ms+8A3AXwUkr5OghxEsB5Zn5PRPcAbA+Hw2e1Wu0wjhONRmOuUCi8BXCfmXeI6KmU8rcVgJmklPJD9LXWy5VK5ZcNRKvVuiCEmOz8NHET69QkNBAANgDcAfBZa70QBaGUugRgFcCtKPFIADOh2+1e1FqbgBMIAEtSyh9hThhxZt4konkAuwAWwmz3r7W6hn4IZt4XQjxxHOebP5Drule01mvH4kKIpVKp9DPqyKwAgk4w8xchxKNjiHa7fZWI1onohtm5rbjVEfh38M+JLQA3DQQzL5rxTCbzAcC1uOKxAcyCXq93eTwerxsIAF8BiKTiiQBCIMyvWLbHTsJgIgVcMMN7uVxusVgsfo9KOutCdFIgvzgzH0xsJLpuIIQQj20yP7EDqSZhoBbM9hqmWohSLcVB8Zk+RgHx2T7HgWd4moZkLaoniGrJtj3Pe5G0JfN1RaYxWSmXy2+sC1Gn03k4GAz69Xr9T9zq5p+fqCmdRjDuWut+IG5g2/lnAKk78Bd192wwo+7w4AAAAABJRU5ErkJggg=='</span>;</span><br><span class="line"><span class="comment">// 问号按钮</span></span><br><span class="line"><span class="keyword">var</span> question_modal = <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADlUlEQVRYR72XXWhUVxDHf7MJpYlCjdWkUloLVWmgvhSCUigUffADioqyIuapJd5NUwQxxra2Nf1AaQWp4EfWbygWTH0RQhUUNWqhhbRNihhEUjWCDZiEpCGka7I75dw9m+xudu+9m9Se1/Of//zPnDlzZoSAS/dTQimrgI3AQoTnUSqABEIf0AvcRjjHP/woW4kFoRY/kJ5kLqPsQdmMUOKHt/vDKN8xxifygSsu78orQBsp5gW2I3wKzAjoOBs2BHzOXxyQRsZyceQUoIcpo4gW4M0pOs40U34lzjqp42E23yQBGuVVlMsIr/wnzidIBhHWyBZa03kzBGiUOSjtCC/6Olc6EAZcnLq5sThAjvRTzGJ5j0cp/nEBbpbP4CbwRl7nygjCV4RokRr+SMdpM88wQDXKfuA5jwP8BiwVh1GDmRAQ5WugwcN5H0UsSzl2k3QelShxhLspQj3OAuL8Asz24PpYIuwdF6BHKCfEA+BZD+XLxOGqG/EjhAkRBWZZ/CBQLw7H3f0mViJc8BDwN8LL4jDoRkCjNAGOh0GbRKiy2NeAW0DRJLyyViKct7iffF7RPnFoEPfu+hnwSaDPxOFLe7ofEDbkEdsqDm9bAd8AOzwi2k8Z5aJHWYFy0SfrT6J8j9AB7lWV5sQrPRJhnhWwG2j05BVWi0Y5CNT5PrsgAOWKRFhuI2UEb/I0U06INnEVSYZtmmuIEEukhk49xEyK6fEt4co1E4FOwCTWdNZjEqyQWn63pz+LEPYlVO4aAaaaeRUOP55uwDzRLut8H0K9n5G7r4yYKxhCmBnIYDKonzhV8j5/2sQzVXBbYC4lZiJwB1gU2CgdmKBaajlT8MknOLqmk4TDlDFbwjzRo7yLcmIKh2g1ETgM1BZsnPnkriO8VTAHnDIR8K7b+ViVMxKh2oa/G+GlggUIG4KW4lzc7ZCs+ygNAXqBbI4nDDMr9RmZn21LwSeYjoHSLBE2JgUco4IE932+42x39wBTA0wEKhHKA+tRYsRZaHrE9IbENAgfBiaBXeKwx+aAf91PJ1a+kAjms0rriIK0ZJnqpiogd0tmK9kcoA2Y7xsJ5QrCDXsF6xFe97WB/E1pytjt6ca49FTa8hDvSI0VbR3+X4PJz8QJBxpMxiOR7Hp3Ah/5/uv5Y58czcr4VsLEc8Ge3nAKpxll95SH02y14+O5aTSURe54DiZpzepF3Sk4OZ7HuBB0PP8X+s83WFbJv84AAAAASUVORK5CYII='</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$modal</span>(<span class="params">data</span>) </span>&#123; <span class="comment">// data 必传 且为对象</span></span><br><span class="line">    <span class="comment">// 赋值默认参数</span></span><br><span class="line">    <span class="keyword">if</span> (data === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 弹框类型不传默认为 alert</span></span><br><span class="line">    <span class="keyword">if</span> (data.type === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.type = <span class="string">'alert'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tipIconImg = <span class="string">''</span>; <span class="comment">//提示显示小图标</span></span><br><span class="line">    <span class="comment">// 提示类型 默认不传为  info</span></span><br><span class="line">    <span class="keyword">if</span> (data.icon === <span class="string">'success'</span>) &#123;</span><br><span class="line">        tipIconImg = success_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'warning'</span>) &#123;</span><br><span class="line">        tipIconImg = warning_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'error'</span>) &#123;</span><br><span class="line">        tipIconImg = error_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.icon === <span class="string">'question'</span>) &#123;</span><br><span class="line">        tipIconImg = question_modal</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        tipIconImg = info_modal</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 弹框显示时长   confirm 下无效 </span></span><br><span class="line">    <span class="keyword">if</span> (data.timeout === <span class="literal">undefined</span> &amp;&amp; data.type != <span class="string">'confirm'</span>) &#123;</span><br><span class="line">        data.timeout = <span class="number">2000</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 最短显示时间为500</span></span><br><span class="line">        data.timeout &lt; <span class="number">500</span> ? data.timeout = <span class="number">500</span> : data.timeout = data.timeout;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 过渡动画</span></span><br><span class="line">    <span class="keyword">if</span> (data.transition === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.transition = <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遮罩层参数</span></span><br><span class="line">    <span class="keyword">if</span> (data.mask === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.mask</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 最小宽度</span></span><br><span class="line">    <span class="keyword">if</span> (data.width === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.width = <span class="number">300</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁止页面滚动</span></span><br><span class="line">    <span class="keyword">if</span> (data.pageScroll === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.pageScroll = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提示框标题</span></span><br><span class="line">    <span class="keyword">if</span> (data.title === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.title = <span class="string">'提示'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遮罩层关闭</span></span><br><span class="line">    <span class="keyword">if</span> (data.maskClose === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.maskClose = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 取消按钮文字</span></span><br><span class="line">    <span class="keyword">if</span> (data.cancelText === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.cancelText = <span class="string">'取消'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确认按钮文字</span></span><br><span class="line">    <span class="keyword">if</span> (data.confirmText === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.confirmText = <span class="string">"确认"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 距离顶部距离</span></span><br><span class="line">    <span class="keyword">if</span> (data.top === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.top = <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否绝对剧中</span></span><br><span class="line">    <span class="keyword">if</span> (data.center === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        data.center = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 公共计算当前元剧中top 值</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">calculate</span>(<span class="params">e, sun</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (data.center) &#123;</span><br><span class="line">            <span class="keyword">var</span> tipHeight = e.height() + sun;</span><br><span class="line">            <span class="built_in">console</span>.log(tipHeight)</span><br><span class="line">            <span class="keyword">var</span> windowHeight = $(<span class="built_in">window</span>).height();</span><br><span class="line">            <span class="built_in">console</span>.log((windowHeight / <span class="number">2</span>) - (tipHeight / <span class="number">2</span>))</span><br><span class="line">            data.top = (windowHeight / <span class="number">2</span>) - (tipHeight / <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  生成相对唯一id  保证弹框绑定id唯一  保证事件绑定不重复  （此处用于保证弹框内层 继续 弹框  不出现事件绑定重复）</span></span><br><span class="line">    <span class="keyword">var</span> idText = <span class="string">"modailItem"</span>;</span><br><span class="line">    <span class="keyword">var</span> date = (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() * <span class="built_in">Math</span>.random() + <span class="string">''</span>).substr(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    idText += date;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> titleSize = <span class="number">16</span>; <span class="comment">//标题文字大小</span></span><br><span class="line">    <span class="keyword">var</span> fontSize = <span class="number">14</span>; <span class="comment">//字体大小</span></span><br><span class="line">    <span class="comment">// 创建最外层元素 </span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">'#modail-dialog-box'</span>).index() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> modelBox = <span class="string">'&lt;div id="modail-dialog-box"&gt;&lt;/div&gt;'</span></span><br><span class="line">        $(<span class="string">'body'</span>).append(modelBox)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).css(&#123;</span><br><span class="line">            fontFamily: <span class="string">'微软雅黑'</span>,</span><br><span class="line">            fontSize: fontSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#666666'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成 message 提示</span></span><br><span class="line">    <span class="keyword">if</span> (data.type === <span class="string">'message'</span>) &#123;</span><br><span class="line">        $(<span class="string">'#modail_message_box'</span>).html(<span class="string">''</span>);</span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="modail_message_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置message提示框长度</span></span><br><span class="line">        <span class="keyword">var</span> width_s = <span class="number">40</span> + (fontSize * data.content.length) + fontSize + <span class="number">4</span>;</span><br><span class="line">        <span class="comment">// 不需要遮罩层</span></span><br><span class="line">        $(<span class="string">'#modail_message_box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示内容</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            width_s += fontSize + <span class="number">4</span>;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置外层框样式</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).css(&#123;</span><br><span class="line">            width: width_s + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'10px 15px'</span>,</span><br><span class="line">            background: <span class="string">'#fff'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            left: <span class="string">'0'</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            right: <span class="string">'0'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字内容框样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: fontSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算 距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>), <span class="number">20</span>)</span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).css(&#123;</span><br><span class="line">            top: data.top - <span class="number">60</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top - <span class="number">60</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 定时关闭</span></span><br><span class="line">        <span class="keyword">var</span> timers;</span><br><span class="line">        <span class="keyword">if</span> (!data.manual) &#123;</span><br><span class="line">            timers = setTimeout(close, data.timeout);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 清除定时器</span></span><br><span class="line">            clearInterval(timers)</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="string">'alert'</span>) &#123;</span><br><span class="line">        <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">        <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'hidden'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// alert 提示框展示</span></span><br><span class="line">        <span class="comment">// 添加 alert 提示框</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 是否添加遮罩层</span></span><br><span class="line">        <span class="keyword">if</span> (data.mask) &#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_mask"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">            <span class="comment">// 设置mask外层弹框样式</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).css(&#123;</span><br><span class="line">                position: <span class="string">'fixed'</span>,</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                background: <span class="string">'rgba(0,0,0,0.4)'</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成中间层</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'centerBox"&gt;&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            width: data.width + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'20px'</span>,</span><br><span class="line">            background: <span class="string">'#ffffff'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            left: <span class="number">0</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 生成头部以及提示内容部分</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'title"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示标题</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.title + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置标题框文字样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span>,</span><br><span class="line">            fontSize: titleSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#333333'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: titleSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'-1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置提示框 box 样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).css(&#123;</span><br><span class="line">            marginBottom: <span class="string">'10px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'body"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'body'</span>).css(&#123;</span><br><span class="line">            padding: <span class="string">'0 '</span> + (titleSize + <span class="number">10</span>) + <span class="string">'px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>), <span class="number">40</span>);</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            top: data.top + <span class="number">40</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition);</span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top + <span class="number">40</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">                <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">                    $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'auto'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 定时关闭</span></span><br><span class="line">        <span class="keyword">var</span> timers;</span><br><span class="line">        <span class="keyword">if</span> (!data.manual) &#123;</span><br><span class="line">            timers = setTimeout(close, data.timeout);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 清除定时器</span></span><br><span class="line">            clearInterval(timers)</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 遮罩层关闭</span></span><br><span class="line">        <span class="keyword">if</span> (data.maskClose) &#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 清除定时器</span></span><br><span class="line">                clearInterval(timers)</span><br><span class="line">                close();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="string">'confirm'</span>) &#123;</span><br><span class="line">        <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">        <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">            $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'hidden'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// alert 提示框展示</span></span><br><span class="line">        <span class="comment">// 添加 alert 提示框</span></span><br><span class="line">        $(<span class="string">'#modail-dialog-box'</span>).append(<span class="string">'&lt;div id="'</span> + idText + <span class="string">'_box"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 是否添加遮罩层</span></span><br><span class="line">        <span class="keyword">if</span> (data.mask) &#123;</span><br><span class="line">            $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_mask"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">            <span class="comment">// 设置mask外层弹框样式</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).css(&#123;</span><br><span class="line">                position: <span class="string">'fixed'</span>,</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                right: <span class="number">0</span>,</span><br><span class="line">                left: <span class="number">0</span>,</span><br><span class="line">                bottom: <span class="number">0</span>,</span><br><span class="line">                background: <span class="string">'rgba(0,0,0,0.4)'</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成中间层</span></span><br><span class="line">        $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'centerBox"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            width: data.width + <span class="string">'px'</span>,</span><br><span class="line">            padding: <span class="string">'20px'</span>,</span><br><span class="line">            background: <span class="string">'#ffffff'</span>,</span><br><span class="line">            position: <span class="string">'fixed'</span>,</span><br><span class="line">            right: <span class="number">0</span>,</span><br><span class="line">            left: <span class="number">0</span>,</span><br><span class="line">            margin: <span class="string">'auto'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">            boxShadow: <span class="string">'0 1px 6px rgba(0,0,0,.2)'</span>,</span><br><span class="line">            opacity: <span class="string">'0'</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成头部以及提示内容部分</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'title"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 添加左侧图标</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item1"&gt;&lt;img src="'</span> + tipIconImg + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="comment">// 提示标题</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item2"&gt;'</span> + data.title + <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">        <span class="keyword">if</span> (data.closable) &#123;</span><br><span class="line">            <span class="comment">// 右侧关闭图标</span></span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'_item item3"&gt;&lt;img src="'</span> + close_modal + <span class="string">'" /&gt;&lt;/div&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置标题框文字样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item2'</span>).css(&#123;</span><br><span class="line">            margin: <span class="string">'0 8px'</span>,</span><br><span class="line">            fontSize: titleSize + <span class="string">'px'</span>,</span><br><span class="line">            color: <span class="string">'#333333'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置文字关闭按钮靠边样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).css(&#123;</span><br><span class="line">            position: <span class="string">'absolute'</span>,</span><br><span class="line">            right: <span class="string">'15px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置内层框公共样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item'</span>).css(&#123;</span><br><span class="line">            display: <span class="string">'inline-block'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item img'</span>).css(&#123;</span><br><span class="line">            width: titleSize + <span class="number">4</span> + <span class="string">'px'</span>,</span><br><span class="line">            verticalAlign: <span class="string">'top'</span>,</span><br><span class="line">            position: <span class="string">'relative'</span>,</span><br><span class="line">            top: <span class="string">'-1px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置提示框 box 样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'title'</span>).css(&#123;</span><br><span class="line">            marginBottom: <span class="string">'10px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'body"&gt;'</span> + data.content + <span class="string">'&lt;/div&gt;'</span>)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'body'</span>).css(&#123;</span><br><span class="line">            padding: <span class="string">'0 '</span> + (titleSize + <span class="number">10</span>) + <span class="string">'px'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 设置按钮</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).append(<span class="string">'&lt;div class="'</span> + idText + <span class="string">'footer"&gt;&lt;button  class="button_s_model '</span> + idText + <span class="string">'_confirm"&gt;'</span> + data.confirmText + <span class="string">'&lt;/button&gt;&lt;button class="button_s_model '</span> + idText + <span class="string">'_cancel"&gt;'</span> + data.cancelText + <span class="string">'&lt;/button&gt;&lt;div class="clearBoth"&gt;&lt;/div&gt;&lt;/div&gt;'</span>)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'footer'</span>).css(&#123; <span class="attr">paddingTop</span>: <span class="string">'20px'</span> &#125;)</span><br><span class="line">        <span class="comment">// 设置样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).css(&#123;</span><br><span class="line">            float: <span class="string">'right'</span>,</span><br><span class="line">            marginLeft: <span class="string">'20px'</span>,</span><br><span class="line">            outline: <span class="string">'none'</span>,</span><br><span class="line">            border: <span class="string">'none'</span>,</span><br><span class="line">            padding: <span class="string">'8px 30px'</span>,</span><br><span class="line">            cursor: <span class="string">'pointer'</span>,</span><br><span class="line">            borderRadius: <span class="string">'5px'</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 计算距离顶部距离</span></span><br><span class="line">        calculate($(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>), <span class="number">40</span>)</span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).css(&#123;</span><br><span class="line">            top: data.top + <span class="number">40</span>,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 显示动画</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">            <span class="string">'top'</span>: data.top,</span><br><span class="line">            <span class="string">'opacity'</span>: <span class="string">'1'</span>,</span><br><span class="line">        &#125;, data.transition);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 鼠标移入移出</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'.8'</span> &#125;)</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'1'</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 鼠标按下</span></span><br><span class="line">        $(<span class="string">'.button_s_model'</span>).mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'1'</span> &#125;)</span><br><span class="line">        &#125;).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).css(&#123; <span class="string">'opacity'</span>: <span class="string">'.8'</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 取消按钮样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model.'</span> + idText + <span class="string">'_cancel'</span>).css(&#123;</span><br><span class="line">            background: <span class="string">'#fff'</span>,</span><br><span class="line">            borderBox: <span class="string">'box-sizing'</span>,</span><br><span class="line">            border: <span class="string">'1px solid #eee'</span>,</span><br><span class="line">        &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            data.cancel(close)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 确认按钮样式</span></span><br><span class="line">        $(<span class="string">'.button_s_model.'</span> + idText + <span class="string">'_confirm'</span>).css(&#123;</span><br><span class="line">            background: <span class="string">'#2d8cf0'</span>,</span><br><span class="line">            color: <span class="string">'#fff'</span>,</span><br><span class="line">        &#125;).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            data.confirm(close)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 清除浮动</span></span><br><span class="line">        $(<span class="string">'.clearBoth'</span>).css(&#123;</span><br><span class="line">            clear: <span class="string">'both'</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭动画</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'centerBox'</span>).animate(&#123;</span><br><span class="line">                <span class="string">'top'</span>: data.top + <span class="number">40</span>,</span><br><span class="line">                <span class="string">'opacity'</span>: <span class="string">'0'</span>,</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">            <span class="comment">// 删除DOM</span></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'#'</span> + idText + <span class="string">'_box'</span>).remove();</span><br><span class="line">                <span class="keyword">if</span> (data.pageScroll) &#123;</span><br><span class="line">                    $(<span class="string">'body'</span>).css(<span class="string">'overflow'</span>, <span class="string">'auto'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, data.transition)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 按钮关闭</span></span><br><span class="line">        $(<span class="string">'.'</span> + idText + <span class="string">'_item.item3'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            close();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 遮罩层关闭</span></span><br><span class="line">        <span class="keyword">if</span> (data.maskClose) &#123;</span><br><span class="line">            $(<span class="string">'.'</span> + idText + <span class="string">'_mask'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                close();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$error</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    $modal(&#123;</span><br><span class="line">        type: <span class="string">'message'</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">'error'</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） </span></span><br><span class="line">        content: e, <span class="comment">// 提示文字 </span></span><br><span class="line">        center: <span class="literal">true</span>,<span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">        top:<span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">        transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">        closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成功提示</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$success</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    $modal(&#123;</span><br><span class="line">        type: <span class="string">'message'</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">'success'</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） </span></span><br><span class="line">        content: e, <span class="comment">// 提示文字 </span></span><br><span class="line">        center: <span class="literal">true</span>,<span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">        top:<span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">        transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">        closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用弹窗库</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"手机号格式有误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".message"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  message($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message1"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"人间值得"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"人间值得"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// alert</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alert</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"alert"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">300</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">true</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    pageScroll: <span class="literal">true</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">300</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".alert"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".alert2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"alert"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">999999999</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms） 时间越长相当于需要手动关闭</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">false</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    pageScroll: <span class="literal">false</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">300</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// confirm</span></span><br><span class="line">$(<span class="string">".confirm"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"confirm"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"info"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    title: <span class="string">"问你个问题"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    content: <span class="string">"人间值得?"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">    mask: <span class="literal">true</span>, <span class="comment">// 是否显示遮罩层   默认为 false</span></span><br><span class="line">    top: <span class="number">400</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    center: <span class="literal">true</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    pageScroll: <span class="literal">false</span>, <span class="comment">// 是否禁止页面滚动</span></span><br><span class="line">    width: <span class="number">500</span>, <span class="comment">// 单位 px 默认显示宽度 最下默认为300</span></span><br><span class="line">    maskClose: <span class="literal">true</span>, <span class="comment">// 是否点击遮罩层可以关闭提示框 默认为false</span></span><br><span class="line">    cancelText: <span class="string">"取消"</span>, <span class="comment">// 取消按钮 默认为 取消</span></span><br><span class="line">    confirmText: <span class="string">"确认"</span>, <span class="comment">// 确认按钮 默认未 确认</span></span><br><span class="line">    cancel: <span class="function"><span class="keyword">function</span> (<span class="params">close</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 回调函数  //  函数返回关闭事件 调用-关闭弹窗</span></span><br><span class="line">      $modal(&#123;</span><br><span class="line">        type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        content: <span class="string">"用户点击了取消"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">      &#125;);</span><br><span class="line">      close(); <span class="comment">// 调用返回的 关闭弹框函数 才能关闭</span></span><br><span class="line">    &#125;,</span><br><span class="line">    confirm: <span class="function"><span class="keyword">function</span> (<span class="params">close</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 回调函数  //  函数返回关闭事件 调用-关闭弹窗</span></span><br><span class="line">      $modal(&#123;</span><br><span class="line">        type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'   message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">        icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">        content: <span class="string">"用户点击了确认"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">      &#125;);</span><br><span class="line">      close(); <span class="comment">// 调用返回的 关闭弹框函数 才能关闭</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  快捷错误提示</span></span><br><span class="line"><span class="comment">// $error('这是一条错误提示！')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  快捷成功提示</span></span><br><span class="line"><span class="comment">// $success('这是一条成功提示！')</span></span><br></pre></td></tr></table></figure></li><li><p>如果用户输入时输入了手机号格式有误，会是以下效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%94%99%E8%AF%AF%E5%BC%B9%E7%AA%97%E6%8F%90%E7%A4%BA.gif" alt="" /></p></li></ul><h2 id="a-id2登录页2登录页a"><a class="markdownIt-Anchor" href="#a-id2登录页2登录页a"></a> <a id="2.登录页">2.登录页</a></h2><p>然后是写登录页的页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/login.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 登录方式 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginWay"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 短信验证码登录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"codeLogin"</span>&gt;</span></span><br><span class="line">          短信验证码登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"line1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 29px; color: aquamarine"</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 服务密码登录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pwdLogin"</span>&gt;</span></span><br><span class="line">          服务密码登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"line2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"codeForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>验证码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"getCode"</span>&gt;</span>点击获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"pwdForm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">name</span>=<span class="string">"phone"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">required</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          登录</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/modal_dialog.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/tccj.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 点击短信验证码登录触发</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".codeLogin"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 登录操作切换动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line2"</span>).css(<span class="string">"width"</span>, <span class="string">"0"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line1"</span>).css(<span class="string">"width"</span>, <span class="string">"100%"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// form表单旋转动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"animation"</span>, <span class="string">"rotate 0.8s ease-in-out"</span>);</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">      $(<span class="string">".codeForm"</span>).css(<span class="string">"transform"</span>, <span class="string">"rotateY(0deg)"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 点击服务密码登录触发</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".pwdLogin"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 登录操作切换动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line2"</span>).css(<span class="string">"width"</span>, <span class="string">"100%"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".line1"</span>).css(<span class="string">"width"</span>, <span class="string">"0"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// form表单旋转动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">".codeForm"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pwdForm"</span>).css(<span class="string">"animation"</span>, <span class="string">"rotate 0.8s ease-in-out"</span>);</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户点击发送短信</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 发送短信</span></span></span><br><span class="line"><span class="javascript">        $.ajax(<span class="string">""</span>, &#123;</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">"get"</span>,</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 用户提交表单</span></span></span><br><span class="line"><span class="javascript">      $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止默认行为</span></span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 判断手机号格式是否正确</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 提示错误信息</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>因为CSS样式是用的上面的那个CSS，所以这里就不写了</p><p>直接看效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%94%99%E8%AF%AF%E5%BC%B9%E7%AA%97%E6%8F%90%E7%A4%BA02.gif" alt="" /></p><h2 id="a-id3添加头部tab3添加头部taba"><a class="markdownIt-Anchor" href="#a-id3添加头部tab3添加头部taba"></a> <a id="3.添加头部tab">3.添加头部tab</a></h2><p>HTML部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-shouye"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-denglu"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-zhuce"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS部分</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#3498db</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.175</span>, <span class="number">0.885</span>, <span class="number">0.32</span>, <span class="number">1.275</span>) <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E5%A4%B4%E9%83%A8tab.gif" alt="" /></p><h2 id="a-id4完善注册页的ajax请求4完善注册页的ajax请求a"><a class="markdownIt-Anchor" href="#a-id4完善注册页的ajax请求4完善注册页的ajax请求a"></a> <a id="4.完善注册页的ajax请求">4.完善注册页的ajax请求</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户点击发送短信</span></span><br><span class="line">    <span class="comment">// $(".getCode").on("click", (e) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // 发送短信</span></span><br><span class="line">    <span class="comment">//   $.ajax("", &#123;</span></span><br><span class="line">    <span class="comment">//     type: "get",</span></span><br><span class="line">    <span class="comment">//   &#125;);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单</span></span><br><span class="line">    $(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">"form"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 提交注册信息</span></span><br><span class="line">            $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                        <span class="comment">// 用户注册完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="a-id5完善登录页的ajax请求5完善登录页的ajax请求a"><a class="markdownIt-Anchor" href="#a-id5完善登录页的ajax请求5完善登录页的ajax请求a"></a> <a id="5.完善登录页的ajax请求">5.完善登录页的ajax请求</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户点击发送短信</span></span><br><span class="line">    <span class="comment">// $(".getCode").on("click", (e) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   // 发送短信</span></span><br><span class="line">    <span class="comment">//   $.ajax("", &#123;</span></span><br><span class="line">    <span class="comment">//     type: "get",</span></span><br><span class="line">    <span class="comment">//   &#125;);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">    $(<span class="string">".codeForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".codeForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                        <span class="comment">// $(".message2").trigger("click");</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">".pwdForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">var</span> $phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test($phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中用到的弹窗插件为，首先在需要用到弹窗插件的页面中添加以下button按钮，其class值为message、message1、message2、message3…</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">data-icon</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message1"</span> <span class="attr">data-icon</span>=<span class="string">"warning"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message2"</span> <span class="attr">data-icon</span>=<span class="string">"success"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"message3"</span> <span class="attr">data-icon</span>=<span class="string">"warning"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>tccj__info.js</p><p><code>.message</code> – <code>手机号格式有误</code></p><p><code>.message1</code> – <code>此用户未注册</code></p><p><code>.message2</code> – <code>登录成功</code></p><p><code>.message3</code> – <code>用户名或密码错误</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'  message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: e, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"手机号格式有误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">true</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">".message"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  message($(<span class="keyword">this</span>).attr(<span class="string">"data-icon"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">".message1"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"warning"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"此用户未注册"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    center: <span class="literal">false</span>, <span class="comment">// 是否绝对居中 默认为false  设置true后   top无效</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200   单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$(<span class="string">".message2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"success"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"登录成功"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">".message3"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $modal(&#123;</span><br><span class="line">    type: <span class="string">"message"</span>, <span class="comment">//弹框类型  'alert' or  'confirm' or 'message'    message提示(开启之前如果之前含有弹框则清除)</span></span><br><span class="line">    icon: <span class="string">"warning"</span>, <span class="comment">// 提示图标显示 'info' or 'success' or 'warning' or 'error'  or 'question'</span></span><br><span class="line">    timeout: <span class="number">2000</span>, <span class="comment">// 单位 ms  显示多少毫秒后关闭弹框 （ confirm 下无效 | 不传默认为 2000ms | 最短显示时间为500ms）</span></span><br><span class="line">    content: <span class="string">"用户名或密码错误"</span>, <span class="comment">// 提示文字</span></span><br><span class="line">    top: <span class="number">100</span>, <span class="comment">//距离顶部距离 单位px</span></span><br><span class="line">    transition: <span class="number">300</span>, <span class="comment">//过渡动画 默认 200  单位ms</span></span><br><span class="line">    closable: <span class="literal">false</span>, <span class="comment">// 是否显示可关闭按钮  默认为 false</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>然后去modal_dialog.js文件中去设置以下message提示框长度</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置message提示框长度</span></span><br><span class="line">    <span class="keyword">var</span> width_s = <span class="number">40</span> + fontSize * data.content.length + fontSize + <span class="number">10</span>;</span><br></pre></td></tr></table></figure><blockquote><p>提示：可以在文件中直接用 CTRL + F 搜索即可</p></blockquote></li></ul><p>现在你的弹窗应该已经可以正常运作了，只需要在需要弹窗的地方自动触发button按钮即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>); <span class="comment">// 自动点击class值为message的元素</span></span><br></pre></td></tr></table></figure><ul><li><p>弹窗效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5.gif" alt="" /></p></li></ul><h2 id="a-id6抽奖页-首页6抽奖页首页a"><a class="markdownIt-Anchor" href="#a-id6抽奖页-首页6抽奖页首页a"></a> <a id="6.抽奖页--首页">6.抽奖页–首页</a></h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rel</span>=<span class="string">"stylesheet"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">href</span>=<span class="string">"http://at.alicdn.com/t/font_2067208_jokj9bfucw.css"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/css/login.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/jQuery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/jqueryRotate.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">".pointer"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> duArry = [</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">4350</span>, name: <span class="string">"免单4999"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1550</span>, name: <span class="string">"免单50元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2250</span>, name: <span class="string">"免单50元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2311</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2281</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2300</span>, name: <span class="string">"免单10元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2000</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1980</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2720</span>, name: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">2700</span>, namm: <span class="string">"免单5元"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1650</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1660</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1670</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1680</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1690</span>, name: <span class="string">"免分期服务费"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1703</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1710</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1719</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1728</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1738</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1746</span>, name: <span class="string">"提高白条额度"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1755</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1763</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1770</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1776</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1783</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1790</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1758</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1779</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1762</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1789</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">            &#123; num: <span class="number">1774</span>, name: <span class="string">"未中奖"</span> &#125;,</span></span><br><span class="line">          ];</span><br><span class="line"><span class="actionscript">          <span class="comment">// 定义一个随机度数</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> du = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * duArry.length);</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> userPhone = $(<span class="string">"#userPhone"</span>).text();</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 判断度数是否为undefined</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">while</span> (duArry[du].name === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="javascript">            du = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * duArry.length);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (duArry[du].name !== <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">break</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 旋转轮盘</span></span></span><br><span class="line"><span class="javascript">          $(<span class="string">".rotate&gt;img"</span>).rotate(&#123;</span></span><br><span class="line">            angle: 0,</span><br><span class="line">            animateTo: duArry[du].num,</span><br><span class="line">            duration: 5000,</span><br><span class="line"><span class="actionscript">            callback: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">              $.ajax(<span class="string">"/reduce"</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">"get"</span>,</span></span><br><span class="line">                data: &#123;</span><br><span class="line">                  phone: userPhone,</span><br><span class="line">                  prize: duArry[du].name,</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="actionscript">                success: <span class="function"><span class="keyword">function</span> <span class="params">(number)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// console.log(number.data);</span></span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// 修改文本内容</span></span></span><br><span class="line"><span class="javascript">                  $(<span class="string">".degree"</span>).text(<span class="string">"您还剩余抽奖次数为"</span> + number.data + <span class="string">"次"</span>);</span></span><br><span class="line"></span><br><span class="line">                  if (number.data == 0) &#123;</span><br><span class="line"><span class="javascript">                    $(<span class="string">".pointer"</span>).unbind();</span></span><br><span class="line"><span class="javascript">                    $.ajax(<span class="string">"/show"</span>, &#123;</span></span><br><span class="line"><span class="actionscript">                      type: <span class="string">"get"</span>,</span></span><br><span class="line">                      data: &#123;</span><br><span class="line">                        phone: userPhone,</span><br><span class="line">                      &#125;,</span><br><span class="line"><span class="actionscript">                      success: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                        $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                          <span class="comment">// console.log(value);</span></span></span><br><span class="line"><span class="javascript">                          <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">// console.log(value);</span></span></span><br><span class="line"><span class="javascript">                            $.each(value, (index, prize) =&gt; &#123;</span></span><br><span class="line"><span class="javascript">                              <span class="built_in">console</span>.log(prize);</span></span><br><span class="line"><span class="javascript">                              $(<span class="string">".mask&gt;ul"</span>).append($(<span class="string">`&lt;li&gt;<span class="subst">$&#123;prize&#125;</span>&lt;/li&gt;`</span>));</span></span><br><span class="line">                            &#125;);</span><br><span class="line"><span class="handlebars"><span class="xml">                            // $(".mask&gt;ul").append($(`<span class="tag">&lt;<span class="name">li</span>&gt;</span>$&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>`));</span></span></span><br><span class="line">                          &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                      &#125;,</span><br><span class="line"><span class="actionscript">                    &#125;).then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                      <span class="comment">// $(".mask").css("transform", "scale(1)");</span></span></span><br><span class="line"><span class="actionscript">                      <span class="comment">// $(".mask").css("transition", "all 2s");</span></span></span><br><span class="line"><span class="javascript">                      $(<span class="string">".mask"</span>).css(</span></span><br><span class="line"><span class="actionscript">                        <span class="string">"animation"</span>,</span></span><br><span class="line"><span class="actionscript">                        <span class="string">"scale 0.5s ease-in-out forwards"</span></span></span><br><span class="line">                      );</span><br><span class="line">                    &#125;);</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-shouye"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-denglu"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/quit"</span> <span class="attr">class</span>=<span class="string">"iconfont icon-tuichu_huaban1"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pointer"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/img/pointer.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"rotate"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/img/jp.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"degree"</span>&gt;</span>您的抽奖次数为<span class="tag">&lt;<span class="name">a</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">a</span>&gt;</span>次<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mask"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用JS动画来完成抽奖动画，用户抽三次奖，最后会出一个结果，不能继续抽奖</p><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%BD%AC%E7%9B%98%E6%8A%BD%E5%A5%96.gif" alt="" /></p><h2 id="a-id7完成注册验证码接口的接入7完成注册验证码接口的接入a"><a class="markdownIt-Anchor" href="#a-id7完成注册验证码接口的接入7完成注册验证码接口的接入a"></a> <a id="7.完成注册验证码接口的接入">7.完成注册验证码接口的接入</a></h2><p>第一次搞这个，遇到了很多的问题，没有及时解决，问题包括：什么阿里云天级流控、接口被占用啊等等一系列后端问题，于是后端说这是阿里云默认的限制，你短信不能发送的太快，于是呢我就换了个手机号发送。</p><p>如下错误信息</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Error</span> [isv.BUSINESS_LIMIT_CONTROLError]: 触发天级流控Permits:<span class="number">10</span>, <span class="attr">URL</span>: https:<span class="comment">//dysmsapi.aliyuncs.com/</span></span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:<span class="number">97</span>:<span class="number">5</span>) &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    RequestId: <span class="string">'8FD669CC-506F-46B2-BA4F-5702EFD0A1CB'</span>,</span><br><span class="line">    Code: <span class="string">'isv.BUSINESS_LIMIT_CONTROL'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  code: <span class="string">'isv.BUSINESS_LIMIT_CONTROL'</span>,</span><br><span class="line">  url: <span class="string">'https://dysmsapi.aliyuncs.com/'</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    url: <span class="string">'https://dysmsapi.aliyuncs.com/'</span>,</span><br><span class="line">    request: &#123; <span class="attr">headers</span>: [<span class="built_in">Object</span>: <span class="literal">null</span> prototype] &#125;,</span><br><span class="line">    response: &#123; <span class="attr">statusCode</span>: <span class="number">200</span>, <span class="attr">headers</span>: [<span class="built_in">Object</span>] &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>1.首先我注册、登录时表单出现默认提交的情况，于是去百度上看了一下，只需要在需要点击提交的按钮上添加 <code>onclick=&quot;return false&quot;</code> ，即可禁止默认提交行为</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=<span class="string">"submit"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn codeBtn"</span> onclick=<span class="string">"return false"</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p>2.注册页的逻辑，这都是我自己想到的需求，可能不太完美吧，希望大佬多多建议</p><ul><li>手机号必须是符合手机号格式的才能注册</li><li>密码必须是包含数字、字母、特殊符号中的其中两种的才能注册</li><li>验证码必须是和后端发送过来的验证码一致才能注册</li><li>点击下一步会自动进行登录操作，完成登录</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户输入的手机号</span></span><br><span class="line">    <span class="keyword">var</span> phone;</span><br><span class="line">    <span class="comment">// 用户输入的密码</span></span><br><span class="line">    <span class="keyword">var</span> password;</span><br><span class="line">    <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">    <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">    <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">    <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">    $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        password = $(<span class="string">"#password"</span>).val();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">            !<span class="regexp">/^(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.&#123;12,16&#125;$/</span>.test(</span><br><span class="line">                password</span><br><span class="line">            )</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// 验证数字，大写字母，小写字母，特殊字符四选三组成的密码强度，且长度在12到16个数之间</span></span><br><span class="line">            $(<span class="string">".message9"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">                password,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 发送短信</span></span><br><span class="line">            $.ajax(<span class="string">"/codeRequire"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// console.log(response);</span></span><br><span class="line">                    <span class="comment">// console.log(response.code);</span></span><br><span class="line">                    <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">304</span>) &#123;</span><br><span class="line">                        <span class="comment">// 此用户已注册</span></span><br><span class="line">                        $(<span class="string">".message8"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                        <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                            codeTime--;</span><br><span class="line">                            <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                            <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="comment">// 清除计时器</span></span><br><span class="line">                                clearInterval(timer);</span><br><span class="line">                                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, <span class="number">1000</span>);</span><br><span class="line">                        <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                        codeRes = response.data;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                        codeState = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单</span></span><br><span class="line">    $(<span class="string">".btn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 阻止默认行为</span></span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">                password,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 提交注册信息</span></span><br><span class="line">            $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// 获取用户输入的验证码</span></span><br><span class="line">                    <span class="keyword">var</span> codeInput = $(<span class="string">"#code"</span>).val();</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"用户输入的验证码："</span>, codeInput);</span><br><span class="line">                    <span class="comment">// 如果用户没有注册</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (codeInput == codeRes) &#123;</span><br><span class="line">                            <span class="comment">// 验证码正确</span></span><br><span class="line">                            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                            <span class="comment">// // 用户注册完毕直接跳到抽奖页面</span></span><br><span class="line">                            <span class="comment">// window.location = "/";</span></span><br><span class="line">                            <span class="comment">// 注册完成后完成登录功能 -- 使用密码登录</span></span><br><span class="line">                            <span class="comment">// 表单序列化</span></span><br><span class="line">                            <span class="comment">// 手机验证码登录</span></span><br><span class="line">                            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                                type: <span class="string">"post"</span>,</span><br><span class="line">                                data,</span><br><span class="line">                                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                                        <span class="comment">// $("body").html()</span></span><br><span class="line">                                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;,</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">// 验证码错误</span></span><br><span class="line">                            $(<span class="string">".message5"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>3.效果演示</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C01.gif" alt="" /></p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C02.gif" alt="" /></p></li></ul><h2 id="a-id8完成登录验证码接口的接入8完成登录验证码接口的接入a"><a class="markdownIt-Anchor" href="#a-id8完成登录验证码接口的接入8完成登录验证码接口的接入a"></a> <a id="8.完成登录验证码接口的接入">8.完成登录验证码接口的接入</a></h2><ul><li><p>1.有的人可能会说，为什么一个验证码接口要分为两个：一个注册验证码接口，和一个登录验证码接口，原因就是</p><ul><li><p>登录验证码接口是我改的</p><p>加了用户手机号查询，用户点击获取验证码后，前端首先会给后端返回数据（手机号 – phone），然后 后端会去数据库里去查询有没有这个用户，如果没有就把数据返回给前端，然后前端会把该数据以任何形式渲染到页面中，提示用户未注册，这样可以提升用户体验感，不可能是不管你有没有注册，先给你发送验证码，先验证验证码对不对然后再点击登录后，，发现你没有注册，这样你可能就是反手就是一个退出了。</p></li><li><p>注册验证码接口是我加的</p><p>和上面一样</p><p>只不过是注册验证码接口是查询用户是不是注册了，如果用户已经注册了，提示用户已注册。</p></li></ul></li><li><p>2.登录页的逻辑，和注册页的逻辑基本一样，这里不再赘述</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 用户输入的手机号</span></span><br><span class="line">    <span class="keyword">var</span> phone;</span><br><span class="line">    <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">    <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">    <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">    <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">    $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 发送短信</span></span><br><span class="line">            $.ajax(<span class="string">"/code"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// console.log(response);</span></span><br><span class="line">                    <span class="comment">// console.log(response.code);</span></span><br><span class="line">                    <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        <span class="comment">// 此用户未注册</span></span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                        <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                            codeTime--;</span><br><span class="line">                            <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                            <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="comment">// 清除计时器</span></span><br><span class="line">                                clearInterval(timer);</span><br><span class="line">                                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, <span class="number">1000</span>);</span><br><span class="line">                        <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                        codeRes = response.data;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                        codeState = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">    $(<span class="string">".codeBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 阻止默认行为</span></span><br><span class="line">            e.preventDefault();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">            phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">            <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">                <span class="comment">// 提示错误信息</span></span><br><span class="line">                $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 手机号格式正确</span></span><br><span class="line">                <span class="comment">// 表单序列化</span></span><br><span class="line">                <span class="keyword">var</span> data = $(<span class="string">".codeForm"</span>).serializeArray();</span><br><span class="line">                <span class="comment">// 手机验证码登录</span></span><br><span class="line">                $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                    type: <span class="string">"post"</span>,</span><br><span class="line">                    data,</span><br><span class="line">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                            <span class="comment">// console.log(response.message);</span></span><br><span class="line">                            <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                            $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                            <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                            <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                            $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 密码登录</span></span><br><span class="line">    $(<span class="string">".pwdForm"</span>).on(<span class="string">"submit"</span>, (e) =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 用户登录完毕直接跳到抽奖页面</span></span><br><span class="line">                        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="a-id9页面跳转路由不刷新9页面跳转路由不刷新a"><a class="markdownIt-Anchor" href="#a-id9页面跳转路由不刷新9页面跳转路由不刷新a"></a> <a id="9.页面跳转路由不刷新">9.页面跳转路由不刷新</a></h2><blockquote><p>…渐渐崩溃</p></blockquote><p>今天又学到了新东西，刷新了我对注释的认知🥁</p><p>你猜下面这段代码放到我代码里会怎样？？？(就这样被注释着执行)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $("body").html(`&#123;% include "index.html" %&#125;`);</span></span><br></pre></td></tr></table></figure><p>结果是它居然能正常执行，搞的我一脸懵逼…，最后是实在受不了了，把它删了，就没事了，好像是不能包含 <code>script</code> 标签</p><p>原理，在ajax中有一股神秘的力量，我不知从何而来，我想触及到它，但我无法触及它，不管你有没有注释都会正常的执行</p><p>上面的代码意思是 我要跳转到 <code>index.html</code> 页面，而且我的 <code>index.html</code> 页面中在没有登录的情况下会自动跳转到登录页面，所以…就这样完成了递归原理来刷新页面，效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E9%80%92%E5%BD%92%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2.gif" alt="" /></p><p>后来经过我们的一番讨论，想到了怎么完成这样的一个功能  – 页面变化而路由不变</p><p>那就是通过jQuery在想要跳转页面的地方都来重新绘制此页面，把此页面绘制成为想要跳转到的那个页面的样子，这当然在其中页遇到了问题，那就是 <code>script</code> 标签不能被直接拿来绘制，需要先创建 <code>script</code> 标签，在为其添加文件路径，最后把 <code>script</code> 标签之间append到body中即可</p><ul><li><p>注册成功后显示用户抽奖界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>在全局定义那个loginM路由的形参，就可以在全局封装一个用来绘制抽奖页的函数了</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用户输入的手机号</span></span><br><span class="line">  <span class="keyword">var</span> phone;</span><br><span class="line">  <span class="comment">// 用户输入的密码</span></span><br><span class="line">  <span class="keyword">var</span> password;</span><br><span class="line">  <span class="comment">// 获取到的后端发送过来的验证码</span></span><br><span class="line">  <span class="keyword">var</span> codeRes;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 全局从后端接收到的data数据</span></span><br><span class="line">  <span class="keyword">var</span> timesLoginM;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绘制首页的函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">                      &lt;link rel="stylesheet" href="/css/index.css" /&gt;</span></span><br><span class="line"><span class="string">                      &lt;header&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/" class="iconfont icon-shouye"&gt;首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;a href="/quit" class="iconfont icon-tuichu_huaban1"&gt;退出&lt;/a&gt;</span></span><br><span class="line"><span class="string">                      &lt;/header&gt;</span></span><br><span class="line"><span class="string">                      &lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class="pointer"&gt;&lt;img src="/img/pointer.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class="rotate"&gt;&lt;img src="/img/jp.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                      &lt;/div&gt;</span></span><br><span class="line"><span class="string">                      &lt;p class="degree"&gt;您的抽奖次数为&lt;a&gt; <span class="subst">$&#123;timesLoginM&#125;</span> &lt;/a&gt;次&lt;/p&gt;</span></span><br><span class="line"><span class="string">                      &lt;div class="mask"&gt;</span></span><br><span class="line"><span class="string">                        &lt;ul&gt;</span></span><br><span class="line"><span class="string">                          &lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">                          &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">                          &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line"><span class="string">                        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">                      &lt;/div&gt;</span></span><br><span class="line"><span class="string">                `</span>);</span><br><span class="line">      <span class="comment">//引入第一个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script1.src = <span class="string">"/js/index.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">      <span class="comment">//引入第二个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script2.src = <span class="string">"/js/jQuery-1.12.4.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">      <span class="comment">//引入第三个script元素</span></span><br><span class="line">      <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">      script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">      script3.src = <span class="string">"/js/jqueryRotate.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">      $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置一个点击状态，如果点击了获取验证码，则设置为true,</span></span><br><span class="line">  <span class="comment">// 如果点击了btn(下一步)而没有点击获取验证码，则设置为false</span></span><br><span class="line">  <span class="keyword">var</span> codeState = <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">  $(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">    phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    password = $(<span class="string">"#password"</span>).val();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">      <span class="comment">// 提示错误信息</span></span><br><span class="line">      $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">      !<span class="regexp">/^(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.&#123;12,16&#125;$/</span>.test(password)</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="comment">// 验证数字，大写字母，小写字母，特殊字符四选三组成的密码强度，且长度在12到16个数之间</span></span><br><span class="line">      $(<span class="string">".message9"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> data = &#123;</span><br><span class="line">        phone,</span><br><span class="line">        password,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// 发送短信</span></span><br><span class="line">      $.ajax(<span class="string">"/codeRequire"</span>, &#123;</span><br><span class="line">        type: <span class="string">"post"</span>,</span><br><span class="line">        data,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// console.log(response);</span></span><br><span class="line">          <span class="comment">// console.log(response.code);</span></span><br><span class="line">          <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">          <span class="keyword">if</span> (response.code === <span class="number">304</span>) &#123;</span><br><span class="line">            <span class="comment">// 此用户已注册</span></span><br><span class="line">            $(<span class="string">".message8"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">            $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">            <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              codeTime--;</span><br><span class="line">              <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">              $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">              <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">              $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 清除计时器</span></span><br><span class="line">                clearInterval(timer);</span><br><span class="line">                $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">            <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">            codeRes = response.data;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">            codeState = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 用户提交表单</span></span><br><span class="line">  $(<span class="string">".btn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="comment">// 阻止默认行为</span></span><br><span class="line">      e.preventDefault();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> data = &#123;</span><br><span class="line">        phone,</span><br><span class="line">        password,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// 提交注册信息</span></span><br><span class="line">      $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">        type: <span class="string">"post"</span>,</span><br><span class="line">        data,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// 获取用户输入的验证码</span></span><br><span class="line">          <span class="keyword">var</span> codeInput = $(<span class="string">"#code"</span>).val();</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"用户输入的验证码："</span>, codeInput);</span><br><span class="line">          <span class="comment">// 如果用户没有注册</span></span><br><span class="line">          <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (codeInput == codeRes) &#123;</span><br><span class="line">              <span class="comment">// 验证码正确</span></span><br><span class="line">              <span class="built_in">console</span>.log(response.message);</span><br><span class="line">              <span class="comment">// // 用户注册完毕直接绘制个抽奖页面</span></span><br><span class="line">              <span class="comment">// 注册完成后完成登录功能 -- 使用密码登录</span></span><br><span class="line">              <span class="comment">// 表单序列化</span></span><br><span class="line">              <span class="comment">// 手机验证码登录</span></span><br><span class="line">              $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    <span class="comment">// window.location = "/";</span></span><br><span class="line">                    index();</span><br><span class="line">                  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// 验证码错误</span></span><br><span class="line">              $(<span class="string">".message5"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">            $(<span class="string">".message4"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(response.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现已经实现了注册成功后 2秒钟后 显示用户抽奖界面，并且页面不刷新</p></blockquote></li><li><p>判断用户如果没有注册的话，直接跳转到用户注册界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>同样是绘制页面，这次绘制的是注册页</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绘制注册页的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;button class="message" data-icon="info"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message4" data-icon="info"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message5" data-icon="error"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message6" data-icon="error"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message7" data-icon="success"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message8" data-icon="warning"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button class="message9" data-icon="warning"&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;header style="width: 176px"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/register" class="iconfont icon-zhuce"&gt;注册&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="loginBox"&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;注册&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;form action="" method="" class="registerForm"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="text" required id="phone" name="phone" /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;手机号&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="password" required id="password" name="password" /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;密码&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="item"&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="text" id="code" name="code" required /&gt;</span></span><br><span class="line"><span class="string">            &lt;label for=""&gt;验证码&lt;/label&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="button" class="getCode" value="点击获取" /&gt;</span></span><br><span class="line"><span class="string">            &lt;input type="button" class="coverGetCode" value="" /&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;button type="submit" class="btn" onclick="return false"&gt;</span></span><br><span class="line"><span class="string">            下一步</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">        <span class="comment">//引入第一个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script1.src =</span><br><span class="line">            <span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">        <span class="comment">//引入第二个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script2.src = <span class="string">"/js/modal_dialog.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">        <span class="comment">//引入第三个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script3.src = <span class="string">"/js/tccj_info.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">        <span class="comment">//引入第四个script元素</span></span><br><span class="line">        <span class="keyword">var</span> script4 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script4.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">        script4.src = <span class="string">"/js/register.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">        $(<span class="string">"body"</span>).append(script4);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户点击发送短信 -- 点击获取验证码</span></span><br><span class="line">$(<span class="string">".getCode"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 当点击验证码后就获取到用户刚才输入的手机号和密码</span></span><br><span class="line">    phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    <span class="comment">// console.log(phone, password);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">        <span class="comment">// 提示错误信息</span></span><br><span class="line">        $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> data = &#123;</span><br><span class="line">            phone,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 发送短信</span></span><br><span class="line">        $.ajax(<span class="string">"/code"</span>, &#123;</span><br><span class="line">            type: <span class="string">"post"</span>,</span><br><span class="line">            data,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// console.log(response);</span></span><br><span class="line">                <span class="built_in">console</span>.log(response.code);</span><br><span class="line">                <span class="comment">// 表示用户已经点击了获取验证码</span></span><br><span class="line">                <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(response.datas);</span><br><span class="line">                    <span class="comment">// 此用户未注册</span></span><br><span class="line">                    $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    register();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 验证码发送成功弹窗</span></span><br><span class="line">                    $(<span class="string">".message7"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// 验证码获取倒计时 -- 60秒</span></span><br><span class="line">                    <span class="keyword">var</span> codeTime = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                        codeTime--;</span><br><span class="line">                        <span class="comment">// 把每次的倒计时都重新渲染到HTML页面</span></span><br><span class="line">                        $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, codeTime);</span><br><span class="line">                        <span class="comment">// 通过元素覆盖实现禁止点击</span></span><br><span class="line">                        $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (codeTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">// 清除计时器</span></span><br><span class="line">                            clearInterval(timer);</span><br><span class="line">                            $(<span class="string">".getCode"</span>).attr(<span class="string">"value"</span>, <span class="string">"重新获取"</span>);</span><br><span class="line">                            $(<span class="string">".coverGetCode"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, <span class="number">1000</span>);</span><br><span class="line">                    <span class="comment">// console.log(codeTime); // 60</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 获取从后端接收到的验证码</span></span><br><span class="line">                    codeRes = response.data;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"验证码："</span>, codeRes);</span><br><span class="line">                    codeState = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现用户如果没有注册的话，直接跳转到用户注册界面，并且页面不刷新</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%B7%B3%E8%BD%AC01.gif" alt="" /></p></li><li><p>登录成功后显示用户抽奖界面（<font color="red">**注: **</font>页面不刷新)</p><ul><li>同样也是绘制页面，只不过这次是绘制抽奖界面</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绘制首页的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        $(<span class="string">"body"</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">            &lt;link rel="stylesheet" href="/css/index.css" /&gt;</span></span><br><span class="line"><span class="string">            &lt;header&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/" class="iconfont icon-shouye"&gt;首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/login" class="iconfont icon-denglu"&gt;登录&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/quit" class="iconfont icon-tuichu_huaban1"&gt;退出&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="pointer"&gt;&lt;img src="/img/pointer.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="rotate"&gt;&lt;img src="/img/jp.png" alt="" /&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;p class="degree"&gt;您的抽奖次数为&lt;a&gt; <span class="subst">$&#123;timesLoginM&#125;</span> &lt;/a&gt;次&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="mask"&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;!-- &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;未中奖&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;未中奖&lt;/li&gt; --&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">          <span class="comment">//引入第一个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script1 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script1.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script1.src = <span class="string">"/js/index.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script1);</span><br><span class="line">          <span class="comment">//引入第二个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script2 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script2.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script2.src = <span class="string">"/js/jQuery-1.12.4.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script2);</span><br><span class="line">          <span class="comment">//引入第三个script元素</span></span><br><span class="line">          <span class="keyword">var</span> script3 = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">          script3.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">          script3.src = <span class="string">"/js/jqueryRotate.js"</span>; <span class="comment">//填自己的js路径</span></span><br><span class="line">          $(<span class="string">"body"</span>).append(script3);</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户提交表单--验证码登录</span></span><br><span class="line">$(<span class="string">".codeBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (codeState === <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 阻止默认行为</span></span><br><span class="line">        e.preventDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">        phone = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">            <span class="comment">// 提示错误信息</span></span><br><span class="line">            $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手机号格式正确</span></span><br><span class="line">            <span class="comment">// 表单序列化</span></span><br><span class="line">            <span class="comment">// var data = $(".codeForm").serializeArray();</span></span><br><span class="line">            <span class="keyword">var</span> data = &#123;</span><br><span class="line">                phone,</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// 手机验证码登录</span></span><br><span class="line">            $.ajax(<span class="string">"/loginY"</span>, &#123;</span><br><span class="line">                type: <span class="string">"post"</span>,</span><br><span class="line">                data,</span><br><span class="line">                success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(response.code);</span><br><span class="line">                    <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="comment">// console.log(response.message);</span></span><br><span class="line">                        <span class="comment">// 提示用户登录成功弹窗</span></span><br><span class="line">                        $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="comment">// 直接绘制个首页</span></span><br><span class="line">                        index();</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                        $(<span class="string">".message1"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                        <span class="built_in">console</span>.log(response.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">".message6"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码登录</span></span><br><span class="line">$(<span class="string">".pwdBtn"</span>).on(<span class="string">"click"</span>, (e) =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// 判断手机号格式是否正确</span></span><br><span class="line">    phone = $(<span class="string">"#phone2"</span>).val();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>.test(phone)) &#123;</span><br><span class="line">        <span class="comment">// 提示错误信息</span></span><br><span class="line">        $(<span class="string">".message"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 手机号格式正确</span></span><br><span class="line">        <span class="comment">// 表单序列化</span></span><br><span class="line">        <span class="keyword">var</span> data = $(<span class="string">".pwdForm"</span>).serializeArray();</span><br><span class="line">        <span class="comment">// 密码登录</span></span><br><span class="line">        $.ajax(<span class="string">"/loginM"</span>, &#123;</span><br><span class="line">            type: <span class="string">"post"</span>,</span><br><span class="line">            data,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message2"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                    <span class="comment">// 用户登录完毕直接绘制个抽奖页面</span></span><br><span class="line">                    <span class="comment">// window.location = "/";</span></span><br><span class="line">                    timesLoginM = response.data.times;</span><br><span class="line">                    index();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.code === <span class="number">400</span>) &#123;</span><br><span class="line">                    $(<span class="string">".message3"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">                    <span class="comment">// console.log(response.message);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们会发现登录成功后显示用户抽奖界面，并且页面是不会刷新的</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdDraw%E5%9B%BE%E7%89%87/%E8%B7%B3%E8%BD%AC02.gif" alt="" /></p></li></ul><p>至此，项目已基本完成。</p>]]></content>
    
    <summary type="html">
    
      京东抽奖项目开发笔记
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>NodeJs 取参的四种方法</title>
    <link href="https://extheor.github.io/posts/7380b71/index.html"/>
    <id>https://extheor.github.io/posts/7380b71/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.949Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="nodejs-取参的四种方法"><a class="markdownIt-Anchor" href="#nodejs-取参的四种方法"></a> NodeJs 取参的四种方法</h1><p>参考：<a href="https://my.oschina.net/u/2519530/blog/535309" target="_blank" rel="noopener">https://my.oschina.net/u/2519530/blog/535309</a> 🙏</p><p>获取请求很中的参数是每个web后台处理的必经之路，nodejs的 <strong>express框架</strong> 提供了四种方法来实现。</p><ol><li><a href="#req.body">req.body</a></li><li><a href="#req.query">req.query</a></li><li><a href="#req.params">req.params</a></li><li><a href="#req.param()">req.param()</a></li></ol><p><a id="req.body"><strong>首先介绍第一个req.body</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">官方文档解释：</span><br><span class="line">Contains key-value pairs of data submitted in the request body. By default, it is undefined,</span><br><span class="line"> and is populated when you use body-parsing middleware such as body-parser and multer.</span><br><span class="line"></span><br><span class="line">稍微翻译一下：包含了提交数据的键值对在请求的body中，默认是underfined,</span><br><span class="line">你可以用body-parser或者multer来解析body</span><br></pre></td></tr></table></figure><p>解析body不是nodejs默认提供的，你需要载入body-parser中间件才可以使用req.body</p><blockquote><p><font color="red"><strong>此方法通常用来解析POST请求中的数据</strong></font></p></blockquote><p><a id="req.query"><strong>第二种是req.query</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">官方文档解释：</span><br><span class="line">An object containing a property for each query string parameter in the route. </span><br><span class="line">If there is no query string, it is the empty object, &#123;&#125;.</span><br><span class="line">翻译一下:包含在路由中每个查询字符串参数属性的对象。如果没有，默认为&#123;&#125;</span><br></pre></td></tr></table></figure><p>有nodejs默认提供，无需载入中间件</p><p>举例说明(官方摘抄)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; GET &#x2F;search?q&#x3D;tobi+ferret</span><br><span class="line">req.query.q</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;tobi ferret&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; GET &#x2F;shoes?order&#x3D;desc&amp;shoe[color]&#x3D;blue&amp;shoe[type]&#x3D;converse</span><br><span class="line">req.query.order</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;desc&quot;</span><br><span class="line">req.query.shoe.color</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;blue&quot;</span><br><span class="line">req.query.shoe.type</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;converse&quot;</span><br></pre></td></tr></table></figure><blockquote><p><font color="red"><strong>此方法多适用于GET请求，解析GET里的参数</strong></font></p></blockquote><p><a id="req.params"><strong>第三种是 req.params</strong></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">官方文档：</span><br><span class="line">An object containing properties mapped to the named route “parameters”. </span><br><span class="line">For example, if you have the route &#x2F;user&#x2F;:name, </span><br><span class="line">then the “name” property is available as req.params.name. This object defaults to &#123;&#125;.</span><br><span class="line"></span><br><span class="line">翻译：包含映射到指定的路线“参数”属性的对象。</span><br><span class="line">例如，如果你有route&#x2F;user&#x2F;：name，那么“name”属性可作为req.params.name。</span><br><span class="line">该对象默认为&#123;&#125;。</span><br></pre></td></tr></table></figure><p>nodejs默认提供，无需载入其他中间件</p><p>举例说明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; GET &#x2F;user&#x2F;tj</span><br><span class="line">req.params.name</span><br><span class="line">&#x2F;&#x2F; &#x3D;&gt; &quot;tj&quot;</span><br></pre></td></tr></table></figure><blockquote><p><font color="red"><strong>多适用于restful风格url中的参数的解析</strong></font></p></blockquote><p>req.query与req.params的区别</p><blockquote><p>req.params包含路由参数（在URL的路径部分），而req.query包含URL的查询参数（在URL的？后的参数）。</p></blockquote><p><a id="req.param()"><strong>最后一种req.param()</strong></a></p><p>此方法被弃用，请看<a href="http://www.expressjs.com.cn/4x/api.html#req.param" target="_blank" rel="noopener">官方解释</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Deprecated. Use either req.params, req.body or req.query, as applicable.</span><br><span class="line">翻译：被弃用，用其他三种方式替换</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      NodeJs 取参的四种方法
    
    </summary>
    
    
      <category term="Nodejs" scheme="https://extheor.github.io/categories/Nodejs/"/>
    
    
      <category term="nodejs" scheme="https://extheor.github.io/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB基本用法</title>
    <link href="https://extheor.github.io/posts/236bfea3/index.html"/>
    <id>https://extheor.github.io/posts/236bfea3/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.963Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="mongodb基本用法"><a class="markdownIt-Anchor" href="#mongodb基本用法"></a> MongoDB基本用法</h1><h2 id="1使用数据库-创建数据库"><a class="markdownIt-Anchor" href="#1使用数据库-创建数据库"></a> 1.使用数据库、创建数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use itying</span><br></pre></td></tr></table></figure><p>如果真的想把这个数据库创建成功，那么必须插入一个数据。</p><p>数据库中不能直接插入数据，只能往集合(collections)中插入数据。下面命令表示给itying数据库的user表中插入数据。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.insert(&#123;&quot;name&quot;:&quot;xiaoming&quot;&#125;);</span><br></pre></td></tr></table></figure><h2 id="2查看数据库"><a class="markdownIt-Anchor" href="#2查看数据库"></a> 2.查看数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></table></figure><h2 id="3显示当前的数据集合mysql中叫表"><a class="markdownIt-Anchor" href="#3显示当前的数据集合mysql中叫表"></a> 3.显示当前的数据集合（mysql中叫表）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure><h2 id="4查询数据集合中的数据"><a class="markdownIt-Anchor" href="#4查询数据集合中的数据"></a> 4.查询数据集合中的数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find()</span><br></pre></td></tr></table></figure><ul><li>1.如果想要查询指定的数据，则这么写</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: 13&#125;)</span><br></pre></td></tr></table></figure><ul><li>2.如果查询 age &gt; 22 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gt: 22&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>3.如果查询 age &lt; 22 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$lt: 22&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>4.如果查询 age &gt;= 25 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gte: 25&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>5.如果查询 age &lt;= 25 的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$lte: 25&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>6.查询 age &gt;= 23 并且 age &lt;= 26</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;: &#123;$gte: 23, $lte: 26&#125;&#125;);</span><br></pre></td></tr></table></figure><ul><li>7.查询 name 中包含 mongo 的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;mongo&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>8.查询 name 中以 mongo 开头的</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;^mongo&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>9.查询 name 中以 mongo 结尾的</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &#x2F;mongo$&#x2F;&#125;);</span><br></pre></td></tr></table></figure><ul><li>10.查询指定列 name、age 数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&#125;,&#123;&quot;name&quot;: 1, &quot;age&quot;: 1&#125;);</span><br></pre></td></tr></table></figure><ul><li>11.按照年龄排序1升序-1降序</li></ul><p>升序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().sort(&#123;&quot;age&quot;: 1&#125;);</span><br></pre></td></tr></table></figure><p>降序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().sort(&#123;&quot;age&quot;: -1&#125;);</span><br></pre></td></tr></table></figure><ul><li>12.查询 name = zhangsan, age = 22 的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;&quot;name&quot;: &quot;zhangsan&quot;, &quot;age&quot;: 22&#125;);</span><br></pre></td></tr></table></figure><ul><li>13.查询前 5 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().limit(5);</span><br></pre></td></tr></table></figure><ul><li>14.查询 10 条以后的数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().skip(10);</span><br></pre></td></tr></table></figure><ul><li>15.查询 10 条以后的数据中的前 5 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find().skip(10).limit(5);</span><br></pre></td></tr></table></figure><ul><li>16.如何分页查询</li></ul><p>第一页：1到10页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().limit(10)</span><br></pre></td></tr></table></figure><p>第二页：11到20页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip(10).limit(10)</span><br></pre></td></tr></table></figure><p>第三页：21到30页</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip(20).limit(10)</span><br></pre></td></tr></table></figure><p>…</p><p>第n页：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().skip((n-1)*pageSize).limit(pageSize)</span><br></pre></td></tr></table></figure><ul><li>17.or 查询</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.find(&#123;$or: [&#123;&quot;age&quot;: 22&#125;, &#123;&quot;age&quot;: 25&#125;]&#125;);</span><br></pre></td></tr></table></figure><ul><li>18.findOne 查询第一条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.findOne();</span><br></pre></td></tr></table></figure><h2 id="5删除集合删除指定的集合-删除表"><a class="markdownIt-Anchor" href="#5删除集合删除指定的集合-删除表"></a> 5.删除集合，删除指定的集合    删除表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">删除集合 db.COLLECTION_NAME.drop()</span><br><span class="line">db.user.drop()</span><br></pre></td></tr></table></figure><h2 id="6删除数据库删除当前所在的数据库"><a class="markdownIt-Anchor" href="#6删除数据库删除当前所在的数据库"></a> 6.删除数据库，删除当前所在的数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase();</span><br></pre></td></tr></table></figure><h2 id="7插入数据"><a class="markdownIt-Anchor" href="#7插入数据"></a> 7.插入数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.user.insert(&#123;&quot;name&quot;:&quot;xiaoming&quot;&#125;);</span><br></pre></td></tr></table></figure><ul><li>如何一次给一个集合增加 100 条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var i&#x3D;1; i&lt;&#x3D;100; i++)&#123;</span><br><span class="line">db.admin.insert(&#123;&quot;username&quot;: &quot;zhangsan&quot;+i, &quot;age&quot; :i&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>查看这个集合中有多少条数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.admin.find().count()</span><br></pre></td></tr></table></figure><h2 id="8修改数据"><a class="markdownIt-Anchor" href="#8修改数据"></a> 8.修改数据</h2><p>修改里面还有查询条件。你要改谁，要告诉 mongo。</p><p>查找名字叫做小明的，把年龄更改为 18 岁：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;name&quot;: &quot;小明&quot;&#125;, &#123;$set: &#123;&quot;age&quot;: 18&#125;&#125;);</span><br></pre></td></tr></table></figure><p>查找数学成绩是 70，把年龄更改为 33 岁：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;score.shuxue&quot;: 70&#125;, &#123;$set: &#123;&quot;age&quot;: 33&#125;&#125;);</span><br></pre></td></tr></table></figure><p>完整替换，<strong>不出现 $set 关键字了</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;name&quot;: &quot;小明&quot;&#125;, &#123;&quot;name&quot;: &quot;大明&quot;, &quot;age&quot;: 16&#125;);</span><br></pre></td></tr></table></figure><p>批量更新（一次修改多条数据）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;&quot;sex&quot;: &quot;男&quot;&#125;, &#123;$set: &#123;&quot;age&quot;: 33&#125;&#125;, &#123;multi: true&#125;);</span><br></pre></td></tr></table></figure><h2 id="9删除数据"><a class="markdownIt-Anchor" href="#9删除数据"></a> 9.删除数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.collectionNames.remove(&#123;&quot;borough&quot;: &quot;Manhattan&quot;&#125;)</span><br><span class="line">db.users.remove(&#123;&quot;age&quot;: 132&#125;);</span><br></pre></td></tr></table></figure><p>只删掉一条数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.restaurants.remove(&#123;&quot;borough&quot;: &quot;Queens&quot;&#125;, &#123;justOne: true&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      MongoDB基本用法
    
    </summary>
    
    
      <category term="MongoDB" scheme="https://extheor.github.io/categories/MongoDB/"/>
    
    
      <category term="mongodb" scheme="https://extheor.github.io/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>京东投票项目开发笔记</title>
    <link href="https://extheor.github.io/posts/5508212c/index.html"/>
    <id>https://extheor.github.io/posts/5508212c/index.html</id>
    <published>2020-09-07T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.966Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东投票项目开发笔记"><a class="markdownIt-Anchor" href="#京东投票项目开发笔记"></a> 京东投票项目开发笔记</h1><ol><li><p>打开项目<br /><code>$yarn install / $ npm install</code>: 跑环境（把项目依赖的插件进行安装）<br /><code>$node admin.js</code>: 启服务（把自己的计算机作为服务器，创建一个指定端口的服务，来管理后台程序-&gt;后台程序会根据客户端请求的需求，把对应的数据和业务逻辑实现）</p></li><li><p>API.TXT: API接口文档<br />真实项目中，后台开发人员会给前端开发人员提供一个技术文档（接口文档），文档中描述了前端需要调取后台的某些接口实现的某些功能，并且标注了请求的地址、请求方式、传递给服务器的内容、以及服务器返回的结果等信息</p><p>这就是前后端分离: 前端开发者不需要考虑后台是基于什么技术怎么实现的，我们只需要按照API文档中提供的信息，去发送请求传递内容即可，这样就可以获取我们需要的数据（API文档就是约束前端和后台的规范文档）</p></li></ol><h2 id="面试题有一万条数据想让其绑定到页面中怎么做好一些"><a class="markdownIt-Anchor" href="#面试题有一万条数据想让其绑定到页面中怎么做好一些"></a> 面试题：有一万条数据，想让其绑定到页面中，怎么做好一些？</h2><ol><li><p>文档碎片: 遍历数据，把对应的数据和结构都添加到文档碎片中，在把文档碎片扎入到页面中（优势∶减少了DOM的回流=&gt;基于字符串拼接也可以)</p></li><li><p>虚拟DOM:类似于REACT框架，基于虚拟DOM以及DIFF算法，也可以优化数据绑定</p></li><li><p><font color="red"><b>其实本质来讲怎么做都不是最好的，我们不应该出现1万条这种大数据量的绑定<br />-&gt;从服务器获取1万条消耗很多时间<br />-&gt;页面渲染1万条也会消耗很多时间</b></font></p></li></ol><h2 id="异步数据加载分页加载"><a class="markdownIt-Anchor" href="#异步数据加载分页加载"></a> 异步数据加载（分页加载）</h2><p>「需要服务器端做支持]</p><ol><li>客户端向服务器端发送一个GET请求，传递给服务器:每页展示的条数，当前要展示的页数等信息，例如传递的是?limit=20&amp;page=1（每页展示20条，当前展示第一页）</li><li>服务器端接受到请求后，在所有的数据中把第一页的20条数据返回给客户端</li><li>当用户下拉加载更多或者点击第二页等页码按钮等时候，重复第一步，把对应要展示的页码传递给服务器，服务器返回对应页码中的数据</li></ol><p>最终实现效果图</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E4%BA%AC%E4%B8%9C%E6%8A%95%E7%A5%A801.png" alt="" /></p><p>通过AJAX请求来获取JSON文件中的数据，只有在登录情况下才能投票和参赛，并且每个人只能投一票，如果没有数据会显示当前没有数据，登录的密码需要用MD5加密等等。</p><h2 id="一-首页后端"><a class="markdownIt-Anchor" href="#一-首页后端"></a> 一、首页后端</h2><h3 id="目录结构"><a class="markdownIt-Anchor" href="#目录结构"></a> 目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-- node_modules       第三方包</span><br><span class="line">|-- public             公共的静态资源</span><br><span class="line">|-- app.js           子应用文件</span><br><span class="line">|-- package.json       包描述文件</span><br><span class="line">|-- package-lock.json  第三方包版本锁定文件（npm 5 以后才有）</span><br><span class="line">|-- router.js          路由接口文件</span><br></pre></td></tr></table></figure><h3 id="路由设计"><a class="markdownIt-Anchor" href="#路由设计"></a> 路由设计</h3><table><thead><tr><th>路径</th><th>方法</th><th>get参数</th><th>post参数</th><th>是否需要登录</th><th>备注</th></tr></thead><tbody><tr><td>/index</td><td>GET</td><td></td><td></td><td></td><td>渲染首页</td></tr><tr><td>/register</td><td>GET</td><td></td><td></td><td></td><td>渲染注册页</td></tr><tr><td>/register</td><td>POST</td><td></td><td>username、phone、password、passwordtrue、descript、avatar、sex</td><td></td><td>处理注册页</td></tr><tr><td>/login</td><td>GET</td><td></td><td></td><td></td><td>渲染登录页</td></tr><tr><td>/login</td><td>POST</td><td></td><td>phone、password</td><td></td><td>处理登录页</td></tr><tr><td>/about</td><td>GET</td><td></td><td></td><td></td><td>渲染个人主页</td></tr><tr><td>/logout</td><td>GET</td><td></td><td></td><td></td><td>退出登录</td></tr><tr><td>/search</td><td>GET</td><td>username</td><td></td><td></td><td>搜索功能</td></tr><tr><td>/vote</td><td>GET</td><td>username</td><td></td><td></td><td>投票功能</td></tr><tr><td>/match</td><td>GET</td><td></td><td></td><td></td><td>渲染参赛页</td></tr></tbody></table><h2 id="项目构建"><a class="markdownIt-Anchor" href="#项目构建"></a> 项目构建</h2><h4 id="appjs-文件的基本配置"><a class="markdownIt-Anchor" href="#appjs-文件的基本配置"></a> app.js 文件的基本配置</h4><ul><li><p>需要引入第三方模块</p><p><a href="https://www.expressjs.com.cn/" target="_blank" rel="noopener"><code>npm i express</code></a></p><p><a href="https://www.npmjs.com/package/ejs" target="_blank" rel="noopener"><code>npm i ejs</code></a></p><p><a href="https://www.npmjs.com/package/cookie-parser" target="_blank" rel="noopener"><code>npm i cookie-parser</code></a></p><p><a href="https://www.npmjs.com/package/body-parser" target="_blank" rel="noopener"><code>npm i body-parser</code></a></p><p><a href="https://www.npmjs.com/package/mongoose" target="_blank" rel="noopener"><code>npm i mongoose</code></a></p><p><a href="https://www.npmjs.com/package/multer" target="_blank" rel="noopener"><code>npm i multer</code></a></p></li><li><p>路由文件（router.js）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">"/"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.send(<span class="string">"Hello World"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></li><li><p>app.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入写服务器的第三方模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入用来解析的插件</span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>);</span><br><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 引入router.js</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">"./router"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板引擎的设置</span></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"html"</span>);</span><br><span class="line">app.set(<span class="string">"views"</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views`</span>);</span><br><span class="line">app.engine(<span class="string">"html"</span>, <span class="built_in">require</span>(<span class="string">"ejs"</span>).renderFile); <span class="comment">// 用ejs模板渲染html</span></span><br><span class="line"><span class="comment">// 加载到没有挂载路径的中间件</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态资源配置</span></span><br><span class="line">app.use(express.static(__dirname + <span class="string">"/public"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用router, router.js文件中的所有路由都可以使用</span></span><br><span class="line">app.use(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数据库和开启服务器</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * localhost - 本地地址</span></span><br><span class="line"><span class="comment"> * jdvotes - mongodb数据库</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">mongoose.connect(</span><br><span class="line">  <span class="string">"mongodb://localhost/jdvotes"</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    useNewUrlParser: <span class="literal">true</span>,</span><br><span class="line">    useUnifiedTopology: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"数据库连接失败"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"数据库连接成功"</span>);</span><br><span class="line">      app.listen(<span class="number">8888</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"服务器开启成功 -- 8888"</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>需要用到MondoDB，所以需要配置以下表结构文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MongoDB数据库模型文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongogose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 通过mongoose定义接口 Schema</span></span><br><span class="line"><span class="keyword">var</span> Schema = mongogose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成表结构</span></span><br><span class="line"><span class="comment">// 操作users表（集合） 定义一个Schema  Schema里面的对象和数据库表里面的字段需要一一对应</span></span><br><span class="line"><span class="keyword">var</span> mySchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  <span class="comment">// name: &#123; type: String, default: "zhangsan" &#125;,</span></span><br><span class="line">  name: <span class="built_in">String</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把Schema导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = mySchema;</span><br></pre></td></tr></table></figure></li><li><p>然后再访问数据库模型</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mongoose插件</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>);</span><br><span class="line"><span class="comment">// 引入 schema.js 文件（MongoDB数据库表结构文件）</span></span><br><span class="line"><span class="keyword">const</span> mySchema = <span class="built_in">require</span>(<span class="string">"./schema"</span>);</span><br><span class="line"><span class="comment">// 定义数据库模型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    model里面的第一个参数 要注意：</span></span><br><span class="line"><span class="comment">      1.首字母大写</span></span><br><span class="line"><span class="comment">        2.要和数据库表（集合）名称对应</span></span><br><span class="line"><span class="comment">    这个模型会和模型名称相同的复数的数据库表建立连接 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把这个数据库模型导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">"User"</span>, mySchema);</span><br></pre></td></tr></table></figure></li><li><p>最后在写路由，在对应路由上查询对应的数据返回给页面即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 路由文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入model.js文件（数据库模型文件）</span></span><br><span class="line"><span class="keyword">const</span> USER = <span class="built_in">require</span>(<span class="string">"./model"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页</span></span><br><span class="line">router.get(<span class="string">"/"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  USER.find(&#123;&#125;, (err, docs) =&gt; &#123;</span><br><span class="line">    <span class="comment">// docs.forEach</span></span><br><span class="line">    <span class="comment">// 如果查询成功</span></span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(docs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  res.send(<span class="string">"Hello"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>浏览器访问 <code>127.0.0.1:8888</code> ，得到结果 <code>[ { _id: 5f5ad635994e3f8f4923d1cd, name: 'zhangsan' } ]</code></p></li><li><p>创建数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var i&#x3D;1;i&lt;&#x3D;150;i++)&#123;</span><br><span class="line">db.users.insert(&#123;&quot;id&quot;:i,&quot;name&quot;:&quot;张&quot;+i,&quot;picture&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;extheor&#x2F;images&#x2F;Ajax%E5%9B%BE%E7%89%87&#x2F;man.png&quot;,&quot;phone&quot;:&quot;10377771223&quot;,&quot;sex&quot;:0,&quot;password&quot;:&quot;123456&quot;,&quot;bio&quot;:&quot;Live beautifully, dream passionately, love completely&quot;,&quot;time&quot;:1506090072369,&quot;isMatch&quot;:1,&quot;matchId&quot;:i&lt;10?&quot;00&quot;+i:i&lt;100?&quot;0&quot;+i:i,&quot;slogan&quot;:&quot;你是唯一的，你是非常独特的，你就是你生命中的第一名&quot;,&quot;voteNum&quot;:1&#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="二-首页前端"><a class="markdownIt-Anchor" href="#二-首页前端"></a> 二、首页前端</h2><h3 id="首先把首页写出来viewsindexhtml"><a class="markdownIt-Anchor" href="#首先把首页写出来viewsindexhtml"></a> 首先把首页写出来（views/index.html）</h3><blockquote><p>完全手撸的</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myToMacth"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/match"</span>&gt;</span>我要参赛<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">placeholder</span>=<span class="string">"输入用户名查找"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"searchButton"</span> <span class="attr">value</span>=<span class="string">"搜索"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"userul"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> <span class="attr">datas.forEach</span>(<span class="attr">data</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&lt;%= data.phone %&gt;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&lt;%= data.picture %&gt; "</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.username</span> %&gt;</span> | 编号# <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.matchId</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.slogan</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"voteNum"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.voteNum</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>投他一票<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式在这里</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页、登录、注册 */</span></span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">header</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#31a5de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 投起来 */</span></span><br><span class="line"><span class="selector-class">.header</span> &gt; <span class="selector-class">.img</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">40%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 我要参赛 */</span></span><br><span class="line"><span class="selector-class">.myToMacth</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">38%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eb713b</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">2px</span> <span class="number">15px</span> <span class="built_in">rgb</span>(<span class="number">90</span>, <span class="number">38</span>, <span class="number">38</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myToMacth</span> &gt; <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 搜索 */</span></span><br><span class="line"><span class="selector-class">.search</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">52%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">45%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="comment">/* border: 1px solid #000; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* border-radius: ; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchInput</span>,</span><br><span class="line"><span class="selector-class">.searchButton</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchInput</span> &#123;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.searchButton</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#007ec3</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 列表 */</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.left</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.center</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">156</span>, <span class="number">92</span>, <span class="number">92</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-class">.right</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &gt; <span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="comment">/* width: 60px;</span></span><br><span class="line"><span class="comment">  height: 30px; */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#0081cd</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>页面样式如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index01.png" alt="" /></p><ul><li><p>接下来需要把从数据库获取到的数据渲染到HTML页面当中去</p><ul><li><p>从路由文件中获取到数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 路由文件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入第三方服务器模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入model.js文件（数据库模型文件）</span></span><br><span class="line"><span class="keyword">const</span> USER = <span class="built_in">require</span>(<span class="string">"./model"</span>);</span><br><span class="line"><span class="comment">// 路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页</span></span><br><span class="line">router.get(<span class="string">"/index"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="comment">// docs.forEach</span></span><br><span class="line">    <span class="comment">// 如果查询成功</span></span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// console.log(datas);</span></span><br><span class="line">      res.render(<span class="string">"index"</span>, &#123;</span><br><span class="line">        <span class="comment">// es6语法：对象解构赋值，</span></span><br><span class="line">        <span class="comment">// 相当于datas:datas</span></span><br><span class="line">        datas,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></li><li><p>渲染到HTML页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myToMacth"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/match"</span>&gt;</span>我要参赛<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">placeholder</span>=<span class="string">"输入用户名查找"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"searchButton"</span> <span class="attr">value</span>=<span class="string">"搜索"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> <span class="attr">datas.forEach</span>(<span class="attr">data</span> =&gt;</span> &#123; %&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&lt;%= data.id %&gt;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&lt;%= data.picture %&gt; "</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span>张三 | 编号# <span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.matchId</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.slogan</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"voteNum"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">data.voteNum</span> %&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>投他一票<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/indexEjs01.png" alt="" /></p></li></ul></li></ul><h2 id="三-注册页前端"><a class="markdownIt-Anchor" href="#三-注册页前端"></a> 三、注册页前端</h2><h3 id="首先把注册页面写出来"><a class="markdownIt-Anchor" href="#首先把注册页面写出来"></a> 首先把注册页面写出来</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/register.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/logout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        用户名：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"username"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"username"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请输入您的真实姓名"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        手机号码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请填写您常用的手机号"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"由6~12位数字和字母组成"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        确认密码：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"passwordtrue"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"introduce"</span>&gt;</span>自我描述：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">          <span class="attr">cols</span>=<span class="string">"54"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">rows</span>=<span class="string">"6"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"限制在10~100字之间"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">minlength</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">maxlength</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"descript"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"descript"</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        上传头像：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"avatar"</span> <span class="attr">name</span>=<span class="string">"avatar"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sex"</span>&gt;</span>性别：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">id</span>=<span class="string">"man"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>男<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">id</span>=<span class="string">"woman"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>女<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交注册信息"</span> <span class="attr">class</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/register.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 投起来 */</span></span><br><span class="line"><span class="selector-class">.header</span> &gt; <span class="selector-class">.img</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#656e73</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">396px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">resize</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span>,</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#woman</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">135px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sex</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span> ~ <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#man</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">17px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-id">#woman</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">89px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> &gt; <span class="selector-class">.submit</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#54abe8</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前端需要把注册信息发送给后端，所以需要用到AJAX</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当提交表单时触发</span></span><br><span class="line">$(<span class="string">"form"</span>).on(<span class="string">"submit"</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 阻止默认行为</span></span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="comment">//   console.log($("form")[0]);</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    serialize()  FormData  serializeArray()都是序列化表单，实现表单的异步提交</span></span><br><span class="line"><span class="comment">    但是serialize()和serializeArray()都是只能序列化表单中的数据，比如input  select等的数据，</span></span><br><span class="line"><span class="comment">    但是对于文件上传就只能用 FormData。</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">new</span> FormData($(<span class="string">"form"</span>)[<span class="number">0</span>]);</span><br><span class="line">  $.ajax(<span class="string">"/register"</span>, &#123;</span><br><span class="line">    type: <span class="string">"post"</span>,</span><br><span class="line">    data,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    <span class="comment">// (默认: "application/x-www-form-urlencoded") 发送信息至服务器时内容编码类型。默认值适合大多数情况。如果你明确地传递了一个content-type给 $.ajax() 那么他必定会发送给服务器（即使没有数据要发送）</span></span><br><span class="line">    contentType: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// processData 默认为true，当设置为true的时候,jquery ajax 提交的时候不会序列化 data，而是直接使用data</span></span><br><span class="line">    processData: <span class="literal">false</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (response.code == <span class="string">"200"</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location = <span class="string">"/"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="四-注册页后端"><a class="markdownIt-Anchor" href="#四-注册页后端"></a> 四、注册页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册</span></span><br><span class="line">router.get(<span class="string">"/register"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.render(<span class="string">"register"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 必须写上传文件</span></span><br><span class="line">router.post(<span class="string">"/register"</span>, upload.single(<span class="string">"picture"</span>), (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 获取前端发送过来的注册信息</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username, phone, password, passwordtrue, slogan, sex &#125; = req.body;</span><br><span class="line">  <span class="comment">// console.log(username);</span></span><br><span class="line">  <span class="keyword">var</span> picture;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    picture = req.file.filename;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    picture = <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log(picture);</span></span><br><span class="line">  <span class="keyword">if</span> (password !== passwordtrue) &#123;</span><br><span class="line">    res.send(&#123;</span><br><span class="line">      code: <span class="string">"304"</span>,</span><br><span class="line">      message: <span class="string">"两次密码不一致"</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  USER.findOne(&#123; username &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果查询到username存在，则说明该用户已注册过</span></span><br><span class="line">      <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="comment">// console.log(result); // 查询结果</span></span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">304</span>,</span><br><span class="line">          message: <span class="string">"该用户已存在"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 否则该用户不存在，则添加到表(集合)中去</span></span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"用户注册~~~"</span>);</span><br><span class="line">        <span class="comment">// 如果用户上传了图片</span></span><br><span class="line">        <span class="comment">// 创建一个数据集合(对象)</span></span><br><span class="line">        <span class="keyword">var</span> myUser = <span class="keyword">new</span> USER(&#123;</span><br><span class="line">          username,</span><br><span class="line">          phone,</span><br><span class="line">          password,</span><br><span class="line">          picture,</span><br><span class="line">          slogan,</span><br><span class="line">          <span class="comment">// sex,</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// console.log(myUser);</span></span><br><span class="line">        <span class="comment">// 把这个数据集合插入到表(集合)中</span></span><br><span class="line">        USER.insertMany(myUser)</span><br><span class="line">          .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(result);</span></span><br><span class="line">            <span class="comment">// 插入成功</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">200</span>,</span><br><span class="line">              message: <span class="string">"注册成功"</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// console.log(err);</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">304</span>,</span><br><span class="line">              message: <span class="string">"注册失败"</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>页面效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/register01.png" alt="" /></p><p>注册即可，其中用户名为必填项，手机号码为必填项，密码为必填项，确认密码为必填项，性别为必填项</p><p>点击“提交注册信息”即可注册成功，我们会发现在数据库里就多了一条数据，相对而言，首页也就会多出这条数据，如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index02.png" alt="" /></p><h2 id="五-登录页前端"><a class="markdownIt-Anchor" href="#五-登录页前端"></a> 五、登录页前端</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/register.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"img"</span> <span class="attr">src</span>=<span class="string">"img/title.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        手机号码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"phone"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"请填写您常用的手机号"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"由6~12位数字和字母组成"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">required</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交登录信息"</span> <span class="attr">class</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/login.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="六-登录页后端"><a class="markdownIt-Anchor" href="#六-登录页后端"></a> 六、登录页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录</span></span><br><span class="line">router.get(<span class="string">"/login"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.render(<span class="string">"login"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">router.post(<span class="string">"/login"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">var</span> &#123; username, phone, password &#125; = req.body;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 去数据库查找phone和password</span></span><br><span class="line">  USER.findOne(&#123; phone, password &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (phone === result.phone &amp;&amp; password === result.password) &#123;</span><br><span class="line">        <span class="comment">// 如果手机号和密码都正确，则登录成功</span></span><br><span class="line">        <span class="keyword">var</span> id = result._id;</span><br><span class="line">        <span class="comment">// console.log(id);</span></span><br><span class="line"></span><br><span class="line">        res.cookie(<span class="string">"phone"</span>, phone);</span><br><span class="line">        res.cookie(<span class="string">"id"</span>, id);</span><br><span class="line"></span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">200</span>,</span><br><span class="line">          message: <span class="string">"登录成功"</span>,</span><br><span class="line">          data: &#123;</span><br><span class="line">            phone,</span><br><span class="line">            id,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">304</span>,</span><br><span class="line">          message: <span class="string">"手机号或密码错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>登录用到了cookie,可以通过用后端发送cookie给客户端，并在客户端存储，然后前端可以通过判断cookie中的phone是否存在，来判断用户是否登录</p><ul><li><p>登录页ajax请求部分</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取后台传送的cookie</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果cookie里的phone存在,则把index页面中的登录换成用户名</span></span><br><span class="line">  <span class="comment">// 想要获取当前手机号,可以使用cookie中的phone</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie); // phone=17692414892; id=j%3A%225f5c9c1f203b5c3b2ca5c27c%22</span></span><br><span class="line">  <span class="comment">// 通过 ; 切割字符串</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")); // ["phone=17692414892", " id=j%3A%225f5c9c1f203b5c3b2ca5c27c%22"]</span></span><br><span class="line">  <span class="comment">// 取第零个 -- 手机号</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")[0]); // phone=17692414892</span></span><br><span class="line">  <span class="comment">// 利用 = 切割字符串</span></span><br><span class="line">  <span class="comment">// console.log(document.cookie.split(";")[0].split("=")); // ["phone", "17692414892"]</span></span><br><span class="line">  <span class="comment">// 然后再取第一个就可以了</span></span><br><span class="line">  <span class="keyword">var</span> phone = <span class="built_in">document</span>.cookie.split(<span class="string">";"</span>)[<span class="number">0</span>].split(<span class="string">"="</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="comment">// console.log(phone);</span></span><br><span class="line">  <span class="comment">// 对登录a标签进行文本替换,herf地址也换一下，可以换成个人主页</span></span><br><span class="line">  $(<span class="string">".login"</span>).text(phone);</span><br><span class="line">  $(<span class="string">".login"</span>).attr(<span class="string">"href"</span>, <span class="string">"/about"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// about页逻辑</span></span><br><span class="line">  $(<span class="string">".about"</span>).text(phone + <span class="string">"~ 欢迎你"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>顺便就把个人主页写出来了</p><h2 id="七-个人主页前端"><a class="markdownIt-Anchor" href="#七-个人主页前端"></a> 七、个人主页前端</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/about.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/logout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"about"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"seekfocus"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/%E6%B1%82%E5%85%B3%E6%B3%A8.jpg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#31a5de</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#edf1f8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.about</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#edf1f8</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.06</span>);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="八-个人主页后端"><a class="markdownIt-Anchor" href="#八-个人主页后端"></a> 八、个人主页后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 个人主页</span></span><br><span class="line">router.get(<span class="string">"/about"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 在数据库中查找到所有的数据进行返回</span></span><br><span class="line">  USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      res.render(<span class="string">"about"</span>, &#123;</span><br><span class="line">        datas,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        code: <span class="number">500</span>,</span><br><span class="line">        message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>点击 手机号</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/index03.png" alt="" /></p><p>即可出现以下页面</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/about01.png" alt="" /></p><h2 id="九-退出后端没有前端页面"><a class="markdownIt-Anchor" href="#九-退出后端没有前端页面"></a> 九、退出后端（没有前端页面）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 退出</span></span><br><span class="line">router.get(<span class="string">"/logout"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 清除cookie</span></span><br><span class="line">  res.clearCookie(<span class="string">"phone"</span>);</span><br><span class="line">  res.clearCookie(<span class="string">"id"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重定向</span></span><br><span class="line">  res.writeHead(<span class="number">302</span>, &#123;</span><br><span class="line">    Location: <span class="string">"/index"</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 结束响应过程</span></span><br><span class="line">  <span class="comment">// 用于快速结束没有任何数据的响应</span></span><br><span class="line">  res.end(<span class="string">""</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="十-搜索后端"><a class="markdownIt-Anchor" href="#十-搜索后端"></a> 十、搜索后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搜索</span></span><br><span class="line">router.get(<span class="string">"/search"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 根据id搜索信息</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username &#125; = req.query;</span><br><span class="line">  <span class="comment">// 把前端传递过来的username在数据库进行查找，然后返回结果给前端</span></span><br><span class="line">  <span class="keyword">if</span> (username !== <span class="string">""</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果用户名不为空，则查询对应的用户</span></span><br><span class="line">    USER.find(&#123; username &#125;, (err, datas) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          datas,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">500</span>,</span><br><span class="line">          message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 如果用户名不为空，则查询所有的用户</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    USER.find(&#123;&#125;, (err, datas) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          datas,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.send(&#123;</span><br><span class="line">          code: <span class="number">500</span>,</span><br><span class="line">          message: <span class="string">"数据库内部错误"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>然后前端发送数据给后端，让后端在数据库里查询想要的结果，然后后端在把结果返回给前端，前端只需渲染到页面上即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 搜索逻辑</span></span><br><span class="line"><span class="comment">// 按用户名 -- 搜索</span></span><br><span class="line">$(<span class="string">".searchButton"</span>).on(<span class="string">"click"</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果进入到这里说明用户已登录</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取到用户在搜索框输入的用户名</span></span><br><span class="line">    <span class="keyword">var</span> username = &#123;</span><br><span class="line">      username: $(<span class="string">".searchInput"</span>).val(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 发送ajax请求，后端会传给前端数据，让前端进行页面处理</span></span><br><span class="line">    $.ajax(<span class="string">"/search"</span>, &#123;</span><br><span class="line">      type: <span class="string">"get"</span>,</span><br><span class="line">      data: username,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(response.datas);</span></span><br><span class="line">        <span class="keyword">var</span> result = response.datas;</span><br><span class="line">        <span class="comment">// console.log(result[0].username);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (result[<span class="number">0</span>]) &#123;</span><br><span class="line">          <span class="comment">// 如果查询到的结果不为空</span></span><br><span class="line">          <span class="comment">// 先把ul列表清空</span></span><br><span class="line">          $(<span class="string">".userul"</span>).empty();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 循环遍历result</span></span><br><span class="line">          $.each(result, (index, data) =&gt; &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data);</span><br><span class="line">            <span class="keyword">var</span> html = <span class="string">`&lt;li class="<span class="subst">$&#123;data.username&#125;</span>"&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="left"&gt;</span></span><br><span class="line"><span class="string">              &lt;img src="<span class="subst">$&#123;data.picture&#125;</span>" alt="" /&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="center"&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;<span class="subst">$&#123;data.username&#125;</span> | 编号# <span class="subst">$&#123;data.matchId&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;<span class="subst">$&#123;data.slogan&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="right"&gt;</span></span><br><span class="line"><span class="string">              &lt;div class="voteNum"&gt;<span class="subst">$&#123;data.voteNum&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div&gt;&lt;button&gt;投他一票&lt;/button&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/li&gt;`</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 然后再把查询到的所有数据都添加到ul列表中</span></span><br><span class="line">            $(<span class="string">".userul"</span>).append(html);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 如果查询到的结果为空</span></span><br><span class="line">          alert(<span class="string">"当前没有该用户"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  <span class="comment">//   var username = datas</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 如果进入到这里说明用户未登录</span></span><br><span class="line">    alert(<span class="string">"请先登录！！！"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>注意：该操作必须登录</p></blockquote><p>效果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD.gif" alt="" /></p></li></ul><h2 id="十一-投票后端"><a class="markdownIt-Anchor" href="#十一-投票后端"></a> 十一、投票后端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 投票</span></span><br><span class="line">router.get(<span class="string">"/vote"</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 当前端点击投票按钮时获取到前端发送过来的投票数，然后自加</span></span><br><span class="line">  <span class="keyword">var</span> &#123; username &#125; = req.query;</span><br><span class="line">  USER.findOne(&#123; username &#125;, (err, datas) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// 修改数据库中vaotNum的值 -- update</span></span><br><span class="line">      <span class="comment">// console.log(datas); // 从数据库查到的数据集合(对象)</span></span><br><span class="line">      <span class="comment">// 从数据库中修改用户点击的用户的投票数</span></span><br><span class="line">      USER.updateOne(</span><br><span class="line">        &#123; username &#125;,</span><br><span class="line">        &#123; <span class="attr">voteNum</span>: ++datas.voteNum &#125;,</span><br><span class="line">        (err, voteNum) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (err === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log("点赞成功");</span></span><br><span class="line">            res.send(&#123;</span><br><span class="line">              code: <span class="number">200</span>,</span><br><span class="line">              message: <span class="string">"点赞成功"</span>,</span><br><span class="line">              datas,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"点赞失败"</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>首先是前端点击投票a标签，然后通过Ajax发送给后端，后端接收到数据后，从数据库进行查找，每点击一次投票数（voteNum）加一，然后 后端会把这个结果返回给前端，前端可以使用这个数据，来重新绘制HTML页面</p></li><li><p>前端ajax请求如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 投票</span></span><br><span class="line"><span class="comment">// 因为li标签是动态创建的，所以需要通过事件委托来获取投票按钮</span></span><br><span class="line">$(<span class="string">".userul"</span>).delegate(<span class="string">".vote"</span>, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.indexOf(<span class="string">"phone"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">var</span> username = $<span class="keyword">this</span>.parents(<span class="string">"li"</span>).attr(<span class="string">"class"</span>);</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">      username,</span><br><span class="line">    &#125;;</span><br><span class="line">    $.ajax(<span class="string">"/vote"</span>, &#123;</span><br><span class="line">      type: <span class="string">"get"</span>,</span><br><span class="line">      data,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(response.datas);</span></span><br><span class="line">        <span class="keyword">if</span> (response.code === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// 先获取到数据库中该用户的票数</span></span><br><span class="line">          <span class="keyword">var</span> voteNum = response.datas.voteNum;</span><br><span class="line">          <span class="built_in">console</span>.log(voteNum);</span><br><span class="line">          <span class="comment">// 通过 全局$this 找到voteNum元素</span></span><br><span class="line">          <span class="keyword">var</span> $voteNum = $<span class="keyword">this</span>.parents(<span class="string">".right"</span>).children(<span class="string">".voteNum"</span>);</span><br><span class="line">          <span class="comment">// 然后把voteNum重新绘制到HTML页面即可</span></span><br><span class="line">          $voteNum.text(voteNum);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">"请先登录！！！"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>到这里，基本的投票功能也已经能实现了，如下效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/jdVote%E5%9B%BE%E7%89%87/%E6%8A%95%E7%A5%A8%E5%8A%9F%E8%83%BD.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      京东投票项目开发笔记
    
    </summary>
    
    
      <category term="MongoDB" scheme="https://extheor.github.io/categories/MongoDB/"/>
    
    
      <category term="mongodb" scheme="https://extheor.github.io/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>京东抽奖案例</title>
    <link href="https://extheor.github.io/posts/37c547df/index.html"/>
    <id>https://extheor.github.io/posts/37c547df/index.html</id>
    <published>2020-09-06T03:35:41.000Z</published>
    <updated>2020-09-13T06:37:36.968Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="京东抽奖案例"><a class="markdownIt-Anchor" href="#京东抽奖案例"></a> 京东抽奖案例</h1><h2 id="0设计思路"><a class="markdownIt-Anchor" href="#0设计思路"></a> 0.设计思路</h2><p>项目呢是模仿的王者荣耀抽奖界面的一部分。。。</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80%E6%8A%BD%E5%A5%96%E7%95%8C%E9%9D%A2.jpg" alt="" /></p><h2 id="1目录结构"><a class="markdownIt-Anchor" href="#1目录结构"></a> 1.目录结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-- app.js</span><br><span class="line">|-- router.js          路由接口文件</span><br><span class="line">|-- controllers        控制器</span><br><span class="line">|-- models</span><br><span class="line">|-- node_modules       第三方包</span><br><span class="line">|-- package.json       包描述文件</span><br><span class="line">|-- package-lock.json  第三方包版本锁定文件（npm 5 以后才有）</span><br><span class="line">|-- public             公共的静态资源</span><br><span class="line">|-- README.md          项目说明文档</span><br><span class="line">|-- routes</span><br><span class="line">|-- views              存储视图目录</span><br></pre></td></tr></table></figure><h2 id="2项目需求"><a class="markdownIt-Anchor" href="#2项目需求"></a> 2.项目需求</h2><p>本项目包含用户注册、登录以及抽奖等功能：</p><ol><li><p>用户注册功能</p><p>a. 提供手机号验证码注册功能: 用户输入手机号，对应手机号接收验证码</p><p>b.输入完成手机号和验证码之后进入下一步，允许用户输入密码以及确认密码:密码要求12~16位的数字、大小写字母以及符号</p><p>c. 注册成功后显示用户抽奖界面（<font color="red"><b>注</b></font>: 页面不刷新)</p></li><li><p>用户登录功能</p><p>a. 提供手机号和密码、手机号和验证码两种方式登录</p><p>b. 判断如果用户没有注册的话，直接跳转用户注册界面（<font color="red"><b>注</b></font>: 页面不刷新)</p><p>c. 登录成功后显示用户抽奖界面（<font color="red"><b>注</b></font>: 页面不刷新)</p></li><li><p>用户抽奖功能</p><p>a. 每个用户—次拥有三次抽奖机会</p><p>b. 抽奖方式采用转盘方式抽奖:不同奖项的得奖率不同（转盘抽奖可参考百度)</p><p>c. 三次抽奖完成后在界面显示三次抽奖汇总结果</p></li></ol><h2 id="3路由设计"><a class="markdownIt-Anchor" href="#3路由设计"></a> 3.路由设计</h2><p>由于要求是页面不跳转，所以应该是只写一个路由即可</p><table><thead><tr><th>路径</th><th>方法</th><th>get参数</th><th>post参数</th><th>是否需要登录</th><th>备注</th></tr></thead><tbody><tr><td>/</td><td>GET</td><td></td><td></td><td></td><td>渲染首页</td></tr></tbody></table><h2 id="4项目构建"><a class="markdownIt-Anchor" href="#4项目构建"></a> 4.项目构建</h2><ul><li><p>一、先把静态页面写好</p><ul><li><p>HTML完整代码（views/index.html）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>京东抽奖<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/style.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/login.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../public/css/main.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注册 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;form action="#" class="register"&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="text" name="username" id="username" /&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="text" name="password" id="password" /&gt;</span></span><br><span class="line"><span class="comment">      &lt;input type="submit" /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/form&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 登录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loginBox"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">method</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"login"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"phone"</span> <span class="attr">id</span>=<span class="string">"phone"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>Phone<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>PassWord<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">          submit</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        共有一圈奖品，是8个</span></span><br><span class="line"><span class="comment">        中间是一个抽奖键</span></span><br><span class="line"><span class="comment">        点击抽奖之后抽奖按键消失，随后弹出3项奖品内容，这是一个蒙层</span></span><br><span class="line"><span class="comment">        有再次抽奖按钮，和确定按钮</span></span><br><span class="line"><span class="comment">            点击再次抽奖按钮可以再次抽奖，点击确定按钮完成抽奖</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_0"</span> <span class="attr">name</span>=<span class="string">"阿古朵"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_1.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_1"</span> <span class="attr">name</span>=<span class="string">"萌芽"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_2.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_2"</span> <span class="attr">name</span>=<span class="string">"蒙恬"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_2"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_3.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_7"</span> <span class="attr">name</span>=<span class="string">"华硕笔记本电脑"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_7"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_4.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span>抽奖<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_3"</span> <span class="attr">name</span>=<span class="string">"运动鞋一双"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_3"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_5.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_6"</span> <span class="attr">name</span>=<span class="string">"摄像机"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_6"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_6.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_5"</span> <span class="attr">name</span>=<span class="string">"联想笔记本电脑"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_5"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_7.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"prize prize_4"</span> <span class="attr">name</span>=<span class="string">"谢谢惠顾"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 谢谢惠顾 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"jpg_ jpg_4"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/jpg_8.jpg"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 遮挡抽奖功能的div --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"coverLottery"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 抽奖结果页面 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotteryResult"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 抽奖结果显示框 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"msgbox"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 抽奖结果背景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/1.9.1/jquery.min.js"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../node_modules/axios/dist/axios.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/axios_default.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/login.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../public/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>首页CSS代码（style.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(#<span class="number">141</span>e30, #<span class="number">243</span>b55);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 抽奖样式 */</span></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="comment">/* margin: 50px auto; */</span></span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">40%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">30%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">td</span> &#123;</span><br><span class="line">  <span class="comment">/* border: 1px solid #900; */</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.prize</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jpg_</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.coverLottery</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="comment">/* background: red; */</span></span><br><span class="line">  <span class="comment">/* margin: -307px auto; */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">45%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">35%</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#325c8e</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">25px</span> auto;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-class">.jpg_</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-tag">img</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">600px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.lotteryResult</span> &gt; <span class="selector-class">.msgbox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">170</span>, <span class="number">170</span>, <span class="number">73</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">140px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">260px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="comment">/* display: none; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注册样式 */</span></span><br></pre></td></tr></table></figure></li><li><p>登录页CSS样式（login.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 登录样式 */</span></span><br><span class="line"><span class="selector-class">.loginBox</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">15px</span> <span class="number">25px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> + <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#03e9f4</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">0</span> <span class="number">#03e9f4</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">50px</span> <span class="number">0</span> <span class="number">#03e9f4</span>,</span><br><span class="line">    <span class="number">0</span> <span class="number">0</span> <span class="number">100px</span> <span class="number">0</span> <span class="number">#03e9f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line1 <span class="number">1s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#submit</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">108px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line1 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line2 <span class="number">1s</span> <span class="number">0.25s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line2 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(right, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line3 <span class="number">1s</span> <span class="number">0.5s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line3 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, transparent, #<span class="number">03</span>e9f4);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">animation</span>: line4 <span class="number">1s</span> <span class="number">0.75s</span> infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> line4 &#123;</span><br><span class="line">  50%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>奖品结果背景特效CSS样式（main.css）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">61%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">800px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> white;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">animation</span>: run <span class="number">3s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">12deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">i</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">24deg</span>) <span class="built_in">translateX</span>(<span class="number">80px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> run &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  10% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">560px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后就可以看到，我们的静态页面已经写好了，接下来可以开始写JS逻辑代码了</p></li><li><p>首页的JS代码（index.js）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 全局计时器</span></span><br><span class="line">  <span class="keyword">var</span> drawTimer = <span class="literal">null</span>;</span><br><span class="line">  <span class="comment">// 全局步数</span></span><br><span class="line">  <span class="keyword">var</span> drawStep = <span class="number">-1</span>;</span><br><span class="line">  <span class="comment">// 全局缓动计时</span></span><br><span class="line">  <span class="keyword">var</span> easeTime = <span class="number">2</span>;</span><br><span class="line">  <span class="comment">// 全局随机奖品(最后停止的位置)</span></span><br><span class="line">  <span class="keyword">var</span> stopPosition = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// 点击按钮的次数</span></span><br><span class="line">  <span class="keyword">var</span> clickNum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//   当我点击按钮时，开始抽奖</span></span><br><span class="line">  $(<span class="string">".button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 点击抽奖之后，禁用抽奖功能</span></span><br><span class="line">    $(<span class="string">".coverLottery"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    <span class="comment">// console.log(clickNum);</span></span><br><span class="line">    <span class="comment">// 声明一个 1~8 的数组,写重复的数来提高此数的概率值</span></span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>];</span><br><span class="line">    <span class="comment">// 0 ~ arr.length-1 的随机数</span></span><br><span class="line">    <span class="keyword">var</span> randomNum = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length);</span><br><span class="line">    stopPosition = arr[randomNum];</span><br><span class="line">    <span class="comment">// console.log(stopPosition);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// easeTime * 100 毫秒后开始抽奖</span></span><br><span class="line">    drawTimer = setTimeout(drawRun, easeTime * <span class="number">100</span>);</span><br><span class="line">    <span class="comment">// 抽三次奖，停止抽奖</span></span><br><span class="line">    <span class="keyword">if</span> (clickNum &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">      <span class="comment">// 清除计时器，停止抽奖</span></span><br><span class="line">      clearTimeout(drawTimer);</span><br><span class="line">      <span class="comment">// 显示那个中奖页面</span></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">      <span class="comment">// 让奖品不透明</span></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).children().css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">      <span class="comment">// 显示背景特效</span></span><br><span class="line">      $(<span class="string">".main"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clickNum++;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 抽奖游戏滚动函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">drawRun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 抽奖游戏滚动</span></span><br><span class="line">    <span class="keyword">if</span> (drawStep &gt;= <span class="number">40</span> + stopPosition) &#123;</span><br><span class="line">      <span class="comment">// prize为奖品序号(序号从0开始)</span></span><br><span class="line">      <span class="keyword">var</span> prize = drawStep % <span class="number">8</span>;</span><br><span class="line">      $(<span class="string">".jpg_"</span> + prize).css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">      <span class="comment">// 重置drawStep,为下一次的抽奖做准备</span></span><br><span class="line">      <span class="comment">// 让下一次抽奖的位置从上一次抽奖结束的位置开始走</span></span><br><span class="line">      drawStep = stopPosition;</span><br><span class="line">      <span class="comment">// 以防万一，写上 easeTime = 2</span></span><br><span class="line">      easeTime = <span class="number">2</span>;</span><br><span class="line">      <span class="comment">// 提示消息</span></span><br><span class="line">      $(<span class="string">".prize_"</span> + prize).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> prizeName = value.getAttribute(<span class="string">"name"</span>);</span><br><span class="line">        msg(prizeName);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> img = $(<span class="string">".prize_"</span> + prize)</span><br><span class="line">        .children()</span><br><span class="line">        .clone();</span><br><span class="line"></span><br><span class="line">      $(<span class="string">".lotteryResult"</span>).append(img);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 清除计时器</span></span><br><span class="line">      clearTimeout(drawTimer);</span><br><span class="line">      <span class="comment">// 返回结果</span></span><br><span class="line"></span><br><span class="line">      $(<span class="string">".button"</span>).trigger(<span class="string">"click"</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (drawStep &gt;= <span class="number">36</span> + stopPosition) &#123;</span><br><span class="line">      <span class="comment">// 最后四个的时候开始缓动</span></span><br><span class="line">      easeTime += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (easeTime &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">        easeTime = <span class="number">2</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      easeTime--;</span><br><span class="line">    &#125;</span><br><span class="line">    drawStep++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使每个方格在变成不透明之后再变成半透明</span></span><br><span class="line">    $(<span class="string">".jpg_"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// console.log(value);</span></span><br><span class="line">      $(<span class="keyword">this</span>).css(<span class="string">"opacity"</span>, <span class="string">"0.5"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 每次抽奖时的不透明效果</span></span><br><span class="line">    $(<span class="string">".jpg_"</span> + (drawStep % <span class="number">8</span>)).css(<span class="string">"opacity"</span>, <span class="string">"1"</span>);</span><br><span class="line">    <span class="comment">// 延迟递归</span></span><br><span class="line">    <span class="comment">// 每 easeTime * 70 的时间走一格</span></span><br><span class="line">    drawTimer = setTimeout(drawRun, easeTime * <span class="number">70</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 消息提示函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">msg</span>(<span class="params">prizeName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> say = <span class="string">"恭喜您抽中了奖品"</span> + prizeName;</span><br><span class="line">    <span class="keyword">var</span> $pElement = $(<span class="string">`&lt;p&gt;<span class="subst">$&#123;say&#125;</span>&lt;p&gt;`</span>);</span><br><span class="line">    $(<span class="string">".msgbox"</span>).append($pElement);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>登录页的JS代码（login.js）</p><ul><li><p>首先需要写一个json文件来存储用户信息</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"zhangsan"</span>,</span><br><span class="line">  <span class="attr">"phone"</span>: <span class="string">"17692414892"</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">  <span class="attr">"msg"</span>: <span class="string">"登录成功"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#login"</span>).bind(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 阻止默认行为</span></span><br><span class="line">  event.preventDefault();</span><br><span class="line">  <span class="comment">// 表单序列化 - 根据表单默认同步提交获取数据的方式</span></span><br><span class="line">  <span class="keyword">var</span> data = $(<span class="string">"#login"</span>).serialize();</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通过异步交互提交表单</span></span><br><span class="line">  <span class="comment">// 因为我在 axios_default.js 中写了baseURL，所以可以直接写/data/login.json</span></span><br><span class="line">  axios.get(<span class="string">"/data/login.json"</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">    <span class="comment">// 获取到json文件中的phone和password的值</span></span><br><span class="line">    <span class="keyword">var</span> phoneJson = response.phone;</span><br><span class="line">    <span class="keyword">var</span> passwordJson = response.password;</span><br><span class="line">    <span class="comment">// console.log(phoneJson, passwordJson);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取到用户输入的phone和password的值</span></span><br><span class="line">    <span class="keyword">var</span> phoneInput = $(<span class="string">"#phone"</span>).val();</span><br><span class="line">    <span class="keyword">var</span> passwordInput = $(<span class="string">"#password"</span>).val();</span><br><span class="line">    <span class="comment">// console.log(phoneInput, passwordInput);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果用户输入的 phone和password都一样，那么跳转到抽奖页面（页面不刷新）</span></span><br><span class="line">    <span class="keyword">if</span> (phoneInput === phoneJson &amp;&amp; passwordInput === passwordJson) &#123;</span><br><span class="line">      <span class="comment">// 登录页面隐藏</span></span><br><span class="line">      $(<span class="string">".loginBox"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">      <span class="comment">// 抽奖页面显示</span></span><br><span class="line">      $(<span class="string">"table"</span>).css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 提示错误信息，可以改成页面</span></span><br><span class="line">      alert(<span class="string">"手机号或密码错误"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>中奖结果背景特效JS代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> main = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"main"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; <span class="number">60</span>; x++) &#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="built_in">document</span>.createElement(<span class="string">"i"</span>);</span><br><span class="line">  main.appendChild(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> is = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"i"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; is.length; i++) &#123;</span><br><span class="line">  is[i].style.transform = <span class="string">`rotate(<span class="subst">$&#123;i * <span class="number">12</span>&#125;</span>deg) translateX(80px)`</span>;</span><br><span class="line">  is[i].style.animationDelay = <span class="string">`<span class="subst">$&#123;i * <span class="number">0.05</span>&#125;</span>s`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>二、写后台代码</p><ul><li><p>首先先创建一个服务器</p><ul><li>安装第三方库</li><li><code>npm i axios</code></li><li><code>npm i express</code></li><li><code>npm i ejs</code></li></ul><p>router.js - 把所有的路由都放在这个文件里面了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入express第三方模块，用来写服务器</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// router路由对象</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写路由</span></span><br><span class="line">router.get(<span class="string">"/"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">"index"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">"/login"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">"666"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>app.js代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入express第三方模块，用来写服务器</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 引入path内置模块，用来获取文件路径</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">// 引入router.js文件（自己写的路由文件）</span></span><br><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">"./router"</span>);</span><br><span class="line"><span class="comment">// 创建一个服务器</span></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板引擎设置（ejs模板引擎）</span></span><br><span class="line">app.set(<span class="string">"view engine"</span>, <span class="string">"html"</span>);</span><br><span class="line">app.set(<span class="string">"views"</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views`</span>);</span><br><span class="line">app.engine(<span class="string">"html"</span>, <span class="built_in">require</span>(<span class="string">"ejs"</span>).renderFile); <span class="comment">// 用ejs模板渲染html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log("__dirname: ", __dirname);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把文件暴露出去，使每个文件都能访问到暴露出去的文件</span></span><br><span class="line"><span class="comment">// 使用"/public"作为前缀来加载public文件夹下的文件</span></span><br><span class="line">app.use(<span class="string">"/public"</span>, express.static(path.join(__dirname, <span class="string">"./public/"</span>)));</span><br><span class="line"><span class="comment">// 使用"/node_modules"作为前缀来加载node_modules文件夹下的文件</span></span><br><span class="line">app.use(</span><br><span class="line">  <span class="string">"/node_modules"</span>,</span><br><span class="line">  express.static(path.join(__dirname, <span class="string">"./node_modules/"</span>))</span><br><span class="line">);</span><br><span class="line"><span class="comment">// 使用"/data"作为前缀来加载data文件夹下的文件</span></span><br><span class="line">app.use(<span class="string">"/data"</span>, express.static(path.join(__dirname, <span class="string">"./data/"</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把路由挂载到 app 中</span></span><br><span class="line"><span class="comment">//router路由对象中的路由都会匹配到</span></span><br><span class="line">app.use(router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听3000端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"服务器开启成功了 -- 3000"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>我写了一个配置默认的设置的文件，可以在 <code>axios.defaults.xxx</code> 中进行配置</p></li></ul><p>axios_default.js文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认配置</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> axios !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  axios.defaults.baseURL = <span class="string">"http://127.0.0.1:3000"</span>;</span><br><span class="line">  axios.defaults.withCredentials = <span class="literal">true</span>; <span class="comment">//=&gt; 允许跨域请求</span></span><br><span class="line">  axios.defaults.transformRequest = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">``</span>;</span><br><span class="line">    <span class="keyword">if</span> (data &amp;&amp; <span class="keyword">typeof</span> data === <span class="string">"object"</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (data.hasOwnProperty(attr)) &#123;</span><br><span class="line">          str += <span class="string">`<span class="subst">$&#123;attr&#125;</span>=<span class="subst">$&#123;data[attr]&#125;</span>&amp;`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.substring(<span class="number">0</span>, str.length - <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  axios.defaults.headers[<span class="string">"Contet-Type"</span>] = <span class="string">"x-www-form-urlencoded"</span>;</span><br><span class="line">  axios.interceptors.response.use(<span class="function">(<span class="params">result</span>) =&gt;</span> result.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在浏览器输入 <code>127.0.0.1:3000</code> ，可以发现，我们已经可以成功启动服务了，并且能够访问到我写的网页了</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E4%BA%AC%E4%B8%9C%E6%8A%BD%E5%A5%96%E4%BA%8C.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      京东抽奖案例
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>axios中文文档</title>
    <link href="https://extheor.github.io/posts/dc94f8a1/index.html"/>
    <id>https://extheor.github.io/posts/dc94f8a1/index.html</id>
    <published>2020-09-06T02:31:41.000Z</published>
    <updated>2020-09-13T06:37:36.956Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="axios中文文档"><a class="markdownIt-Anchor" href="#axios中文文档"></a> axios中文文档</h1><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>使用 npm:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure><p>使用 bower:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure><p>使用 cdn:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;axios&#x2F;dist&#x2F;axios.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h2 id="案例"><a class="markdownIt-Anchor" href="#案例"></a> 案例</h2><p>执行 <code>GET</code> 请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 为给定 ID 的 user 创建请求</span><br><span class="line">axios.get(&#39;&#x2F;user?ID&#x3D;12345&#39;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 上面的请求也可以这样做</span><br><span class="line">axios.get(&#39;&#x2F;user&#39;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>执行 <code>POST</code> 请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#39;&#x2F;user&#39;, &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;,</span><br><span class="line">    lastName: &#39;Flintstone&#39;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>执行多个并发请求</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&#39;&#x2F;user&#x2F;12345&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&#39;&#x2F;user&#x2F;12345&#x2F;permissions&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    &#x2F;&#x2F; 两个请求现在都执行完成</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure><h2 id="axios-api"><a class="markdownIt-Anchor" href="#axios-api"></a> axios API</h2><p>可以通过向 <code>axios</code> 传递相关配置来创建请求</p><h5 id="axiosconfig"><a class="markdownIt-Anchor" href="#axiosconfig"></a> axios(config)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 发送 POST 请求</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &#39;post&#39;,</span><br><span class="line">  url: &#39;&#x2F;user&#x2F;12345&#39;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;,</span><br><span class="line">    lastName: &#39;Flintstone&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F; 获取远端图片</span><br><span class="line">axios(&#123;</span><br><span class="line">  method:&#39;get&#39;,</span><br><span class="line">  url:&#39;http:&#x2F;&#x2F;bit.ly&#x2F;2mTM3nY&#39;,</span><br><span class="line">  responseType:&#39;stream&#39;</span><br><span class="line">&#125;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">  response.data.pipe(fs.createWriteStream(&#39;ada_lovelace.jpg&#39;))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="axiosurl-config"><a class="markdownIt-Anchor" href="#axiosurl-config"></a> axios(url[, config])</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 发送 GET 请求（默认的方法）</span><br><span class="line">axios(&#39;&#x2F;user&#x2F;12345&#39;);</span><br></pre></td></tr></table></figure><h3 id="请求方法的别名"><a class="markdownIt-Anchor" href="#请求方法的别名"></a> 请求方法的别名</h3><p>为方便起见，为所有支持的请求方法提供了别名</p><h5 id="axiosrequestconfig"><a class="markdownIt-Anchor" href="#axiosrequestconfig"></a> axios.request(config)</h5><h5 id="axiosgeturl-config"><a class="markdownIt-Anchor" href="#axiosgeturl-config"></a> axios.get(url[, config])</h5><h5 id="axiosdeleteurl-config"><a class="markdownIt-Anchor" href="#axiosdeleteurl-config"></a> axios.delete(url[, config])</h5><h5 id="axiosheadurl-config"><a class="markdownIt-Anchor" href="#axiosheadurl-config"></a> axios.head(url[, config])</h5><h5 id="axiosoptionsurl-config"><a class="markdownIt-Anchor" href="#axiosoptionsurl-config"></a> axios.options(url[, config])</h5><h5 id="axiosposturl-data-config"><a class="markdownIt-Anchor" href="#axiosposturl-data-config"></a> axios.post(url[, data[, config]])</h5><h5 id="axiosputurl-data-config"><a class="markdownIt-Anchor" href="#axiosputurl-data-config"></a> axios.put(url[, data[, config]])</h5><h5 id="axiospatchurl-data-config"><a class="markdownIt-Anchor" href="#axiospatchurl-data-config"></a> axios.patch(url[, data[, config]])</h5><h6 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h6><p>在使用别名方法时， <code>url</code>、<code>method</code>、<code>data</code> 这些属性都不必在配置中指定。</p><h3 id="并发"><a class="markdownIt-Anchor" href="#并发"></a> 并发</h3><p>处理并发请求的助手函数</p><h5 id="axiosalliterable"><a class="markdownIt-Anchor" href="#axiosalliterable"></a> axios.all(iterable)</h5><h5 id="axiosspreadcallback"><a class="markdownIt-Anchor" href="#axiosspreadcallback"></a> axios.spread(callback)</h5><h3 id="创建实例"><a class="markdownIt-Anchor" href="#创建实例"></a> 创建实例</h3><p>可以使用自定义配置新建一个 axios 实例</p><h5 id="axioscreateconfig"><a class="markdownIt-Anchor" href="#axioscreateconfig"></a> axios.create([config])</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const instance &#x3D; axios.create(&#123;</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;some-domain.com&#x2F;api&#x2F;&#39;,</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  headers: &#123;&#39;X-Custom-Header&#39;: &#39;foobar&#39;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="实例方法"><a class="markdownIt-Anchor" href="#实例方法"></a> 实例方法</h3><p>以下是可用的实例方法。指定的配置将与实例的配置合并。</p><h5 id="axiosrequestconfig-2"><a class="markdownIt-Anchor" href="#axiosrequestconfig-2"></a> axios#request(config)</h5><h5 id="axiosgeturl-config-2"><a class="markdownIt-Anchor" href="#axiosgeturl-config-2"></a> axios#get(url[, config])</h5><h5 id="axiosdeleteurl-config-2"><a class="markdownIt-Anchor" href="#axiosdeleteurl-config-2"></a> axios#delete(url[, config])</h5><h5 id="axiosheadurl-config-2"><a class="markdownIt-Anchor" href="#axiosheadurl-config-2"></a> axios#head(url[, config])</h5><h5 id="axiosoptionsurl-config-2"><a class="markdownIt-Anchor" href="#axiosoptionsurl-config-2"></a> axios#options(url[, config])</h5><h5 id="axiosposturl-data-config-2"><a class="markdownIt-Anchor" href="#axiosposturl-data-config-2"></a> axios#post(url[, data[, config]])</h5><h5 id="axiosputurl-data-config-2"><a class="markdownIt-Anchor" href="#axiosputurl-data-config-2"></a> axios#put(url[, data[, config]])</h5><h5 id="axiospatchurl-data-config-2"><a class="markdownIt-Anchor" href="#axiospatchurl-data-config-2"></a> axios#patch(url[, data[, config]])</h5><h2 id="请求配置"><a class="markdownIt-Anchor" href="#请求配置"></a> 请求配置</h2><p>这些是创建请求时可以用的配置选项。只有 <code>url</code> 是必需的。如果没有指定 <code>method</code>，请求将默认使用 <code>get</code> 方法。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &#x2F;&#x2F; &#96;url&#96; 是用于请求的服务器 URL</span><br><span class="line">  url: &#39;&#x2F;user&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;method&#96; 是创建请求时使用的方法</span><br><span class="line">  method: &#39;get&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;baseURL&#96; 将自动加在 &#96;url&#96; 前面，除非 &#96;url&#96; 是一个绝对 URL。</span><br><span class="line">  &#x2F;&#x2F; 它可以通过设置一个 &#96;baseURL&#96; 便于为 axios 实例的方法传递相对 URL</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;some-domain.com&#x2F;api&#x2F;&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;transformRequest&#96; 允许在向服务器发送前，修改请求数据</span><br><span class="line">  &#x2F;&#x2F; 只能用在 &#39;PUT&#39;, &#39;POST&#39; 和 &#39;PATCH&#39; 这几个请求方法</span><br><span class="line">  &#x2F;&#x2F; 后面数组中的函数必须返回一个字符串，或 ArrayBuffer，或 Stream</span><br><span class="line">  transformRequest: [function (data, headers) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对 data 进行任意转换处理</span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;transformResponse&#96; 在传递给 then&#x2F;catch 前，允许修改响应数据</span><br><span class="line">  transformResponse: [function (data) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对 data 进行任意转换处理</span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;headers&#96; 是即将被发送的自定义请求头</span><br><span class="line">  headers: &#123;&#39;X-Requested-With&#39;: &#39;XMLHttpRequest&#39;&#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;params&#96; 是即将与请求一起发送的 URL 参数</span><br><span class="line">  &#x2F;&#x2F; 必须是一个无格式对象(plain object)或 URLSearchParams 对象</span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: 12345</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;paramsSerializer&#96; 是一个负责 &#96;params&#96; 序列化的函数</span><br><span class="line">  &#x2F;&#x2F; (e.g. https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;qs, http:&#x2F;&#x2F;api.jquery.com&#x2F;jquery.param&#x2F;)</span><br><span class="line">  paramsSerializer: function(params) &#123;</span><br><span class="line">    return Qs.stringify(params, &#123;arrayFormat: &#39;brackets&#39;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;data&#96; 是作为请求主体被发送的数据</span><br><span class="line">  &#x2F;&#x2F; 只适用于这些请求方法 &#39;PUT&#39;, &#39;POST&#39;, 和 &#39;PATCH&#39;</span><br><span class="line">  &#x2F;&#x2F; 在没有设置 &#96;transformRequest&#96; 时，必须是以下类型之一：</span><br><span class="line">  &#x2F;&#x2F; - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span><br><span class="line">  &#x2F;&#x2F; - 浏览器专属：FormData, File, Blob</span><br><span class="line">  &#x2F;&#x2F; - Node 专属： Stream</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &#39;Fred&#39;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;timeout&#96; 指定请求超时的毫秒数(0 表示无超时时间)</span><br><span class="line">  &#x2F;&#x2F; 如果请求话费了超过 &#96;timeout&#96; 的时间，请求将被中断</span><br><span class="line">  timeout: 1000,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;withCredentials&#96; 表示跨域请求时是否需要使用凭证</span><br><span class="line">  withCredentials: false, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;adapter&#96; 允许自定义处理请求，以使测试更轻松</span><br><span class="line">  &#x2F;&#x2F; 返回一个 promise 并应用一个有效的响应 (查阅 [response docs](#response-api)).</span><br><span class="line">  adapter: function (config) &#123;</span><br><span class="line">    &#x2F;* ... *&#x2F;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> &#x2F;&#x2F; &#96;auth&#96; 表示应该使用 HTTP 基础验证，并提供凭据</span><br><span class="line">  &#x2F;&#x2F; 这将设置一个 &#96;Authorization&#96; 头，覆写掉现有的任意使用 &#96;headers&#96; 设置的自定义 &#96;Authorization&#96;头</span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: &#39;janedoe&#39;,</span><br><span class="line">    password: &#39;s00pers3cret&#39;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;responseType&#96; 表示服务器响应的数据类型，可以是 &#39;arraybuffer&#39;, &#39;blob&#39;, &#39;document&#39;, &#39;json&#39;, &#39;text&#39;, &#39;stream&#39;</span><br><span class="line">  responseType: &#39;json&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;responseEncoding&#96; indicates encoding to use for decoding responses</span><br><span class="line">  &#x2F;&#x2F; Note: Ignored for &#96;responseType&#96; of &#39;stream&#39; or client-side requests</span><br><span class="line">  responseEncoding: &#39;utf8&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;xsrfCookieName&#96; 是用作 xsrf token 的值的cookie的名称</span><br><span class="line">  xsrfCookieName: &#39;XSRF-TOKEN&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;xsrfHeaderName&#96; is the name of the http header that carries the xsrf token value</span><br><span class="line">  xsrfHeaderName: &#39;X-XSRF-TOKEN&#39;, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;onUploadProgress&#96; 允许为上传处理进度事件</span><br><span class="line">  onUploadProgress: function (progressEvent) &#123;</span><br><span class="line">    &#x2F;&#x2F; Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;onDownloadProgress&#96; 允许为下载处理进度事件</span><br><span class="line">  onDownloadProgress: function (progressEvent) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对原生进度事件的处理</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;maxContentLength&#96; 定义允许的响应内容的最大尺寸</span><br><span class="line">  maxContentLength: 2000,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;validateStatus&#96; 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise 。如果 &#96;validateStatus&#96; 返回 &#96;true&#96; (或者设置为 &#96;null&#96; 或 &#96;undefined&#96;)，promise 将被 resolve; 否则，promise 将被 rejecte</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &gt;&#x3D; 200 &amp;&amp; status &lt; 300; &#x2F;&#x2F; default</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;maxRedirects&#96; 定义在 node.js 中 follow 的最大重定向数目</span><br><span class="line">  &#x2F;&#x2F; 如果设置为0，将不会 follow 任何重定向</span><br><span class="line">  maxRedirects: 5, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;socketPath&#96; defines a UNIX Socket to be used in node.js.</span><br><span class="line">  &#x2F;&#x2F; e.g. &#39;&#x2F;var&#x2F;run&#x2F;docker.sock&#39; to send requests to the docker daemon.</span><br><span class="line">  &#x2F;&#x2F; Only either &#96;socketPath&#96; or &#96;proxy&#96; can be specified.</span><br><span class="line">  &#x2F;&#x2F; If both are specified, &#96;socketPath&#96; is used.</span><br><span class="line">  socketPath: null, &#x2F;&#x2F; default</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;httpAgent&#96; 和 &#96;httpsAgent&#96; 分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理。允许像这样配置选项：</span><br><span class="line">  &#x2F;&#x2F; &#96;keepAlive&#96; 默认没有启用</span><br><span class="line">  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line">  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#39;proxy&#39; 定义代理服务器的主机名称和端口</span><br><span class="line">  &#x2F;&#x2F; &#96;auth&#96; 表示 HTTP 基础验证应当用于连接代理，并提供凭据</span><br><span class="line">  &#x2F;&#x2F; 这将会设置一个 &#96;Proxy-Authorization&#96; 头，覆写掉已有的通过使用 &#96;header&#96; 设置的自定义 &#96;Proxy-Authorization&#96; 头。</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: &#39;127.0.0.1&#39;,</span><br><span class="line">    port: 9000,</span><br><span class="line">    auth: &#123;</span><br><span class="line">      username: &#39;mikeymike&#39;,</span><br><span class="line">      password: &#39;rapunz3l&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;cancelToken&#96; 指定用于取消请求的 cancel token</span><br><span class="line">  &#x2F;&#x2F; （查看后面的 Cancellation 这节了解更多）</span><br><span class="line">  cancelToken: new CancelToken(function (cancel) &#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="响应结构"><a class="markdownIt-Anchor" href="#响应结构"></a> 响应结构</h2><p>某个请求的响应包含以下信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x2F;&#x2F; &#96;data&#96; 由服务器提供的响应</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;status&#96; 来自服务器响应的 HTTP 状态码</span><br><span class="line">  status: 200,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;statusText&#96; 来自服务器响应的 HTTP 状态信息</span><br><span class="line">  statusText: &#39;OK&#39;,</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; &#96;headers&#96; 服务器响应的头</span><br><span class="line">  headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; &#96;config&#96; 是为请求提供的配置信息</span><br><span class="line">  config: &#123;&#125;,</span><br><span class="line"> &#x2F;&#x2F; &#39;request&#39;</span><br><span class="line">  &#x2F;&#x2F; &#96;request&#96; is the request that generated this response</span><br><span class="line">  &#x2F;&#x2F; It is the last ClientRequest instance in node.js (in redirects)</span><br><span class="line">  &#x2F;&#x2F; and an XMLHttpRequest instance the browser</span><br><span class="line">  request: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 <code>then</code> 时，你将接收下面这样的响应 :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>在使用 <code>catch</code> 时，或传递 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" target="_blank" rel="noopener">rejection callback</a> 作为 <code>then</code> 的第二个参数时，响应可以通过 <code>error</code> 对象可被使用，正如在<a href="https://www.kancloud.cn/yunye/axios/234845#handling-errors" target="_blank" rel="noopener">错误处理</a>这一节所讲。</p><h2 id="配置默认值"><a class="markdownIt-Anchor" href="#配置默认值"></a> 配置默认值</h2><p>你可以指定将被用在各个请求的配置默认值</p><h3 id="全局的-axios-默认值"><a class="markdownIt-Anchor" href="#全局的-axios-默认值"></a> 全局的 axios 默认值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL &#x3D; &#39;https:&#x2F;&#x2F;api.example.com&#39;;</span><br><span class="line">axios.defaults.headers.common[&#39;Authorization&#39;] &#x3D; AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&#39;Content-Type&#39;] &#x3D; &#39;application&#x2F;x-www-form-urlencoded&#39;;</span><br></pre></td></tr></table></figure><h3 id="自定义实例默认值"><a class="markdownIt-Anchor" href="#自定义实例默认值"></a> 自定义实例默认值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Set config defaults when creating the instance</span><br><span class="line">const instance &#x3D; axios.create(&#123;</span><br><span class="line">  baseURL: &#39;https:&#x2F;&#x2F;api.example.com&#39;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Alter defaults after instance has been created</span><br><span class="line">instance.defaults.headers.common[&#39;Authorization&#39;] &#x3D; AUTH_TOKEN;</span><br></pre></td></tr></table></figure><h3 id="配置的优先顺序"><a class="markdownIt-Anchor" href="#配置的优先顺序"></a> 配置的优先顺序</h3><p>配置会以一个优先顺序进行合并。这个顺序是：在 <code>lib/defaults.js</code> 找到的库的默认值，然后是实例的 <code>defaults</code> 属性，最后是请求的 <code>config</code> 参数。后者将优先于前者。这里是一个例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 使用由库提供的配置的默认值来创建实例</span><br><span class="line">&#x2F;&#x2F; 此时超时配置的默认值是 &#96;0&#96;</span><br><span class="line">var instance &#x3D; axios.create();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 覆写库的超时默认值</span><br><span class="line">&#x2F;&#x2F; 现在，在超时前，所有请求都会等待 2.5 秒</span><br><span class="line">instance.defaults.timeout &#x3D; 2500;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 为已知需要花费很长时间的请求覆写超时设置</span><br><span class="line">instance.get(&#39;&#x2F;longRequest&#39;, &#123;</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="拦截器"><a class="markdownIt-Anchor" href="#拦截器"></a> 拦截器</h2><p>在请求或响应被 <code>then</code> 或 <code>catch</code> 处理前拦截它们。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 添加请求拦截器</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">    &#x2F;&#x2F; 在发送请求之前做些什么</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对请求错误做些什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 添加响应拦截器</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对响应数据做点什么</span><br><span class="line">    return response;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    &#x2F;&#x2F; 对响应错误做点什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>如果你想在稍后移除拦截器，可以这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myInterceptor &#x3D; axios.interceptors.request.use(function () &#123;&#x2F;*...*&#x2F;&#125;);</span><br><span class="line">axios.interceptors.request.eject(myInterceptor);</span><br></pre></td></tr></table></figure><p>可以为自定义 axios 实例添加拦截器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const instance &#x3D; axios.create();</span><br><span class="line">instance.interceptors.request.use(function () &#123;&#x2F;*...*&#x2F;&#125;);</span><br></pre></td></tr></table></figure><h2 id="错误处理"><a class="markdownIt-Anchor" href="#错误处理"></a> 错误处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">      &#x2F;&#x2F; The request was made and the server responded with a status code</span><br><span class="line">      &#x2F;&#x2F; that falls out of the range of 2xx</span><br><span class="line">      console.log(error.response.data);</span><br><span class="line">      console.log(error.response.status);</span><br><span class="line">      console.log(error.response.headers);</span><br><span class="line">    &#125; else if (error.request) &#123;</span><br><span class="line">      &#x2F;&#x2F; The request was made but no response was received</span><br><span class="line">      &#x2F;&#x2F; &#96;error.request&#96; is an instance of XMLHttpRequest in the browser and an instance of</span><br><span class="line">      &#x2F;&#x2F; http.ClientRequest in node.js</span><br><span class="line">      console.log(error.request);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      &#x2F;&#x2F; Something happened in setting up the request that triggered an Error</span><br><span class="line">      console.log(&#39;Error&#39;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>Y可以使用 <code>validateStatus</code> 配置选项定义一个自定义 HTTP 状态码的错误范围。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &lt; 500; &#x2F;&#x2F; Reject only if the status code is greater than or equal to 500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="取消"><a class="markdownIt-Anchor" href="#取消"></a> 取消</h2><p>使用 <em>cancel token</em> 取消请求</p><blockquote><p>Axios 的 cancel token API 基于<a href="https://github.com/tc39/proposal-cancelable-promises" target="_blank" rel="noopener">cancelable promises proposal</a>，它还处于第一阶段。</p></blockquote><p>可以使用 <code>CancelToken.source</code> 工厂方法创建 cancel token，像这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken &#x3D; axios.CancelToken;</span><br><span class="line">const source &#x3D; CancelToken.source();</span><br><span class="line"></span><br><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;).catch(function(thrown) &#123;</span><br><span class="line">  if (axios.isCancel(thrown)) &#123;</span><br><span class="line">    console.log(&#39;Request canceled&#39;, thrown.message);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">     &#x2F;&#x2F; 处理错误</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">axios.post(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  name: &#39;new name&#39;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  cancelToken: source.token</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 取消请求（message 参数是可选的）</span><br><span class="line">source.cancel(&#39;Operation canceled by the user.&#39;);</span><br></pre></td></tr></table></figure><p>还可以通过传递一个 executor 函数到 <code>CancelToken</code> 的构造函数来创建 cancel token：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const CancelToken &#x3D; axios.CancelToken;</span><br><span class="line">let cancel;</span><br><span class="line"></span><br><span class="line">axios.get(&#39;&#x2F;user&#x2F;12345&#39;, &#123;</span><br><span class="line">  cancelToken: new CancelToken(function executor(c) &#123;</span><br><span class="line">    &#x2F;&#x2F; executor 函数接收一个 cancel 函数作为参数</span><br><span class="line">    cancel &#x3D; c;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; cancel the request</span><br><span class="line">cancel();</span><br></pre></td></tr></table></figure><blockquote><p>注意: 可以使用同一个 cancel token 取消多个请求</p></blockquote><h2 id="使用-applicationx-www-form-urlencoded-format"><a class="markdownIt-Anchor" href="#使用-applicationx-www-form-urlencoded-format"></a> 使用 application/x-www-form-urlencoded format</h2><p>默认情况下，axios将JavaScript对象序列化为JSON。 要以application / x-www-form-urlencoded格式发送数据，您可以使用以下选项之一。</p><h3 id="浏览器"><a class="markdownIt-Anchor" href="#浏览器"></a> 浏览器</h3><p>在浏览器中，您可以使用URLSearchParams API，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const params &#x3D; new URLSearchParams();</span><br><span class="line">params.append(&#39;param1&#39;, &#39;value1&#39;);</span><br><span class="line">params.append(&#39;param2&#39;, &#39;value2&#39;);</span><br><span class="line">axios.post(&#39;&#x2F;foo&#39;, params);</span><br></pre></td></tr></table></figure><blockquote><p>请注意，所有浏览器都不支持URLSearchParams（<a href="http://xn--caniuse-1g3ln192bq9ua.com" target="_blank" rel="noopener">请参阅caniuse.com</a>），但可以使用polyfill（确保填充全局环境）。</p></blockquote><p>或者，您可以使用qs库编码数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const qs &#x3D; require(&#39;qs&#39;);</span><br><span class="line">axios.post(&#39;&#x2F;foo&#39;, qs.stringify(&#123; &#39;bar&#39;: 123 &#125;));</span><br></pre></td></tr></table></figure><p>或者以另一种方式（ES6），</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import qs from &#39;qs&#39;;</span><br><span class="line">const data &#x3D; &#123; &#39;bar&#39;: 123 &#125;;</span><br><span class="line">const options &#x3D; &#123;</span><br><span class="line">  method: &#39;POST&#39;,</span><br><span class="line">  headers: &#123; &#39;content-type&#39;: &#39;application&#x2F;x-www-form-urlencoded&#39; &#125;,</span><br><span class="line">  data: qs.stringify(data),</span><br><span class="line">  url,</span><br><span class="line">&#125;;</span><br><span class="line">axios(options);</span><br></pre></td></tr></table></figure><h3 id="nodejs"><a class="markdownIt-Anchor" href="#nodejs"></a> Node.js</h3><p>在node.js中，您可以使用querystring模块，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const querystring &#x3D; require(&#39;querystring&#39;);</span><br><span class="line">axios.post(&#39;http:&#x2F;&#x2F;something.com&#x2F;&#39;, querystring.stringify(&#123; foo: &#39;bar&#39; &#125;));</span><br></pre></td></tr></table></figure><p>您也可以使用qs库。</p><h2 id="semver"><a class="markdownIt-Anchor" href="#semver"></a> Semver</h2><p>在axios达到1.0版本之前，破坏性更改将以新的次要版本发布。 例如0.5.1和0.5.4将具有相同的API，但0.6.0将具有重大变化。</p><h2 id="promises"><a class="markdownIt-Anchor" href="#promises"></a> Promises</h2><p>axios 依赖原生的 ES6 Promise 实现而<a href="http://caniuse.com/promises" target="_blank" rel="noopener">被支持</a>. 如果你的环境不支持 ES6 Promise，你可以使用 <a href="https://github.com/jakearchibald/es6-promise" target="_blank" rel="noopener">polyfill</a>.</p><h2 id="typescript"><a class="markdownIt-Anchor" href="#typescript"></a> TypeScript</h2><p>axios包括TypeScript定义。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#39;axios&#39;;</span><br><span class="line">axios.get(&#39;&#x2F;user?ID&#x3D;12345&#39;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      axios中文文档
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>axios的请求合并以及参数配置</title>
    <link href="https://extheor.github.io/posts/12d95a5e/index.html"/>
    <id>https://extheor.github.io/posts/12d95a5e/index.html</id>
    <published>2020-09-05T12:50:41.000Z</published>
    <updated>2020-09-13T06:37:36.965Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="axios的请求合并以及参数配置"><a class="markdownIt-Anchor" href="#axios的请求合并以及参数配置"></a> axios的请求合并以及参数配置</h1><p>现在我们假设想要两个请求都完成后才做一些事情，应该怎么办呢？</p><p>我们会想到，可以在第二个请求完成后，一起返回第一个请求结果和第二个请求结果，并且他们是按照代码顺序输出结果的。</p><p>代码演示为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="literal">null</span>;</span><br><span class="line">axios</span><br><span class="line">    .get(</span><br><span class="line">    <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/info"</span></span><br><span class="line">)</span><br><span class="line">    .then(<span class="function">(<span class="params">resuleA</span>) =&gt;</span> &#123;</span><br><span class="line">    result = resuleA;</span><br><span class="line">    <span class="comment">// console.log(resuleA);</span></span><br><span class="line">    <span class="keyword">return</span> axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/list"</span></span><br><span class="line">    );</span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">resultB</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(resultB);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>我们可以看到，我在第二个then里面利用全局变量 result 返回了第一个then的结果</p></blockquote><p>这样写的话未免有点麻烦，那有没有什么方法可以直接实现所有请求都完成后然后才做一些事情的方法呢？</p><ul><li><p>axios.all([])</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendArr = [</span><br><span class="line">    axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/list"</span></span><br><span class="line">    ),</span><br><span class="line">    axios.get(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/info"</span></span><br><span class="line">    ),</span><br><span class="line">    axios.post(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/add"</span></span><br><span class="line">    ),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt; 三个请求都完成才做一些事情（可以基于ALL实现）</span></span><br><span class="line">axios.all(sendArr).then((result) =&gt; &#123;</span><br><span class="line">    console.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>返回结果如下：</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/axios.all()%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.png" alt="" /></p><p>返回结果是一个数组，分别存储每一个请求的结果</p></li><li><p>axios.spread返回每次请求的结果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">axios.all(sendArr).then(</span><br><span class="line">    axios.spread(<span class="function">(<span class="params">resA, resB, resC</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//=&gt; RES-A/-B/-C分别代表三次请求的结果</span></span><br><span class="line">        <span class="comment">//=&gt; 原理搜索JS中的柯里化函数</span></span><br><span class="line">        <span class="built_in">console</span>.log(resA);</span><br><span class="line">        <span class="built_in">console</span>.log(resB);</span><br><span class="line">        <span class="built_in">console</span>.log(resC);</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      axios的请求合并以及参数配置
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>axios的基础语法</title>
    <link href="https://extheor.github.io/posts/4e6d4eb4/index.html"/>
    <id>https://extheor.github.io/posts/4e6d4eb4/index.html</id>
    <published>2020-09-05T01:45:25.000Z</published>
    <updated>2020-09-13T06:37:36.962Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="axios的基础语法"><a class="markdownIt-Anchor" href="#axios的基础语法"></a> axios的基础语法</h1><p>在页面引入 axios.js 文件，使用 <code>dir(axios)</code> 可以查看 axios 的所有方法</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax图片/查看axios所有方法.png"></img></p><p>axios: 它是一个类库，基于Promise管理的AJAX库</p><ol><li><p>提供了对应请求方式的方法（例如：get/post/head/delete/put/options…）</p><p>axios.get() 向服务器发送一个请求，基于的是GET方式</p></li><li><p>支持的参数配置</p><p>axios.get([URL],[OPTIONS])</p></li><li><p>基于GET或者POST方法发请求，返回的结果都是Promise实例</p></li></ol><ul><li><p>GET请求</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/"</span>, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">        <span class="comment">//=&gt; GET请求中，会把params中的键值对拼接成urlencode格式的字符串，然后以问号传递参数的方式，传递给服务器，类似于JQ-AJAX中的DATA（或者自己基于URL后面拼接也可以，不用params）</span></span><br><span class="line">        name: <span class="string">"zhufeng"</span>,</span><br><span class="line">        age: <span class="number">9</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>POST请求</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/add"</span>, &#123;</span><br><span class="line">    <span class="comment">//=&gt; 配置项中传递的内容都相当于基于请求主体传递给服务器，但是传递给服务器的内容格式是RAW(JSON格式的子字符串)，不是X-WWW-FORM-URLENCODED</span></span><br><span class="line">    name: <span class="string">"zhufeng"</span>,</span><br><span class="line">    age: <span class="number">9</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>axios解决回调地狱</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">axios</span><br><span class="line">    .get(</span><br><span class="line">    <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/info"</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        params: &#123;</span><br><span class="line">            lx: <span class="number">12</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; data &#125; = result;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> axios.post(</span><br><span class="line">        <span class="string">"https://www.easy-mock.com/mock/5b0412beda8a195fb0978627/temp/add"</span></span><br><span class="line">    );</span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; data &#125; = result;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>返回结果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax图片/axios解决回调地狱结果.png"></img></p><p>由返回结果可知，代码是从上到下执行的，成功解决回调地狱。</p><ul><li><p>result的返回结果是一个对象，其中包含很多属性，列举几个如下：</p><p>data: 从服务器获取的响应主体内容</p><p>headers: 从服务器获取的响应的头信息</p><p>request: 创建的AJAX实例</p><p>status: 状态码</p><p>statusText: 状态码的描述</p><p>config: 基于Axios发送请求的时候做的配置项</p></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      axios的基础语法
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>JSONP</title>
    <link href="https://extheor.github.io/posts/738eee3b/index.html"/>
    <id>https://extheor.github.io/posts/738eee3b/index.html</id>
    <published>2020-09-05T01:40:25.000Z</published>
    <updated>2020-09-13T06:37:36.955Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="jsonp"><a class="markdownIt-Anchor" href="#jsonp"></a> JSONP</h1><h2 id="jsonp是什么"><a class="markdownIt-Anchor" href="#jsonp是什么"></a> JSONP是什么</h2><p>JSONP(JSON with Padding）是JSON的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。</p><p>利用 <code>&lt;script&gt;</code> 元素的这个开放策略，网页可以得到从其他来源动态产生的JSON资料，而这种使用模式就是所谓的JSONP。</p><h2 id="script元素实现"><a class="markdownIt-Anchor" href="#script元素实现"></a> <code>&lt;script&gt;</code>元素实现</h2><p>网页通过添加一个 <code>&lt;script&gt;</code> 元素，向服务器请求JSON数据，这种做法不受同源政策限制;服务器收到请求后，将数据放在一个指定名字的回调函数里传回来。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addScriptTag</span>(<span class="params">src</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">    script.setAttribute(<span class="string">"typ.e"</span><span class="string">"text/jaxascript"</span>);</span><br><span class="line">    script.src = src;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">addScriptTag(<span class="string">'http://127.0.0.1:3000?callback=foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Your public IP address is: '</span> + data.ip);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码演示</p><ul><li><p>首先写一个服务器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入Node.js中的http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="comment">// 定义当前服务的IP地址和端口号</span></span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">"127.0.0.1"</span>; <span class="comment">// 表示本机</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * createServer(callback)方法 - 表示创建一个服务</span></span><br><span class="line"><span class="comment"> * * callback - 表示回调函数</span></span><br><span class="line"><span class="comment"> *   function(request, response)&#123;&#125;</span></span><br><span class="line"><span class="comment"> *   * request - 表示请求(用于接收客户端发送给服务端的请求)</span></span><br><span class="line"><span class="comment"> *   * response - 表示响应(用于接收服务器端发送给客户端的处理结果)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.statusCode = <span class="number">200</span>;</span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/plain"</span>);</span><br><span class="line">  <span class="comment">// res.setHeader("Access-Control-Allow-Origin", "*");</span></span><br><span class="line">  res.end(<span class="string">'fn(&#123;"msg": "Hello World!"&#125;)'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(port, hostname, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Server running at http://<span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>/`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>然后再写一个跨域请求的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>script元素实现JSONP跨域<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        通过&lt;script&gt;元素实现JSONP跨域访问</span></span><br><span class="line"><span class="comment">        * 利用&lt;script&gt;元素的src属性指定服务器端地址</span></span><br><span class="line"><span class="comment">        * 同时将指定的回调函数名称发送指定服务器</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 定义发送服务器端的回调函数 - 利用参数方式进行接收</span></span></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">(data)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(data);</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1:3000?callback=fn"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>页面返回结果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/script%E8%B7%A8%E5%9F%9F%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.png" alt="" /></p></li><li><p>分析图</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/script%E5%85%83%E7%B4%A0%E5%AE%9E%E7%8E%B0JSONP%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE.png" alt="" /></p></li></ul><h2 id="getjson方法"><a class="markdownIt-Anchor" href="#getjson方法"></a> getJSON()方法</h2><ul><li><p>首先写一个服务器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入Node.js中的http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="comment">// 定义当前服务的IP地址和端口号</span></span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">"127.0.0.1"</span>; <span class="comment">// 表示本机</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * createServer(callback)方法 - 表示创建一个服务</span></span><br><span class="line"><span class="comment"> * * callback - 表示回调函数</span></span><br><span class="line"><span class="comment"> *   function(request, response)&#123;&#125;</span></span><br><span class="line"><span class="comment"> *   * request - 表示请求(用于接收客户端发送给服务端的请求)</span></span><br><span class="line"><span class="comment"> *   * response - 表示响应(用于接收服务器端发送给客户端的处理结果)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> url = req.url;</span><br><span class="line">  <span class="built_in">console</span>.log(url);</span><br><span class="line">  <span class="comment">// var urlObj = require("url").parse(url);</span></span><br><span class="line">  <span class="comment">// console.log(urlObj);</span></span><br><span class="line">  <span class="keyword">var</span> functionName = url.split(<span class="string">"&amp;"</span>)[<span class="number">0</span>].split(<span class="string">"="</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="built_in">console</span>.log(functionName);</span><br><span class="line"></span><br><span class="line">  res.statusCode = <span class="number">200</span>;</span><br><span class="line">  res.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/plain"</span>);</span><br><span class="line">  <span class="comment">// res.setHeader("Access-Control-Allow-Origin", "*");</span></span><br><span class="line">  res.end(functionName + <span class="string">'(&#123;"msg": "Hello World!"&#125;)'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(port, hostname, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Server running at http://<span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>/`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>写的时候需要获取到jQuery提供的随机函数名</p></li><li><p>然后再写一个跨域请求的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>getHJSON实现跨域访问<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $.getJSON(<span class="string">"http://127.0.0.1:3000?callback=?"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(data);</span></span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>页面返回结果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/script%E8%B7%A8%E5%9F%9F%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.png" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      JSONP
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>常见跨域</title>
    <link href="https://extheor.github.io/posts/35e2bcf6/index.html"/>
    <id>https://extheor.github.io/posts/35e2bcf6/index.html</id>
    <published>2020-09-05T01:40:25.000Z</published>
    <updated>2020-09-13T06:37:36.969Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="常见跨域"><a class="markdownIt-Anchor" href="#常见跨域"></a> 常见跨域</h1><p>HTML页面中一些允许指定路径的元素具有跨域特性:</p><ul><li><code>&lt;link&gt;</code> 元素</li><li><code>&lt;script&gt;</code> 元素</li><li><code>&lt;img&gt;</code> 元素</li><li><code>&lt;ifrane&gt;</code> 元素</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/iquery/3.3.1/jquery.is"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://c.hiphotas.baidu.cam/image/pic/item/b58f8c5494eef01f40ef23e9edfe9925bc317d26.jpg"</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      常见跨域
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>跨域访问是什么</title>
    <link href="https://extheor.github.io/posts/2d020832/index.html"/>
    <id>https://extheor.github.io/posts/2d020832/index.html</id>
    <published>2020-09-05T01:35:21.000Z</published>
    <updated>2020-09-13T06:37:36.970Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="跨域访问是什么"><a class="markdownIt-Anchor" href="#跨域访问是什么"></a> 跨域访问是什么</h1><h2 id="同源策略"><a class="markdownIt-Anchor" href="#同源策略"></a> 同源策略</h2><p>1995年，同源政策由Netscape公司引人浏览器。目前，所有测览器都实行这个政策。同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。随着互联网的发展，“同源政策”越来越严格。目前，如果非同源，共有三种行为受到限制:】</p><ol><li>Cookie、LocalStorage和IndexDB无法读取</li><li>DOM无法获得</li><li>AJAX请求不能发送</li></ol><p>虽然这些限制是必要的，但是有时很不方便，合理的用途也受到影响。</p><p>所谓“同源”指的是“三个相同”: 协议相同、域名相同以及端相同。</p><h2 id="域名是什么"><a class="markdownIt-Anchor" href="#域名是什么"></a> 域名是什么</h2><p>域名(Domain Name）又称为网域，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。</p><table><thead><tr><th>URL</th><th>说明</th></tr></thead><tbody><tr><td><a href="http://www.a.com/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com/a.js和</a> <a href="http://www.acom/b.js" target="_blank" rel="noopener">http://www.acom/b.js</a></td><td>同一域名下</td></tr><tr><td><a href="http://www.a.corm/lab/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.corm/lab/a.js和</a> <a href="http://www.acorm/script/b.js" target="_blank" rel="noopener">http://www.acorm/script/b.js</a></td><td>同一域名下不同文件夹</td></tr><tr><td><a href="http://www.a.com:8000/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com:8000/a.js和</a> <a href="http://www.a.com/b.js" target="_blank" rel="noopener">http://www.a.com/b.js</a></td><td>同一域名，不同端口</td></tr><tr><td><a href="http://www.a.com/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com/a.js和</a> <a href="https://www.a.com/b.js" target="_blank" rel="noopener">https://www.a.com/b.js</a></td><td>同一域名，不同协议</td></tr><tr><td><a href="http://www.a.com/a.js%E5%92%8Chttp://127.0.0.100/b.js" target="_blank" rel="noopener">http://www.a.com/a.js和http://127.0.0.100/b.js</a></td><td>域名和域名对应ip</td></tr><tr><td><a href="http://www.a.com/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com/a.js和</a> <a href="http://script.a.com/b.js" target="_blank" rel="noopener">http://script.a.com/b.js</a></td><td>主域相同，子域不同</td></tr><tr><td><a href="http://www.a.com/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com/a.js和</a> <a href="http://a.com/b.js" target="_blank" rel="noopener">http://a.com/b.js</a></td><td>同一域名，不同二级域名（同上)</td></tr><tr><td><a href="http://www.a.com/a.js%E5%92%8C" target="_blank" rel="noopener">http://www.a.com/a.js和</a> <a href="http://www.b.com/b.js" target="_blank" rel="noopener">http://www.b.com/b.js</a></td><td>不同域名</td></tr></tbody></table><p>访问的URL地址:网络协议＋域名(IP地址）＋端口号＋资源路径</p><ul><li><p>同源:网络协议相同、域名相同以及端口号相同</p></li><li><p>不同源:</p><ol><li>域名不相同: 完全跨域</li><li>域名相同，端口号不同: 跨子域</li></ol></li></ul><p>互联网默认原则: 同源策略(不允许跨域访问）</p><h2 id="跨域是什么"><a class="markdownIt-Anchor" href="#跨域是什么"></a> 跨域是什么</h2><p>当一个资源从与该资源本身所在的服务器不同的域或端请求一个资源时，资源会发起一个跨域HTTP请求。</p><p>出于安全原因，浏览器限制从脚本内发起的跨源HTTP请求。例如，XMLHttpRequest和FetchAPI遵循同源策略。这意味着使用这些API的Web应用程序只能从加载应用程序的同一个域请求HTTP资源。</p><p>常见跨域分为以下两种:</p><ul><li>完全跨域: 就是指一个顶级域名方向另一个顶级域名。</li><li>跨子域: 相同顶级域名下的两个子级域名相互通信。</li></ul>]]></content>
    
    <summary type="html">
    
      跨域访问是什么
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>异步提交表单</title>
    <link href="https://extheor.github.io/posts/51139400/index.html"/>
    <id>https://extheor.github.io/posts/51139400/index.html</id>
    <published>2020-09-04T09:14:37.000Z</published>
    <updated>2020-09-04T09:15:41.470Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="异步提交表单"><a class="markdownIt-Anchor" href="#异步提交表单"></a> 异步提交表单</h1><h2 id="异步提交表单的步骤"><a class="markdownIt-Anchor" href="#异步提交表单的步骤"></a> 异步提交表单的步骤</h2><p>所谓异步提交表单，就是不再使用表单的提交按钮实现表单的提交功能，而是通过Ajax异步交互方式实现表单提交。具体实现步骤如下:</p><ol><li>获取表单及所有表单组件对应的数据值。</li><li>将所有表单组件对应的数据值拼成特定格式的字符串或是JSON格式数据。</li><li>通过Ajax异步交互方式提交表单。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> info = <span class="string">'username='</span>+$(<span class="string">'#username'</span>).val()+<span class="string">'&amp;password='</span>+$(<span class="string">'#password'</span>).val();</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">"server.js',</span></span><br><span class="line"><span class="string">    type: 'post',</span></span><br><span class="line"><span class="string">    data: info,</span></span><br><span class="line"><span class="string">    success: function(data)&#123;</span></span><br><span class="line"><span class="string">    console.log(data);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure><p>异步提交表单的案例</p><ul><li><p>JSON文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"zhangsan"</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">  <span class="attr">"msg"</span>: <span class="string">"登录成功！"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>HTML文件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>异步提交表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      input &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> /&gt;</span> 密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $form = $(<span class="string">"form"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $username = $(<span class="string">"#username"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $password = $(<span class="string">"#password"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      $form.bind(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止表单默认的同步提交</span></span></span><br><span class="line">        event.preventDefault();</span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 获取表单组件的数据内容</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> username = $username.val();</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> password = $password.val();</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(username);</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(password);</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// post请求方式</span></span></span><br><span class="line"><span class="javascript">        $.<span class="keyword">get</span>("data/server5.json", &#123; username &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   console.log(response);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> usernameJson = response.username;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> passwordJson = response.password;</span></span><br><span class="line">          if (username === usernameJson &amp;&amp; password === passwordJson) &#123;</span><br><span class="line"><span class="actionscript">            alert(<span class="string">"登录成功!"</span>);</span></span><br><span class="line"><span class="actionscript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"用户名或密码错误"</span>);</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果图</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E5%BC%82%E6%AD%A5%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95.gif" alt="" /></p></li></ul><h2 id="表单序列化"><a class="markdownIt-Anchor" href="#表单序列化"></a> 表单序列化</h2><ol><li>serialize()方法: 将表单组件对应的数据值序列化为指定格式的字符串内容。</li></ol>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'form'</span>).serialize()</span><br></pre></td></tr></table></figure><ol start="2"><li><p>serializeArray()方法: 将表单组件对应的数据值序列化为JSON格式的数据内容。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'select, :radio'</span>).serializeArray()</span><br></pre></td></tr></table></figure></li></ol><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>表单序列化<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      input &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"username"</span> /&gt;</span> 密码：<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $form = $(<span class="string">"form"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $username = $(<span class="string">"#username"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $password = $(<span class="string">"#password"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      $form.bind(<span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span> <span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 阻止表单默认的同步提交</span></span></span><br><span class="line">        event.preventDefault();</span><br><span class="line"><span class="actionscript">        <span class="comment">// 表单序列化 - 根据表单默认同步提交获取数据的方式</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// var data = $("form").serialize();</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> data = $(<span class="string">"form"</span>).serializeArray();</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(data);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// post请求方式</span></span></span><br><span class="line"><span class="actionscript">        $.get(<span class="string">"data/server5.json"</span>, data, <span class="function"><span class="keyword">function</span> <span class="params">(response)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(response);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E8%A1%A8%E5%8D%95%E5%BA%8F%E5%88%97%E5%8C%96.png" alt="" /></p>]]></content>
    
    <summary type="html">
    
      异步提交表单
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>搜索提示框效果</title>
    <link href="https://extheor.github.io/posts/152fa65b/index.html"/>
    <id>https://extheor.github.io/posts/152fa65b/index.html</id>
    <published>2020-09-04T09:13:32.000Z</published>
    <updated>2020-09-04T09:15:41.472Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="搜索提示框效果"><a class="markdownIt-Anchor" href="#搜索提示框效果"></a> 搜索提示框效果</h1><ul><li><p>首先写静态页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"search"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 动态提示的数据框liebia --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"alert"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>CSS样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: darkgray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#search</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#alert</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">312px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">display</span>: none; <span class="comment">/* 将ul列表隐藏 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#alert</span> &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#alert</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.5px</span> solid <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#alert</span> &gt; <span class="selector-tag">ul</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>JS代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $search = $(<span class="string">"#search"</span>);</span><br><span class="line"><span class="keyword">var</span> $alert = $(<span class="string">"#alert"</span>);</span><br><span class="line"><span class="keyword">var</span> $alertUl = $(<span class="string">"#alert&gt;ul"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空列表的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearUl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $alertUl.empty();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$search</span><br><span class="line">    .bind(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 清空列表</span></span><br><span class="line">    clearUl();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取到用户所输入的内容</span></span><br><span class="line">    <span class="keyword">var</span> value = $(<span class="keyword">this</span>).val();</span><br><span class="line">    <span class="comment">// console.log(value);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用getJSON方法获取json数据</span></span><br><span class="line">    $.getJSON(<span class="string">"data/server4.json"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(data);</span></span><br><span class="line">        <span class="comment">// 获取到json数据中的name值</span></span><br><span class="line">        $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">input, obj</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// console.log(obj);</span></span><br><span class="line">            <span class="keyword">var</span> name = obj.name;</span><br><span class="line">            <span class="comment">// console.log(name);</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (name.indexOf(value) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 表示输入的内容在name中存在</span></span><br><span class="line">                <span class="keyword">var</span> valueArr = obj.value;</span><br><span class="line">                <span class="comment">// console.log(valueArr);</span></span><br><span class="line">                $.each(valueArr, <span class="function"><span class="keyword">function</span> (<span class="params">input, text</span>) </span>&#123;</span><br><span class="line">                    <span class="comment">// console.log(text);</span></span><br><span class="line">                    <span class="comment">// 将数据添加到HTML页面</span></span><br><span class="line">                    $alertUl.append(<span class="string">`&lt;li&gt;<span class="subst">$&#123;text&#125;</span>&lt;/li&gt;`</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将ul列表显示出来</span></span><br><span class="line">    $alert.css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">    .bind(<span class="string">"blur"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $alert.css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>实现效果</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E6%90%9C%E7%B4%A2%E6%A1%86%E6%8F%90%E7%A4%BA%E6%95%88%E6%9E%9C.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      搜索提示框效果
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>jQuery版三级联动案例</title>
    <link href="https://extheor.github.io/posts/61477045/index.html"/>
    <id>https://extheor.github.io/posts/61477045/index.html</id>
    <published>2020-09-03T14:51:47.000Z</published>
    <updated>2020-09-03T14:53:40.760Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="jquery版三级联动案例"><a class="markdownIt-Anchor" href="#jquery版三级联动案例"></a> jQuery版三级联动案例</h1><ul><li><p>首先写一个JSON数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"吉林省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"长春市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"吉林市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"白山市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"辽宁省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"沈阳市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"大连市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"铁岭市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"山东省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"青岛市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"济南市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"威海市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>然后用Ajax动态获取JSON文件中的数据</p></li><li><p>完整代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $province = $(<span class="string">"#province"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $city = $(<span class="string">"#city"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> $county = $(<span class="string">"#county"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> json;</span></span><br><span class="line"><span class="javascript">      $.getJSON(<span class="string">"data/server1.json"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 把data保存到json全局变量中</span></span></span><br><span class="line">        json = data;</span><br><span class="line"><span class="actionscript">        <span class="comment">// 遍历data数据</span></span></span><br><span class="line"><span class="javascript">        $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">index, obj</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 获取所有的省份信息</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> provinceName = obj.province;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   console.log(provinceName);</span></span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将省份信息添加到对应的select元素中</span></span></span><br><span class="line">          $province.append(</span><br><span class="line"><span class="javascript">            <span class="string">`&lt;option value="<span class="subst">$&#123;provinceName&#125;</span>"&gt;<span class="subst">$&#123;provinceName&#125;</span>&lt;/option&gt;`</span></span></span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        $province.change(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将城市下拉列表的选项清空</span></span></span><br><span class="line">          $city.empty();</span><br><span class="line"><span class="handlebars"><span class="xml">          $city.append(`<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span>`);</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">          <span class="comment">// 获取到所选择的城市的文本信息</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> provinceElementName = $(<span class="keyword">this</span>).children(<span class="string">"option:selected"</span>).text();</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   console.log(provinceElementName);</span></span></span><br><span class="line"><span class="javascript">          $.each(json, <span class="function"><span class="keyword">function</span> (<span class="params">index, obj</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> provinceName = obj.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(provinceName);</span></span></span><br><span class="line">            if (provinceElementName === provinceName) &#123;</span><br><span class="line"><span class="actionscript">              <span class="comment">// 获取到城市数组集合</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> cities = obj.cities;</span></span><br><span class="line"><span class="actionscript">              <span class="comment">// 遍历城市数组集合</span></span></span><br><span class="line"><span class="javascript">              $.each(cities, <span class="function"><span class="keyword">function</span> (<span class="params">index, obj</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// console.log(obj.city);</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取到城市名称</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> cityName = obj.city;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 将该省对应的城市名称添加到对应的select中</span></span></span><br><span class="line">                $city.append(</span><br><span class="line"><span class="javascript">                  <span class="string">`&lt;option value="<span class="subst">$&#123;cityName&#125;</span>"&gt;<span class="subst">$&#123;cityName&#125;</span>&lt;/option&gt;`</span></span></span><br><span class="line">                );</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        $city.change(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将区级下拉列表的选项清空</span></span></span><br><span class="line">          $county.empty();</span><br><span class="line"><span class="handlebars"><span class="xml">          $county.append(`<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span>`);</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">          <span class="comment">// 获取到所选择的城市的文本信息</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> cityElementName = $(<span class="keyword">this</span>).children(<span class="string">"option:selected"</span>).text();</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//   console.log(cityElementName);</span></span></span><br><span class="line"><span class="javascript">          $.each(json, <span class="function"><span class="keyword">function</span> (<span class="params">index, obj</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 获取该省对应的所有的城市信息</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> cities = obj.cities;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(cities);</span></span></span><br><span class="line"><span class="javascript">            $.each(cities, <span class="function"><span class="keyword">function</span> (<span class="params">index, cityObj</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">              <span class="comment">//   console.log(cityObj.city);</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> cityName = cityObj.city;</span></span><br><span class="line">              if (cityElementName === cityName) &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取到区级数组集合</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// console.log(cityObj.counties);</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> counties = cityObj.counties;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 遍历区级数组集合</span></span></span><br><span class="line"><span class="javascript">                $.each(counties, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// 获取到区级名称</span></span></span><br><span class="line"><span class="actionscript">                  <span class="comment">//   console.log(value);</span></span></span><br><span class="line"><span class="actionscript">                  <span class="comment">// 将该城市对应的区级名称添加到对应的select元素中</span></span></span><br><span class="line"><span class="javascript">                  $county.append(<span class="string">`&lt;option value="<span class="subst">$&#123;value&#125;</span>"&gt;<span class="subst">$&#123;value&#125;</span>&lt;/option&gt;`</span>);</span></span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A802.gif" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      jQuery版三级联动案例
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>jQuery中的Ajax</title>
    <link href="https://extheor.github.io/posts/a094d027/index.html"/>
    <id>https://extheor.github.io/posts/a094d027/index.html</id>
    <published>2020-09-03T14:51:34.000Z</published>
    <updated>2020-09-04T09:12:50.566Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="jquery中的ajax"><a class="markdownIt-Anchor" href="#jquery中的ajax"></a> jQuery中的Ajax</h1><h2 id="文章目录"><a class="markdownIt-Anchor" href="#文章目录"></a> 文章目录</h2><ul><li><a href="#load()%E6%96%B9%E6%B3%95">load()方法</a></li><li>[$.get()与 .post()方法](#.get()与 $.post()方法)</li><li>[.ajax()方法](#.ajax()方法)</li><li>[.getScript()方法](#.getScript()方法)</li><li>[.getJSON()方法](#.getJSON()方法)</li><li><a href="#Ajax%E7%9A%84%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6">Ajax的全局事件</a></li></ul><p>jQuery不仅对JavaScript语言进行了封装，也对Ajax异步交互进行了封装。jQuery提供了六个Ajax操作的方法:</p><ul><li>load()方法</li><li>$get()方法和 $.post()方法</li><li>$ajax()方法</li><li>$getScript(方法和 $getJSON()方法</li></ul><p>jQuery除了封装了六个Ajax操作的方法，还提供了以下几种事件:</p><ul><li><p>ajaxStart()和ajaxStop()事件</p></li><li><p>ajaxComplete()事件、ajaxSend()事件、ajaxError()事件和ajaxSuccess()事件</p></li></ul><h2 id="a-idload方法load方法a"><a class="markdownIt-Anchor" href="#a-idload方法load方法a"></a> <a id="load()方法">load()方法</a></h2><p>load()方法是jQuery中最为简单的Ajax方法，其语法结构如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$element.load(url,[data],[callback]);</span><br></pre></td></tr></table></figure><ul><li><p>url: 请求HTML页面的url地址。</p></li><li><p>data: 发送给服务器端的key/value形式的数据内容。</p></li><li><p>callback: Ajax请求完成时的回调函数。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">$(<span class="string">'div'</span>).load(<span class="string">'server.js'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p><font color="red"><b>注意：</b></font> load()方法的请求方式由是否传递参数决定。即不传递 data 参数，为GET方式;传递 data 参数，为POST方式。</p></blockquote><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>load()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line">            load(url, [data], [callback])方法</span><br><span class="line">            * 参数</span><br><span class="line">                * url - 异步请求的地址</span><br><span class="line">                * data - 异步请求的数据</span><br><span class="line">                * callback - 异步请求成功后的回调函数</span><br><span class="line">            * 返回值 - 服务器端的响应结果</span><br><span class="line">            * 注意 - 自动将返回结果写入到目标元素中</span><br><span class="line">        */</span><br><span class="line"><span class="javascript">        $(<span class="string">"button"</span>).load(<span class="string">"data/server2.json"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"异步请求成功..."</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果不传入data参数，默认为GET请求方式</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182518155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0Nvb2xfYnJlZXplXw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述" /></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>load()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line">            load(url, [data], [callback])方法</span><br><span class="line">            * 参数</span><br><span class="line">                * url - 异步请求的地址</span><br><span class="line">                * data - 异步请求的数据</span><br><span class="line">                * 如果省略请求数据的话，当前的请求数据的话，当前的请求方式为GET</span><br><span class="line">                    * 如果发送请求数据的话，当前的请求方式为POST</span><br><span class="line">                * callback - 异步请求成功后的回调函数</span><br><span class="line">            * 返回值 - 服务器端的响应结果</span><br><span class="line">            * 注意 - 自动将返回结果写入到目标元素中</span><br><span class="line">        */</span><br><span class="line"><span class="javascript">        $(<span class="string">"button"</span>).load(<span class="string">"data/server2.json"</span>, &#123; <span class="attr">name</span>: <span class="string">"张无忌"</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"异步请求成功..."</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果传入data参数，默认为POST请求方式</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182625498.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0Nvb2xfYnJlZXplXw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述" /></p><h2 id="a-idget与-post方法get与-post方法a"><a class="markdownIt-Anchor" href="#a-idget与-post方法get与-post方法a"></a> <a id="$.get()与 $.post()方法">$.get()与 $.post()方法</a></h2><ul><li><p>$get(方法使用GET方式向服务器端发送异步请求。其语法结构如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="keyword">get</span>(url,[data],[callback],[type]);</span><br></pre></td></tr></table></figure></li><li><p>url: 请求HTML页面的url地址。</p></li><li><p>data: 发送给服务器端的key/value形式的数据内容。</p></li><li><p>callback: Ajax请求完成时的回调函数。</p></li><li><p>type: 设置返回数据内容的格式。值为xml、html、script、json、text和_default。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$.<span class="keyword">get</span>('server.js',function(data, textStatus)&#123;</span><br><span class="line"><span class="comment">//data:表示服务器端响应的数据内容</span></span><br><span class="line">        <span class="comment">//textStatus: success、error、notmodified和timeout四种请求状态之一</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>get()与post()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line"><span class="actionscript">                <span class="keyword">get</span>(url, [data], [callback], [type])方法 - 请求方式为GET</span></span><br><span class="line">                * 参数</span><br><span class="line">                    * url - 异步请求地址</span><br><span class="line">                    * data - 异步请求的数据</span><br><span class="line">                    * callback - 异步请求成功后的回调函数</span><br><span class="line">              */</span><br><span class="line"><span class="actionscript">        $.get(<span class="string">"data/server2.json"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"异步请求成功啦..."</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2V4dGhlb3IvaW1hZ2VzL0FqYXglRTUlOUIlQkUlRTclODklODcvJC5nZXQwMS5wbmc?x-oss-process=image/format,png" alt="" /></p><p>可以看到，如果不传递 data 参数的话，默认为GET请求，并且请求URL是不带参数的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>get()与post()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line"><span class="actionscript">                <span class="keyword">get</span>(url, [data], [callback], [type])方法 - 请求方式为GET</span></span><br><span class="line">                * 参数</span><br><span class="line">                    * url - 异步请求地址</span><br><span class="line">                    * data - 异步请求的数据</span><br><span class="line">                    * callback - 异步请求成功后的回调函数</span><br><span class="line">              */</span><br><span class="line"><span class="javascript">        $.<span class="keyword">get</span>("data/server2.json", &#123; name: <span class="string">"张无忌"</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(<span class="string">"异步请求成功啦..."</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2V4dGhlb3IvaW1hZ2VzL0FqYXglRTUlOUIlQkUlRTclODklODcvJC5nZXQwMi5wbmc?x-oss-process=image/format,png" alt="" /></p><p>可以看到，如果传递 data 参数的话，默认也为GET请求，并且请求URL是带参数的</p><p>callback中响应结果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>get()与post()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line"><span class="actionscript">                <span class="keyword">get</span>(url, [data], [callback], [type])方法 - 请求方式为GET</span></span><br><span class="line">                * 参数</span><br><span class="line">                    * url - 异步请求地址</span><br><span class="line">                    * data - 异步请求的数据</span><br><span class="line">                    * callback - 异步请求成功后的回调函数</span><br><span class="line"><span class="actionscript">                        <span class="function"><span class="keyword">function</span><span class="params">(response)</span></span>&#123;&#125;</span></span><br><span class="line">                    * type - 设置服务器端响应结果的格式</span><br><span class="line">                        xml、html、script、json、text等</span><br><span class="line">              */</span><br><span class="line"><span class="javascript">        $.<span class="keyword">get</span>("data/server2.json", &#123; name: <span class="string">"张无忌"</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(response);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182830952.png#pic_center" alt="在这里插入图片描述" /></p><p>不传递type类型默认返回json格式的数据内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>get()与post()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line"><span class="actionscript">                <span class="keyword">get</span>(url, [data], [callback], [type])方法 - 请求方式为GET</span></span><br><span class="line">                * 参数</span><br><span class="line">                    * url - 异步请求地址</span><br><span class="line">                    * data - 异步请求的数据</span><br><span class="line">                    * callback - 异步请求成功后的回调函数</span><br><span class="line"><span class="actionscript">                        <span class="function"><span class="keyword">function</span><span class="params">(response)</span></span>&#123;&#125;</span></span><br><span class="line">                    * type - 设置服务器端响应结果的格式</span><br><span class="line">                        xml、html、script、json、text等</span><br><span class="line">              */</span><br><span class="line"><span class="javascript">        $.<span class="keyword">get</span>(</span></span><br><span class="line"><span class="actionscript">          <span class="string">"data/server2.json"</span>,</span></span><br><span class="line"><span class="actionscript">          &#123; name: <span class="string">"张无忌"</span> &#125;,</span></span><br><span class="line"><span class="actionscript">          <span class="function"><span class="keyword">function</span> <span class="params">(response)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(response);</span></span><br><span class="line">          &#125;,</span><br><span class="line"><span class="actionscript">          <span class="string">"text"</span></span></span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182842294.png#pic_center" alt="在这里插入图片描述" /></p><p>不传递type类型会返回指定格式的数据内容</p><blockquote><p>$.post方法同样用法</p></blockquote><h2 id="a-idajax方法ajax方法a"><a class="markdownIt-Anchor" href="#a-idajax方法ajax方法a"></a> <a id="$.ajax()方法">$.ajax()方法</a></h2><p>具体可以参考 jQuery文档 <a href="https://jquery.cuishifeng.cn/jQuery.Ajax.html" target="_blank" rel="noopener">jQuery.ajax(url,[settings])</a></p><p>$ajax()方法是jQuery中最为底层的Ajax方法，其语法结构如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(url,[settings]);</span><br></pre></td></tr></table></figure><ul><li><p>url: 请求HTML页面的url地址。</p></li><li><p>settings: key/value形式的请求设置，所有参数都是可选的。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">url:<span class="string">"server.js"</span>,</span><br><span class="line">type:<span class="string">"post"</span>,</span><br><span class="line">data:<span class="string">"this is ajax"</span>,</span><br><span class="line">success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data);<span class="comment">//服务器响应回数据之后的处理逻辑</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        /*</span><br><span class="line"><span class="javascript">                $.ajax(url, [settings])方法</span></span><br><span class="line">                * 参数</span><br><span class="line">                    * url - 请求地址</span><br><span class="line">                    * settings - 设置异步请求的参数</span><br><span class="line">                * settings选项 - 对象类型</span><br><span class="line">                    * type - 设置请求方式</span><br><span class="line">                    * data - 发送给服务器端的请求数据</span><br><span class="line">                    * dataType - 服务器端响应结果的格式</span><br><span class="line">                    * success - 异步请求成功后的回调函数</span><br><span class="line"><span class="actionscript">                        <span class="function"><span class="keyword">function</span><span class="params">(data, textStatus, jqXHR)</span></span>&#123;&#125;</span></span><br><span class="line">                            * data - 表示服务器端响应的结果</span><br><span class="line">                            * textStatus - 表示服务器端当前的状态</span><br><span class="line">                            * jqXHR - Ajax中的核心对象</span><br><span class="line">            */</span><br><span class="line"><span class="javascript">        $.ajax(<span class="string">"data/server2.json"</span>, &#123;</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">"get"</span>,</span></span><br><span class="line"><span class="actionscript">          dataType: <span class="string">"text"</span>,</span></span><br><span class="line"><span class="actionscript">          success: <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(data);</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182854118.png#pic_center" alt="在这里插入图片描述" /></p><h2 id="a-idgetscript方法getscript方法a"><a class="markdownIt-Anchor" href="#a-idgetscript方法getscript方法a"></a> <a id="$.getScript()方法">$.getScript()方法</a></h2><p>$getScript(方法是jQuery中用于动态加载指定JavaScript文件，其语法结构如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.getScript(url,[callback);</span><br></pre></td></tr></table></figure><ul><li>url: 请求JavaScript文件的url地址。</li><li>callback: 指定JavaScript文件成功加载后的回调函数。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$.getScript(<span class="string">'test.js'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>getScript()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 动态加载指定JavaScript文件，并且执行</span></span></span><br><span class="line"><span class="javascript">        $.getScript(<span class="string">"data/server3.js"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">eval</span>(data);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182912896.png#pic_center" alt="在这里插入图片描述" /></p><h2 id="a-idgetjson方法getjson方法a"><a class="markdownIt-Anchor" href="#a-idgetjson方法getjson方法a"></a> <a id="$.getJSON()方法">$.getJSON()方法</a></h2><p>$getuJSON(方法是jQuery中用于动态加载指定JSON格式的数据内容，其语法结构如下:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.getJSON(url,[data],[callback]);</span><br></pre></td></tr></table></figure><ul><li><p>url: 请求JavaScript文件的url地址。</p></li><li><p>data: 发送给服务器端的key/value形式的数据内容。</p></li><li><p>callback: 指定JavaScript文件成功加载后的回调函数。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$.getJSON(<span class="string">'test.json'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>gtJSON()方法<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// getJSON()方法的请求方式为GET</span></span></span><br><span class="line"><span class="javascript">        $.getJSON(<span class="string">"data/server2.json"</span>, &#123; <span class="attr">name</span>: <span class="string">"张无忌"</span> &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(data);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200903182924376.png#pic_center" alt="在这里插入图片描述" /></p><h2 id="a-idajax的全局事件ajax的全局事件a"><a class="markdownIt-Anchor" href="#a-idajax的全局事件ajax的全局事件a"></a> <a id="Ajax的全局事件">Ajax的全局事件</a></h2><p><strong>加载请求： .ajaxStart() 和 .ajaxstop()</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxStart(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'.loading'</span>).show();</span><br><span class="line">&#125;).ajaxStop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'.loading'</span>).hide();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>错误处理： .ajaxError()</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//1 $.ajax()使用属性提示错误</span></span><br><span class="line">    $(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type:<span class="string">"post"</span>,</span><br><span class="line">            url:<span class="string">"test1.php"</span>,</span><br><span class="line">            <span class="keyword">async</span>:<span class="literal">true</span>,</span><br><span class="line">            data:$(<span class="string">'form'</span>).serialize(),</span><br><span class="line">            success:<span class="function"><span class="keyword">function</span>(<span class="params">response,status,xhr</span>)</span>&#123;</span><br><span class="line">                $(<span class="string">'#box'</span>).html(response);</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="comment">//            timeout:3000</span></span><br><span class="line"><span class="comment">//            global:false</span></span><br><span class="line">            error:<span class="function"><span class="keyword">function</span>(<span class="params">xhr,errorText,errorType</span>)</span>&#123;</span><br><span class="line"><span class="comment">//                alert(errorText + ':' +errorType);</span></span><br><span class="line">                alert(xhr.status + <span class="string">':'</span> +xhr.statusText);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2 $.post()使用连缀.error()方法提示错误，将被.fail()取代</span></span><br><span class="line">    $(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $.post(<span class="string">'test1.php'</span>).error(<span class="function"><span class="keyword">function</span>(<span class="params">xhr,errorText,errorType</span>)</span>&#123;</span><br><span class="line">            alert(errorText + <span class="string">':'</span> +errorType);</span><br><span class="line">            alert(xhr.status + <span class="string">':'</span> +xhr.statusText);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3 使用全局.ajaxError()方法</span></span><br><span class="line">    $(<span class="built_in">document</span>).ajaxError(<span class="function"><span class="keyword">function</span>(<span class="params">event,xhr,settings,info</span>)</span>&#123;</span><br><span class="line">        alert(event.type);</span><br><span class="line">        alert(event.target);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> event)&#123; <span class="comment">//打印出event的所有属性</span></span><br><span class="line">            <span class="built_in">document</span>.write(i + <span class="string">'&lt;br /&gt;'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p><strong>.ajaxSuccess()</strong>，对应一个局部方法：<strong>.success()</strong>，请求成功完成时执行。</p><p><strong>.ajaxComplete()</strong>，对应一个局部方法：<strong>.complete()</strong>，请求完成后注册一个回调函数。</p><p><strong>.ajaxSend()</strong>，没有对应的局部方法，只有属性 <strong>beforeSend</strong>，请求发送之前要绑定的函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$.post()使用全局</span></span><br><span class="line">$(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.post(<span class="string">'test.php'</span>,$(<span class="string">'form'</span>).serialize());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">'document'</span>).ajaxSend(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(发送请求之前执行);</span><br><span class="line">&#125;).ajaxComplete(<span class="function"><span class="keyword">function</span>(<span class="params">response,status,xhr</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'请求完成后，不管是否失败成功'</span>);</span><br><span class="line">&#125;).ajaxSuccess(<span class="function"><span class="keyword">function</span>(<span class="params">event,xhr,settrings</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'请求成功后，不管是否成功'</span>);</span><br><span class="line">&#125;).ajaxError(<span class="function"><span class="keyword">function</span>(<span class="params">event,xhr,settrings</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'请求失败后'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//$.post()使用局部</span></span><br><span class="line">$(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.post(<span class="string">'test.php'</span>,$(<span class="string">'form'</span>).serialize()).success(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">'请求成功后'</span>);</span><br><span class="line">    &#125;).complete(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">'请求完成后'</span>);</span><br><span class="line">    &#125;).error(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">'请求失败后'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//$.ajax()使用属性</span></span><br><span class="line">$(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">"post"</span>,</span><br><span class="line">        url:<span class="string">"test1.php"</span>,</span><br><span class="line">        <span class="keyword">async</span>:<span class="literal">true</span>,</span><br><span class="line">        data:$(<span class="string">'form'</span>).serialize(),</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">response,status,xhr</span>)</span>&#123;</span><br><span class="line">            alert(<span class="string">'请求成功后'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        complete:<span class="function"><span class="keyword">function</span>（)</span>&#123;</span><br><span class="line">            alert(<span class="string">'请求完成后,不管失败成功'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeSend:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(<span class="string">'发送请求之前'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        error:<span class="function"><span class="keyword">function</span>(<span class="params">xhr,errorText,errorType</span>)</span>&#123;</span><br><span class="line">            alert(<span class="string">'请求失败后'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>注：在 jQuery1.5 版本以后，使用**.success()<strong>、</strong>.error()<strong>和</strong>.complete()<strong>连缀的方法，可以用</strong>.done()<strong>、</strong>.fail()<strong>和</strong>.always()**取代。</p></blockquote>]]></content>
    
    <summary type="html">
    
      jQuery中的Ajax
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>三级联动案例</title>
    <link href="https://extheor.github.io/posts/3f6e5f9e/index.html"/>
    <id>https://extheor.github.io/posts/3f6e5f9e/index.html</id>
    <published>2020-09-03T14:49:24.000Z</published>
    <updated>2020-09-03T14:53:40.762Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="三级联动案例"><a class="markdownIt-Anchor" href="#三级联动案例"></a> 三级联动案例</h1><ul><li><p>首先写一个JSON数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"吉林省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"长春市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"吉林市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"白山市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"辽宁省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"沈阳市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"大连市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"铁岭市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"province"</span>: <span class="string">"山东省"</span>,</span><br><span class="line">    <span class="attr">"cities"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"青岛市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"朝阳区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"济南市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"东城区"</span>, <span class="string">"经济开发区"</span>, <span class="string">"老城区"</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"city"</span>: <span class="string">"威海市"</span>,</span><br><span class="line">        <span class="attr">"counties"</span>: [<span class="string">"二道区"</span>, <span class="string">"河东区"</span>, <span class="string">"高新区"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>然后用Ajax动态获取JSON文件中的数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取省份下拉列表</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> provinceElement = <span class="built_in">document</span>.getElementById(<span class="string">"province"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 1. 当页面加载完毕后，动态获取省份信息</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> xhr = createXMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">        if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 得到服务器端返回的数据</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> response = xhr.responseText;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将JSON字符串转换成JSON对象</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> datas = <span class="built_in">JSON</span>.parse(response);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(datas[i]);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> province = data.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(data.province);</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">            opt.setAttribute(<span class="string">"value"</span>, <span class="string">"province"</span>);</span></span><br><span class="line">            opt.textContent = province;</span><br><span class="line">            provinceElement.appendChild(opt);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      xhr.open(<span class="string">"get"</span>, <span class="string">"./data/server1.json"</span>);</span></span><br><span class="line"><span class="actionscript">      xhr.send(<span class="literal">null</span>);</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200902170135822.png#pic_center" alt="在这里插入图片描述" /></p><ul><li><p>为省份下拉列表绑定change事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">provinceElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>HTMLSelectionElement</p><p><strong><code>HTMLSelectElement</code></strong> 接口表示一个 <code>&lt;select&gt;</code> HTML 元素。这个元素也通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement" target="_blank" rel="noopener"><code>HTMLElement</code></a> 接口从其他 HTML 元素共享所有属性和方法。</p><iframe class="live-sample-frame inheritance-diagram-frame" frameborder="0" height="120" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/zh-CN/docs/Web/API/HTMLSelectElement$samples/inheritance_diagram?revision=1626258" width="600" style="margin: 0px; padding: 0px; border: 0px; max-width: 100%; color: rgb(51, 51, 51); font-family: Arial, x-locale-body, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: -0.04448px; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"></iframe><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLSelectElement/options" target="_blank" rel="noopener"><code>HTMLSelectElement.options</code></a></p><p>只读属性。返回当前select元素包括option元素对象的集合。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLSelectElement/selectedIndex" target="_blank" rel="noopener"><code>HTMLSelectElement.selectedIndex</code></a></p><p>此属性返回一个长整型数值，代表第一个被选中的option元素，-1代表没有元素被选中。</p></li></ul></li></ul><p>代码演示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取省份下拉列表</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> provinceElement = <span class="built_in">document</span>.getElementById(<span class="string">"province"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 1. 当页面加载完毕后，动态获取省份信息</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> xhr = createXMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">        if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 得到服务器端返回的数据</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> response = xhr.responseText;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将JSON字符串转换成JSON对象</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> datas = <span class="built_in">JSON</span>.parse(response);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(datas[i]);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> province = data.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(data.province);</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">            opt.setAttribute(<span class="string">"value"</span>, <span class="string">"province"</span>);</span></span><br><span class="line">            opt.textContent = province;</span><br><span class="line">            provinceElement.appendChild(opt);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      xhr.open(<span class="string">"get"</span>, <span class="string">"./data/server1.json"</span>);</span></span><br><span class="line"><span class="actionscript">      xhr.send(<span class="literal">null</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 为省份下拉列表绑定change事件</span></span></span><br><span class="line"><span class="actionscript">      provinceElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 用户选择的省份信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opts = provinceElement.options;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(opts);</span></span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当我更换省份时，会触发change事件，这时输出一个HTMLOptionCollection集合</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020090217015273.png#pic_center" alt="在这里插入图片描述" /></p><p>这个selectedIndex就是当前所选中省份的索引值</p><p>只需使用item()方法即可获取当前所选中的 <code>&lt;select&gt;</code> 元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取省份下拉列表</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> provinceElement = <span class="built_in">document</span>.getElementById(<span class="string">"province"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 1. 当页面加载完毕后，动态获取省份信息</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> xhr = createXMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">        if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 得到服务器端返回的数据</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> response = xhr.responseText;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将JSON字符串转换成JSON对象</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> datas = <span class="built_in">JSON</span>.parse(response);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(datas[i]);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> province = data.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(data.province);</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">            opt.setAttribute(<span class="string">"value"</span>, <span class="string">"province"</span>);</span></span><br><span class="line">            opt.textContent = province;</span><br><span class="line">            provinceElement.appendChild(opt);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      xhr.open(<span class="string">"get"</span>, <span class="string">"./data/server1.json"</span>);</span></span><br><span class="line"><span class="actionscript">      xhr.send(<span class="literal">null</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 为省份下拉列表绑定change事件</span></span></span><br><span class="line"><span class="actionscript">      provinceElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 用户选择的省份信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opts = provinceElement.options;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opts);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> index = provinceElement.selectedIndex; <span class="comment">// 被选中&lt;option&gt;的索引值</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opt = opts.item(index);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(opt);</span></span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200902170201442.png#pic_center" alt="在这里插入图片描述" /></p><ul><li><p>二级联动，把省份对应的城市信息在第二个 <code>&lt;select&gt;</code> 中显示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取省份、城市下拉列表</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> provinceElement = <span class="built_in">document</span>.getElementById(<span class="string">"province"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> cityElement = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> datas;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 1. 当页面加载完毕后，动态获取省份信息</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> xhr = createXMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">        if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 得到服务器端返回的数据</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> response = xhr.responseText;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将JSON字符串转换成JSON对象</span></span></span><br><span class="line"><span class="javascript">          datas = <span class="built_in">JSON</span>.parse(response);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(datas[i]);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> province = data.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(data.province);</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">            opt.setAttribute(<span class="string">"value"</span>, province);</span></span><br><span class="line">            opt.textContent = province;</span><br><span class="line">            provinceElement.appendChild(opt);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      xhr.open(<span class="string">"get"</span>, <span class="string">"./data/server1.json"</span>);</span></span><br><span class="line"><span class="actionscript">      xhr.send(<span class="literal">null</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 为省份下拉列表绑定change事件</span></span></span><br><span class="line"><span class="actionscript">      provinceElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 用户选择的省份信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opts = provinceElement.options; <span class="comment">// 获取指定下拉列表所有选项</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opts);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> index = provinceElement.selectedIndex; <span class="comment">// 被选中&lt;option&gt;的索引值</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opt = opts.item(index);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(opt);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> provinceName = opt.getAttribute(<span class="string">"value"</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(province);</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 2. 根据省份信息获取对应的城市信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> province = data.province;</span></span><br><span class="line">          if (provinceName === province) &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 获取对应的城市信息</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> cities = data.cities;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(cities);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; cities.length; j++) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> city = cities[j].city;</span></span><br><span class="line"><span class="actionscript">              <span class="comment">// console.log(city);</span></span></span><br><span class="line"><span class="actionscript">              <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">              opt.setAttribute(<span class="string">"value"</span>, city);</span></span><br><span class="line">              opt.textContent = city;</span><br><span class="line">              cityElement.appendChild(opt);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是当我选择了辽宁省，再选山东省之后，出现辽宁省的城市还在，也就是说，没有删除</p></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200902170212973.png#pic_center" alt="在这里插入图片描述" /></p><p>我们需要删除其他省份的城市</p><p>因为cityOpts.length要删除数据，那删了之后下一次的cityOpts.length的长度就比上一次的长度少一，也就是说，cityOpts.length的长度的动态变化的，所以最后要写一个k–，跟着cityOpts.length的长度对应的减小即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将城市下拉列表的选项清空</span></span><br><span class="line"><span class="keyword">var</span> cityOpts = cityElement.options;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">1</span>; k &lt; cityOpts.length; k++) &#123;</span><br><span class="line">    cityElement.removeChild(cityOpts[k]);</span><br><span class="line">    k--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现效果如下</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2V4dGhlb3IvaW1hZ2VzL0FqYXglRTUlOUIlQkUlRTclODklODcvJUU0JUI4JTg5JUU3JUJBJUE3JUU4JTgxJTk0JUU1JThBJUE4LmdpZg" alt="" /></p><ul><li><p>三级联动完整案例</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>三级联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 三级联动 - 两个二级联动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"province"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"county"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/createXMLHttpRequest.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 获取省份、城市下拉列表</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> provinceElement = <span class="built_in">document</span>.getElementById(<span class="string">"province"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> cityElement = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> countyElement = <span class="built_in">document</span>.getElementById(<span class="string">"county"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> datas;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 1. 当页面加载完毕后，动态获取省份信息</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> xhr = createXMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">        if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123;</span><br><span class="line"><span class="actionscript">          <span class="comment">// 得到服务器端返回的数据</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> response = xhr.responseText;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// 将JSON字符串转换成JSON对象</span></span></span><br><span class="line"><span class="javascript">          datas = <span class="built_in">JSON</span>.parse(response);</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(data);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(datas[i]);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> province = data.province;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(data.province);</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">            opt.setAttribute(<span class="string">"value"</span>, province);</span></span><br><span class="line">            opt.textContent = province;</span><br><span class="line">            provinceElement.appendChild(opt);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"><span class="actionscript">      xhr.open(<span class="string">"get"</span>, <span class="string">"./data/server1.json"</span>);</span></span><br><span class="line"><span class="actionscript">      xhr.send(<span class="literal">null</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="comment">// 为省份下拉列表绑定change事件</span></span></span><br><span class="line"><span class="actionscript">      provinceElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 将城市下拉列表的选项清空</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> cityOpts = cityElement.options;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">1</span>; k &lt; cityOpts.length; k++) &#123;</span></span><br><span class="line">          cityElement.removeChild(cityOpts[k]);</span><br><span class="line">          k--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 用户选择的省份信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opts = provinceElement.options; <span class="comment">// 获取指定下拉列表所有选项</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opts);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> index = provinceElement.selectedIndex; <span class="comment">// 被选中&lt;option&gt;的索引值</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opt = opts.item(index);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opt);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> provinceName = opt.getAttribute(<span class="string">"value"</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(provinceName);</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 2. 根据省份信息获取对应的城市信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> data = datas[i];</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> province = data.province;</span></span><br><span class="line">          if (provinceName === province) &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 获取对应的城市信息</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> cities = data.cities;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(cities);</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; cities.length; j++) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> city = cities[j].city;</span></span><br><span class="line"><span class="actionscript">              <span class="comment">// console.log(city);</span></span></span><br><span class="line"><span class="actionscript">              <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">              opt.setAttribute(<span class="string">"value"</span>, city);</span></span><br><span class="line">              opt.textContent = city;</span><br><span class="line">              cityElement.appendChild(opt);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"><span class="actionscript">      <span class="comment">// 为城市下拉列表绑定change事件</span></span></span><br><span class="line"><span class="actionscript">      cityElement.addEventListener(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 将区级下拉列表的选项清空</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> countyOpts = countyElement.options;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">1</span>; k &lt; countyOpts.length; k++) &#123;</span></span><br><span class="line">          countyElement.removeChild(countyOpts[k]);</span><br><span class="line">          k--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 1. 用户选择的城市信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opts = cityElement.options; <span class="comment">// 获取指定下拉列表所有选项</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opts);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> index = cityElement.selectedIndex; <span class="comment">// 被选中&lt;option&gt;的索引值</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> opt = opts.item(index);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(opt);</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> cityName = opt.getAttribute(<span class="string">"value"</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// console.log(cityName);</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 2. 根据城市信息获取对应的区级信息</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> cities = datas[i].cities;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">// console.log(cities);</span></span></span><br><span class="line"><span class="actionscript">          <span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; cities.length; x++) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> city = cities[x].city;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(city);</span></span></span><br><span class="line"></span><br><span class="line">            if (cityName === city) &#123;</span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> counties = cities[x].counties;</span></span><br><span class="line"><span class="actionscript">              <span class="comment">// console.log(counties);</span></span></span><br><span class="line"><span class="actionscript">              <span class="keyword">for</span> (<span class="keyword">var</span> y = <span class="number">0</span>; y &lt; counties.length; y++) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> county = counties[y];</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// console.log(county);</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 将数据更新到HTML页面中</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> opt = <span class="built_in">document</span>.createElement(<span class="string">"option"</span>);</span></span><br><span class="line"><span class="actionscript">                opt.setAttribute(<span class="string">"value"</span>, county);</span></span><br><span class="line">                opt.textContent = county;</span><br><span class="line">                countyElement.appendChild(opt);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2V4dGhlb3IvaW1hZ2VzL0FqYXglRTUlOUIlQkUlRTclODklODcvJUU0JUI4JTg5JUU3JUJBJUE3JUU4JTgxJTk0JUU1JThBJUE4MDIuZ2lm" alt="" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      三级联动案例
    
    </summary>
    
    
      <category term="Ajax" scheme="https://extheor.github.io/categories/Ajax/"/>
    
    
      <category term="ajax" scheme="https://extheor.github.io/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>JSON是什么</title>
    <link href="https://extheor.github.io/posts/7d3ea75e/index.html"/>
    <id>https://extheor.github.io/posts/7d3ea75e/index.html</id>
    <published>2020-09-03T14:46:46.000Z</published>
    <updated>2020-09-03T14:53:40.756Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/css/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@v0.1/Hexo/assets/js/Meting.min.js"></script><h1 id="json是什么"><a class="markdownIt-Anchor" href="#json是什么"></a> JSON是什么</h1><p>JSON是JavaScript Object Notation的缩写，是一种轻量级的数据交换格式。JSON是基于JavaScript Programming Language, Standard ECMA-262 3rd Edition-December 1999的一个子集。</p><p>JSON是独立于任何语言的文本格式。易于程序员阅读和编写，同时也易于计算机解析和生成。</p><p>JSON的中文官网地址: <a href="http://www.json.org/json-zh.html" target="_blank" rel="noopener">http://www.json.org/json-zh.html</a></p><h2 id="json语法规则"><a class="markdownIt-Anchor" href="#json语法规则"></a> JSON语法规则</h2><p>JSON格式的构建比较简单，主要为两种结构:</p><ul><li><p>“名称/值”对的集合(A collection of narne/value pairs）。不同的语言中，它被理解为对象<br />( object ），纪录(record)，结构(struct)，字典( dictionary)，哈希表( hash table ) ,有键列表(keyed list ），或者关联数组( associative array )。</p></li><li><p>值的有序列表(An ordered list of values ）。在大部分语言中，它被理解为数组( array )。<br />JSON格式中作为值的类型允许是字符串( string)、数值(number)、true、false、null、对象( object）或者数组( array ）。</p></li></ul><h2 id="json中的键值对集合"><a class="markdownIt-Anchor" href="#json中的键值对集合"></a> JSON中的键值对集合</h2><p>JSON格式中的“名称/值”对的集合是一个无序的“‘名称/值’对”集合。一个对象以“{”（左括号）开始，“}”（右括号）结束。每个“名称”后跟一个“”（冒号）;“ ‘名称/值’ 对 ”之间使用“,”（逗号）分隔。</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/JSON%E4%B8%AD%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%E9%9B%86%E5%90%88.png" alt="" /></p><h2 id="json中的值的有序列表"><a class="markdownIt-Anchor" href="#json中的值的有序列表"></a> JSON中的值的有序列表</h2><p>JSON格式中的值的有序列表是值(value ）的有序集合。一个数组以“[”（左中括号）开始，“]”(右中括号）结束。值之间使用“”（逗号）分隔。</p><p><img src= "https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@v3.3.1/butterfly/img/loading9.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/extheor/images/Ajax%E5%9B%BE%E7%89%87/JSON%E4%B8%AD%E7%9A%84%E5%80%BC%E7%9A%84%E6%9C%89%E5%BA%8F%E5%88%97%E8%A1%A8.png" alt="" /></p><h2 id="json文件"><a class="markdownIt-Anchor" href="#json文件"></a> JSON文件</h2><p>写法如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"武侠"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"倚天屠龙记"</span>: [<span class="string">"张无忌"</span>, <span class="string">"周芷若"</span>],</span><br><span class="line">      <span class="attr">"笑傲江湖"</span>: [<span class="string">"令狐冲"</span>, <span class="string">"东方不败"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"言情"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"还珠格格"</span>: [<span class="string">"尔康"</span>, <span class="string">"紫薇"</span>],</span><br><span class="line">      <span class="attr">"情深深雨蒙蒙"</span>: [<span class="string">"何书恒"</span>, <span class="string">"陆依萍"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      JSON是什么
    
    </summary>
    
    
      <category term="JSON" scheme="https://extheor.github.io/categories/JSON/"/>
    
    
      <category term="json" scheme="https://extheor.github.io/tags/json/"/>
    
  </entry>
  
</feed>
